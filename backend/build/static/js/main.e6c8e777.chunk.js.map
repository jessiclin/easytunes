{"version":3,"sources":["components/login_screen/SignIn.js","components/login_screen/SignUp.js","components/Navbar/Navbar.js","components/login_screen/LoginScreen.js","components/reset_password_screen/ResetPasswordScreen.js","components/Profile/Playlists/PlaylistButton.js","components/Profile/Playlists/NewPlaylistButton.js","components/Profile/Playlists/Playlists.js","components/Profile/Playlists/SavedPlaylistButton.js","components/Profile/Playlists/SavedPlaylists.js","components/Profile/Profile.js","components/Playlist/Songlist/Song.js","components/Playlist/Songlist/Songlist.js","components/Playlist/Comments/Comment.js","components/Playlist/Comments/Reply.js","components/Playlist/Comments/ShowReplyCard.js","components/Playlist/Comments/ShowReplies.js","components/Playlist/Comments/UserComment.js","components/Playlist/Comments/Comments.js","components/Playlist/PlaylistSetting/PlaylistSetting.js","components/Playlist/Playlist.js","components/HomePage/Home.js","components/home_screen/Home_Playlist_Button.js","components/home_screen/Home_Playlists.js","components/home_screen/HomeScreen.js","components/search_screen/AddSongs.js","components/search_screen/UserCard.js","components/search_screen/PlaylistCard.js","components/search_screen/ArtistCard.js","components/search_screen/SongCard.js","components/search_screen/SearchListCard.js","components/search_screen/SearchList.js","components/search_screen/SearchScreen.js","components/Following/Follower.js","components/Following/Followers.js","components/Following/FollowingUser.js","components/Following/Following.js","components/Following/Request.js","components/Following/Requests.js","components/Following/FollowingPage.js","components/Setting/AccountSetting/Update.js","components/Setting/AccountSetting/UpdatePassword.js","components/Setting/AccountSetting/AccountSetting.js","components/Setting/AdvancedSetting/AdvancedSetting.js","components/Setting/PrivacySetting/PrivacyToggles.js","components/Setting/PrivacySetting/PrivacySetting.js","components/Setting/Setting.js","components/HeaderNavbar/HeaderNavbar.js","components/PlaylistNavbar/PlaylistNavbar.js","components/Menu/Menu.js","App.js","serviceWorker.js","index.js"],"names":["SignIn","props","state","error","setErrmess","err","setState","errorMess","componentDidMount","console","log","username","toHome","handleSignIn","event","a","preventDefault","email","emailEl","current","children","value","toLowerCase","password","passwordEl","trim","length","requestBody","query","fetch","method","body","JSON","stringify","headers","then","res","status","Error","json","result","data","login","onUsernameChange","localStorage","setItem","window","location","replace","catch","message","React","createRef","classes","this","Container","component","maxWidth","CssBaseline","className","paper","Avatar","avatar","Typography","variant","form","noValidate","TextField","InputProps","input","margin","required","fullWidth","id","label","name","autoComplete","autoFocus","ref","type","Button","color","submit","onClick","Grid","container","item","xs","Link","href","Component","withStyles","theme","marginTop","spacing","display","flexDirection","alignItems","backgroundColor","width","paddingLeft","paddingRight","SignUp","handleSignUp","usernameEl","confirm","confirmEl","userUrl","pattern","test","errors","createUser","palette","secondary","main","useStyles","makeStyles","root","flexGrow","appbar","background","icon","fontSize","appbarWrapper","title","Navbar","AppBar","elevation","Toolbar","IconButton","edge","menuButton","aria-label","to","Login","loginVisible","signUpVisible","history","push","document","getElementsByClassName","style","borderBottom","borderRight","changeView","invisible","visible","target","element","getElementById","Reset","sent","handleReset","emailR","Math","floor","random","PlaylistButton","playlist","deleteConfirmVisible","setVisible","setInvisible","toPlaylist","encodeURIComponent","_id","deletePlaylist","setPlaylists","getUserPlaylists","handlePlay","current_playlist","onPlayChange","play","onPlaylistChange","songs","alt","src","playlist_img","class","public","total_duration","size","likes","playlist_id","disabled","sessionUser","deleteBtn","Dialog","open","keepMounted","onClose","aria-labelledby","aria-describedby","DialogTitle","DialogActions","outline","NewPlaylistButton","popupVisible","user_id","createNewPlaylist","nameEl","addButton","dialog","DialogContent","DialogContentText","minWidth","float","Playlists","playlists","user","map","key","editing","text","SavedPlaylistButton","loading","getPlaylistByID","getUserByUsername","saved_playlists","SavedPlaylists","Profile","showSavedPlaylists","showMyPlaylists","showUploadedSongs","profileUsername","match","params","profileUserInfo","profileAccountCreationDate","profileFollowers","profilePlaylists","profileSavedPlaylists","isHovered","date","Date","parseInt","joined","pathname","split","followers","getMonth","getDate","getFullYear","toggleHover","handleUnfollow","following","forEach","follower","i","splice","isFollowing","currentTarget","profile_img","onMouseEnter","onMouseLeave","align","buttonFocus","buttonNotFocus","borderRadius","strokeLinecap","border","fontWeight","padding","Song","song","playlistId","handleDelete","removeSong","index","moveUp","handleMoveUp","moveDown","handleMoveDown","current_song","song_id","onSongChange","handlePlayClick","song_img","artists","duration","playlist_length","Songlist","temp","Comment","buttonsVisible","handleBlur","handleCancel","handleSubmit","commentEl","stateChange","addComment","comments","placeholder","onFocus","onBlur","Reply","visibility","onChange","commentIndex","addReply","ShowReplyCard","getUserById","ShowReplies","repliesVisible","toggleVisibility","replies","reply","j","UserComment","editVisible","handleUpdate","handleEditVisibility","updateComments","deleteComment","handleEditSubmit","editComment","Comments","editCommentVisible","comment","elem","toString","PlaylistSetting","save","edit","handleEditClick","handleSave","changePrivacy","changeName","confirmDelete","deleteConfirmVisibleClose","Post","e","file","files","formData","FormData","append","r","privacyButton","defaultValue","accept","height","editSaveButton","Playlist","songsVisible","commentsVisible","settingsVisible","playlistInfo","playlistid","forkPopupVisible","liked","favorited","getPlaylist","liked_playlists","saved","favorite","forkPlaylist","uploaded","setForkInvisible","setForkVisible","handleLike","handleFavorite","obj","updatePrivacy","updateName","updateImg","removeSongs","addSong","Promise","resolve","reject","artist","song_uri","User","navigator","clipboard","writeText","Home","Box","hero","textAlign","gutterBottom","minHeight","backgroundImage","backgroundRepeat","backgroundSize","justifyContent","position","Home_Playlist_Button","Home_Playlists","HomeScreen","top_five","current_playlist_id","current_song_id","loadTopFive","topFivePlaylists","handleHome","getArtists","access_token","AddSong","createNew","changeVisible","handleAdd","songlength","millisToSeconds","duration_ms","album","images","url","uri","handleClose","createAndAdd","createPlaylist","handleClickOpen","openNew","closeNew","anchorEl","millis","iconButton","button","dialogButton","UserCard","sessionUserRequests","sessionUserFollowers","follow_requests","userRequestedFollow","requests","requested","request","searchedRequestedFollow","searchedFollowing","userFollowing","sendRequest","addRequest","toUser","PlaylistCard","ArtistCard","showSongs","tracks","handleClick","marginLeft","items","SongCard","handleSongPlay","artistNames","songLength","playButton","SearchListCard","onShuffleChange","uris","offset","shuffle","shufflePlaylist","needsUpdate","updated","canUpdate","SearchList","searchList","users","SearchScreen","searchQuery","searchResults","searchType","fetchData","last","searchRes","searchUsers","searchPlaylists","fetchPlaylists","fetchUsers","fetchSpotify","track","componentDidUpdate","paddingBotton","Follower","removeFollower","updateFollowers","Followers","getFollowers","FollowingUser","unFollow","updateFollowing","Following","getFollowing","followings","Request","acceptRequest","updateRequests","addFollower","Requests","getRequests","FollowingPage","showFollowers","showFollowing","showRequests","getAccountCreationDate","Update","original","new","handleChange","valueEl","UpdatePassword","handlePassChange","handleConfChange","AccountSetting","getAll","updateProfileImg","AdvancedSetting","PrivacyToggles","playlist_privacy","default_public_playlist","verify_request","verify_requests","updatePlaylist","onPrivacyChange","updateVerify","PrivacySetting","Setting","showAccount","showPrivacy","showAdvanced","onUserChange","content","toolbar","classname","wrapper","col","settingsOptionsButton","settingsContent","mixins","paddingTop","sidebarHeader","marginBottom","settingsConent","HeaderNavbar","mobileMoreAnchorEl","handleProfileMenuOpen","handleMobileMenuClose","handleMenuClose","handleMobileMenuOpen","toPlaylists","toFollowers","toSettings","toLogOut","removeItem","renderMenu","anchorOrigin","vertical","horizontal","menuId","transformOrigin","Boolean","MenuItem","renderMobileMenu","mobileMenuId","aria-controls","aria-haspopup","handleKeyPress","searchEl","grow","handleDrawerOpen","clsx","hide","noWrap","search","searchIcon","InputBase","inputRoot","inputInput","inputProps","onKeyPress","FormControl","div","selectMenu","Select","sectionDesktop","sectionMobile","marginRight","breakpoints","up","shape","fade","common","white","pointerEvents","transition","transitions","create","appBar","zIndex","drawer","easing","sharp","leavingScreen","appBarShift","enteringScreen","PlaylistNavbar","handleCallback","isPlaying","token","callback","magnifySliderOnHover","showSaveIcon","styles","activeColor","bgColor","errorColor","loaderColor","sliderColor","trackArtistColor","trackNameColor","Menu","toMyPlaylists","toSavedPlaylists","toFollowing","toRequests","toSetting","handleDrawerClose","Drawer","drawerOpen","drawerClose","listItemIcon","Divider","List","ListItem","ListItemIcon","ListItemText","listItemText","primary","bottomAppBar","flexShrink","whiteSpace","overflowX","top","bottom","App","getAccesstoken","getItem","searchSongChange","s","stored","temporaryValue","randomIndex","currentIndex","onSearchResults","results","atHome","notAtHome","render","exact","path","ResetPasswordScreen","hostname","ReactDOM","StrictMode","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e6c8e777.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\n//import {Link} from 'react-router-dom';\r\n\r\n\r\nconst useStyles = theme => ({\r\n    paper: {\r\n      marginTop: theme.spacing(8),\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n    },\r\n    avatar: {\r\n      margin: theme.spacing(1),\r\n      backgroundColor: 'blue',\r\n    },\r\n    form: {\r\n      width: '100%', // Fix IE 11 issue.\r\n      marginTop: theme.spacing(1),\r\n    },\r\n    submit: {\r\n      margin: theme.spacing(3, 0, 2),\r\n      \"&:hover\": {\r\n        backgroundColor: \"#004CB2\"\r\n      },\r\n      \"&:focus\" :{\r\n        backgroundColor: \"#004CB2\"\r\n      }\r\n    },\r\n    input: {\r\n      paddingLeft: \"10px\",\r\n      paddingRight: \"10px\"\r\n    }\r\n\r\n  });\r\n  \r\n\r\nclass SignIn extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.emailEl = React.createRef();\r\n        this.passwordEl = React.createRef();\r\n        \r\n        this.username = ''\r\n        this.onUsernameChange = this.props.onUsernameChange\r\n        this.toHome = this.props.toHome\r\n    }\r\n\r\n    state = {\r\n        error : null\r\n    }\r\n    \r\n    setErrmess = (err) => {\r\n        this.setState({errorMess : err})\r\n\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        console.log(this.props)\r\n        if (this.props.username)\r\n            this.props.toHome()\r\n    }\r\n\r\n    handleSignIn = async (event) => {\r\n        event.preventDefault();\r\n        const email = this.emailEl.current.children[1].children[0].value.toLowerCase();\r\n        const password = this.passwordEl.current.children[1].children[0].value;\r\n\r\n        if (email.trim().length === 0 || password.trim().length === 0)\r\n            return;\r\n\r\n        // Request backened \r\n        let requestBody = {\r\n            query: `\r\n              query {\r\n                login(email: \"${email}\", password: \"${password}\") {\r\n                  _id\r\n                  username\r\n                  token\r\n                  token_expiration\r\n                }\r\n              }\r\n            `\r\n          };\r\n\r\n        fetch('https://easytunes.herokuapp.com/graphql', {\r\n                                    method: 'POST',\r\n                                    body: JSON.stringify(requestBody),\r\n                                    headers: {\r\n                                    'content-type': 'application/json'\r\n                                    }\r\n                                })\r\n                                .then(res => {\r\n                                    if (res.status !== 200 && res.status !== 201) \r\n                                        throw new Error('Email and password do not match');\r\n                                    return res.json()\r\n                                })\r\n                                .then(result => {\r\n                                    console.log(result.data.login.username)\r\n                                    // Load the data in \r\n                                    this.username = result.data.login.username\r\n\r\n                                    this.onUsernameChange(this.username)\r\n                                    localStorage.setItem(\"username\", this.username);\r\n                                   // console.log(localStorage.getItem(\"username\"))\r\n                                    fetch('https://easytunes.herokuapp.com/authorization', {\r\n                                        method: 'POST',\r\n                        \r\n                                        headers: {\r\n                                            'content-type': 'application/json'\r\n                                        }\r\n                                        })\r\n                                        .then(res => {\r\n                                            if (res.status !== 200 && res.status !== 201) \r\n                                                throw new Error('Authorization Failed');\r\n                                            return res.json()\r\n                                        })\r\n                                        .then(data => {\r\n                                            console.log(data)\r\n                                            window.location.replace(data)\r\n                                        })\r\n                                        .catch(err => {\r\n                                            console.log(err);\r\n                                        });\r\n                                  //  this.toHome()\r\n                                })\r\n                                .catch(err => {\r\n                                    this.setState({error: err.message})\r\n                                    console.log(err.message);\r\n                                });\r\n    }\r\n\r\n    render() { \r\n        const {classes}  = this.props; \r\n\r\n        return (\r\n            <Container component=\"main\" maxWidth=\"xs\">\r\n            <CssBaseline />\r\n            <div className={classes.paper}>\r\n              <Avatar className={classes.avatar}>\r\n                <LockOutlinedIcon />\r\n              </Avatar>\r\n              <Typography component=\"h1\" variant=\"h5\">\r\n                Sign in\r\n              </Typography>\r\n              {this.state.error !== null ? \r\n              <Typography>\r\n              {this.state.error}\r\n            </Typography> : null\r\n              }\r\n              <form className={classes.form} noValidate>\r\n                <TextField\r\n                  InputProps={{\r\n                    className: classes.input,\r\n                  }}\r\n                  variant=\"outlined\"\r\n                  margin=\"normal\"\r\n                  required\r\n                  fullWidth\r\n                  id=\"email\"\r\n                  label=\"Email Address\"\r\n                  name=\"email\"\r\n                  autoComplete=\"email\"\r\n                  autoFocus\r\n                  ref = {this.emailEl}\r\n                />\r\n                <TextField\r\n                  InputProps={{\r\n                    className: classes.input,\r\n                  }}  \r\n                  variant=\"outlined\"\r\n                  margin=\"normal\"\r\n                  required\r\n                  fullWidth\r\n                  name=\"password\"\r\n                  label=\"Password\"\r\n                  type=\"password\"\r\n                  id=\"password\"\r\n                  autoComplete=\"current-password\"\r\n                  ref = {this.passwordEl}\r\n                />\r\n                <Button\r\n                type = 'submit'\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  className={classes.submit}\r\n                  onClick = {this.handleSignIn}\r\n                >\r\n                  Sign In\r\n                </Button>\r\n                \r\n                <Grid container>\r\n                  <Grid item xs>\r\n                    <Link href=\"/forgotpassword\" variant=\"body2\">\r\n                      Forgot password?\r\n                    </Link>\r\n                  </Grid>\r\n                </Grid>\r\n              </form>\r\n            </div>\r\n          </Container>\r\n        );\r\n    }\r\n}\r\n \r\nexport default withStyles(useStyles)(SignIn);","import React, { Component } from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport {MuiThemeProvider} from \"@material-ui/core/styles\";\r\n//import theme from '../../Theme.js';\r\n\r\n\r\nconst useStyles= theme => ({\r\n  \r\n  paper: {\r\n    marginTop: theme.spacing(3),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n    \"&:hover\": {\r\n      backgroundColor: \"#004CB2\"\r\n    },\r\n    \"&:focus\" :{\r\n      backgroundColor: \"#004CB2\"\r\n    }\r\n  },\r\n  input: {\r\n    paddingLeft: \"10px\",\r\n    paddingRight: \"10px\"\r\n  }\r\n});\r\n\r\n\r\nclass SignUp extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.emailEl = React.createRef();\r\n        this.passwordEl = React.createRef();\r\n        this.usernameEl = React.createRef();\r\n        this.confirmEl = React.createRef()\r\n        this.username = ''\r\n        this.onUsernameChange = this.props.onUsernameChange\r\n        this.toHome = this.props.toHome\r\n    }\r\n\r\n    state = {\r\n        errorMess : null\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        if (this.props.username)\r\n            this.props.toHome()\r\n    }\r\n    setErrmess = (err) => {\r\n        this.setState({errorMess : err})\r\n    }\r\n        handleSignUp = async (event) =>{\r\n            event.preventDefault();\r\n            const email = this.emailEl.current.children[1].children[0].value.toLowerCase();\r\n            const password = this.passwordEl.current.children[1].children[0].value;\r\n            const username = this.usernameEl.current.children[1].children[0].value;\r\n            const confirm = this.confirmEl.current.children[1].children[0].value;\r\n            const userUrl = \"easytunes.herokuapp.com\" + username;\r\n            console.log(email, password, username, confirm, userUrl)\r\n            if (email.trim().length === 0 || password.trim().length === 0 || username.trim().length === 0 || confirm.trim().length === 0){\r\n                console.log(\"Fill out all inputs\")\r\n                this.setErrmess(\"Fill out all inputs\")\r\n                return;\r\n            }\r\n                \r\n    \r\n            \r\n            if (password !== confirm){\r\n                this.setErrmess(\"Passwords do not match\")\r\n                return;\r\n            }\r\n            \r\n            const pattern = /.*@.*\\.com/i\r\n            console.log(pattern.test(email))\r\n            if (!pattern.test(email)){\r\n                this.setErrmess(\"Input a valid email\")\r\n                return \r\n            }\r\n                \r\n            // Request backened \r\n            let requestBody = {\r\n                query: `\r\n                mutation{\r\n                    createUser(userInput: {email: \"${email}\", password:\"${password}\", username:\"${username}\", url:\"${userUrl}\" })  {\r\n                                      email\r\n                                      password\r\n                                      username\r\n                                      url\r\n                    }\r\n                  }\r\n                `\r\n              };\r\n    \r\n            await  fetch('https://easytunes.herokuapp.com/graphql', {\r\n                                        method: 'POST',\r\n                                        body: JSON.stringify(requestBody),\r\n                                        headers: {\r\n                                        'content-type': 'application/json'\r\n                                        }\r\n                                    })\r\n                                    .then(res => {\r\n                                  \r\n                                        // if (res.status !== 200 && res.status !== 201) \r\n                                        //     throw new Error('Failed!');\r\n                                        \r\n                                        return res.json();\r\n                                    })\r\n                                    .then(result => {\r\n                                      console.log(result)\r\n                                        if (result.errors) {\r\n                                            if (/.*email.*/.test(result.errors[0].message))\r\n                                                throw new Error('Email already in use')\r\n                                            if (/.*username.*/.test(result.errors[0].message))\r\n                                                throw new Error('Username already in use')\r\n                                        }\r\n                                        else {\r\n                                          // Load the data in \r\n                                         this.state.username = result.data.createUser.username\r\n                                          console.log(result)\r\n                                          this.onUsernameChange(this.state.username)\r\n                                          localStorage.setItem(\"username\", this.state.username);\r\n                                          fetch('https://easytunes.herokuapp.com/authorization', {\r\n                                              method: 'POST',\r\n                              \r\n                                              headers: {\r\n                                                  'content-type': 'application/json'\r\n                                              }\r\n                                              })\r\n                                              .then(res => {\r\n                                                  if (res.status !== 200 && res.status !== 201) \r\n                                                      throw new Error('Playlist not found');\r\n                                                  return res.json()\r\n                                              })\r\n                                              .then(data => {\r\n                                                  console.log(data)\r\n                                                  window.location.replace(data)\r\n                                              })\r\n                                              .catch(err => {\r\n                                                  console.log(err);\r\n                                              });\r\n                                          } \r\n                                        \r\n                                   \r\n                                    })\r\n                                    .catch(err => {\r\n                                        console.log(err);\r\n                                        this.setErrmess(err.message)\r\n                                    });\r\n            \r\n        }\r\n\r\n    render() { \r\n      \r\n        const {classes}  = this.props; \r\n        console.log(this.state.errorMess)\r\n        return (\r\n            <Container component=\"main\" maxWidth=\"xs\">\r\n\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon/>\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\" >\r\n          Sign up\r\n        </Typography>\r\n        {this.state.errorMess !== null ? \r\n        <Typography> {this.state.errorMess}</Typography> : null\r\n        }\r\n        <form className={classes.form} noValidate>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                InputProps={{\r\n                    className: classes.input,\r\n                  }}\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Email Address\"\r\n                name=\"email\"\r\n                ref = {this.emailEl}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                InputProps={{\r\n                    className: classes.input,\r\n                  }}\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                id=\"userName\"\r\n                label=\"Username\"\r\n                name=\"userName\"\r\n                ref = {this.usernameEl}\r\n                autoFocus\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                InputProps={{\r\n                    className: classes.input,\r\n                  }}\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                ref = {this.passwordEl}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n            <TextField\r\n                InputProps={{\r\n                    className: classes.input,\r\n                  }}\r\n                variant=\"outlined\"\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Confirm Password\"\r\n                type=\"password\"\r\n                id=\"confirm-password\"\r\n                ref = {this.confirmEl}\r\n              />\r\n              \r\n            </Grid>\r\n          </Grid>\r\n          <Button\r\n          type = 'submit'\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n            onClick = {this.handleSignUp}\r\n          >\r\n            Sign Up\r\n          </Button>\r\n        </form>\r\n      </div>\r\n    </Container>\r\n  );\r\n    }\r\n}\r\n \r\nexport default withStyles(useStyles)(SignUp);","import React from \"react\";\r\nimport {makeStyles } from '@material-ui/styles';\r\nimport { AppBar, Icon, Toolbar } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport MusicNoteIcon from '@material-ui/icons/MusicNote';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  appbar: {\r\n    background: \"black\",\r\n  },\r\n  icon: {\r\n    fontSize: \"large\", \r\n  },\r\n  appbarWrapper: {\r\n    width: '80%',\r\n    margin: '0 auto'\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n\r\n}));\r\n\r\nfunction Navbar() {\r\n  const classes = useStyles();\r\n\r\n\r\n    \r\n  return (\r\n\r\n  <div className={classes.root}>\r\n    <AppBar className={classes.appbar} elevation={0}>\r\n      <Toolbar className={classes.appbarWrapper}>\r\n      <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\r\n            < MusicNoteIcon/>\r\n          </IconButton>\r\n      <Typography variant=\"h6\" className={classes.title}>\r\n            EasyTunes\r\n      </Typography>\r\n      <Link to=\"/register\">\r\n      <Button color=\"inherit\" onClick={() => { console.log('onClick'); }}>\r\n      Sign Up\r\n      </Button>\r\n      </Link>\r\n      <Link to=\"/login\">\r\n      <Button color=\"inherit\">Login</Button>\r\n      </Link>\r\n      </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Navbar;\r\n","/** LOGIN SCREEN\r\n * Handles signing in and signing up \r\n */\r\n\r\nimport React, { Component } from 'react';\r\n\r\n// Import css \r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport \"./LoginScreen.css\";\r\nimport SignIn from './SignIn'\r\nimport SignUp from './SignUp'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport Navbar from '../Navbar/Navbar';\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\n\r\nclass Login extends Component {\r\n    state = {\r\n        loginVisible: this.props.login,\r\n        signUpVisible: !this.props.login,\r\n   }\r\n\r\n    componentDidMount = () => {\r\n        if (this.props.username)\r\n            this.props.history.push('/home')\r\n        if (this.props.login){\r\n            document.getElementsByClassName(\"to-signin-btn\")[0].style.borderBottom = \"none\"\r\n            document.getElementsByClassName(\"to-signup-btn\")[0].style.borderBottom = \"1px solid lightgray\";\r\n            document.getElementsByClassName(\"to-signin-btn\")[0].style.borderRight = \"1px solid lightgray\"\r\n        }\r\n        else {\r\n            document.getElementsByClassName(\"to-signup-btn\")[0].style.borderBottom = \"none\"\r\n            document.getElementsByClassName(\"to-signin-btn\")[0].style.borderBottom = \"1px solid lightgray\";\r\n            document.getElementsByClassName(\"to-signin-btn\")[0].style.borderRight = \"1px solid lightgray\"\r\n        }\r\n\r\n   }\r\n   // Handle rendering sign in or sign up \r\n    changeView = (event) => {\r\n        const visible = event.target.className\r\n        \r\n        let invisible;\r\n        if (visible === \"to-signin-btn\"){\r\n            this.setState({\r\n                loginVisible : true,\r\n                signUpVisible : false\r\n            })\r\n            invisible = \"to-signup-btn\"\r\n            this.props.history.push('/login')\r\n        }\r\n        else {\r\n            this.setState({\r\n                loginVisible : false,\r\n                signUpVisible : true\r\n            })\r\n            invisible = \"to-signin-btn\"\r\n            this.props.history.push('/register')\r\n        }\r\n\r\n        document.getElementsByClassName(visible)[0].style.borderBottom = \"none\"\r\n        document.getElementsByClassName(invisible)[0].style.borderBottom = \"1px solid lightgray\";\r\n    }\r\n\r\n    element = (id) => {\r\n        return document.getElementById(id)\r\n    }\r\n\r\n    // Go to home page after logging in \r\n    toHome = () => {\r\n        const url = '/home'\r\n        const {history} = this.props;\r\n        history.push(url)\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"container\">\r\n                    <h1>EasyTunes</h1>\r\n                </div>\r\n\r\n                <div className=\"container login-container\">\r\n                    <div className=\"row justify-content-center login-btns\">  \r\n                            <button className=\"to-signin-btn\" onClick = {this.changeView} >Sign In</button>\r\n                            <button className=\"to-signup-btn\" onClick = {this.changeView}> Sign Up</button>\r\n                    </div>\r\n\r\n                    {this.state.loginVisible ? <SignIn onUsernameChange = {this.props.onUsernameChange} toHome = {this.toHome} username = {this.props.username}/> : null}\r\n                    {this.state.signUpVisible ? <SignUp onUsernameChange = {this.props.onUsernameChange} toHome = {this.toHome} username = {this.props.username}/> : null}\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default Login;\r\n\r\n","import React, { Component } from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\n  \r\n// Import css \r\nimport \"./ResetPasswordScreen.css\";\r\n//import {Link} from 'react-router-dom';\r\n\r\n\r\nconst useStyle = theme => ({\r\n    paper: {\r\n      marginTop: theme.spacing(8),\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n    },\r\n    avatar: {\r\n      margin: theme.spacing(1),\r\n      backgroundColor: 'blue',\r\n    },\r\n    form: {\r\n      width: '100%', // Fix IE 11 issue.\r\n      marginTop: theme.spacing(1),\r\n    },\r\n    submit: {\r\n      margin: theme.spacing(3, 0, 2),\r\n      \"&:hover\": {\r\n        backgroundColor: \"#004CB2\"\r\n      },\r\n      \"&:focus\" :{\r\n        backgroundColor: \"#004CB2\"\r\n      }\r\n    },\r\n    input: {\r\n      paddingLeft: \"10px\",\r\n      paddingRight: \"10px\"\r\n    }\r\n\r\n  });\r\n\r\n\r\n\r\n\r\nclass Reset extends Component {\r\n    constructor() {\r\n        super()\r\n        this.emailR = React.createRef();\r\n    } \r\n    state = { \r\n        sent : false,\r\n        errorMess : null\r\n    }\r\n    \r\n    element = (id) => {\r\n        return document.getElementById(id)\r\n    }\r\n\r\n    handleReset = () => {\r\n        const email = this.emailR.current.children[1].children[0].value.toLowerCase()\r\n        console.log(this.emailR.current.children[1].children[0].value.toLowerCase())\r\n        const password = Math.floor(Math.random() * (99999999 - 10000000) + 10000000)\r\n        console.log(password)\r\n\r\n        if (email.trim().length === 0)\r\n            return;\r\n\r\n        let requestBody = {\r\n            query: `\r\n              mutation {\r\n                resetPassword(email: \"${email}\", new_password: \"${password}\") {\r\n                  _id\r\n                }\r\n              }\r\n            `\r\n          };\r\n\r\n        fetch('https://easytunes.herokuapp.com/graphql', {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n            'content-type': 'application/json'\r\n            }})\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201) {\r\n                    throw new Error('post error')\r\n                }\r\n                if (res.err) {\r\n                    \r\n                }\r\n                this.setState({errorMess : \"Email has been sent\"})\r\n                this.setState({sent : true})\r\n                return res.json()\r\n            })\r\n            .catch(err => {\r\n                this.setState({errorMess : err.message})\r\n                console.log(err);\r\n            });\r\n    }\r\n    render() { \r\n        const {classes}  = this.props; \r\n\r\n        return (\r\n            <div>\r\n                <div className=\"container\">\r\n                    <h1>EasyTunes</h1>\r\n                </div>\r\n                <Container component=\"main\" maxWidth=\"xs\">\r\n                <CssBaseline />\r\n                <div className={classes.paper}>\r\n \r\n                    <Typography component=\"h1\" variant=\"h5\">\r\n                        Reset Your Password\r\n                    </Typography>\r\n\r\n                    <Typography component=\"h1\" variant=\"h5\">\r\n                        Please enter your email\r\n                    </Typography>\r\n                    {this.state.errorMess !== null ? <div> {this.state.errorMess}</div> : null}\r\n                    <form className={classes.form} noValidate>\r\n                        <TextField\r\n                        InputProps={{\r\n                            className: classes.input,\r\n                        }}\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        required\r\n                        fullWidth\r\n                        id=\"email\"\r\n                        label=\"Email Address\"\r\n                        name=\"email\"\r\n                        autoComplete=\"email\"\r\n                        autoFocus\r\n                        ref = {this.emailR}\r\n                        />\r\n                \r\n                        <Button\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        className={classes.submit}\r\n                        onClick = {this.handleReset}\r\n                        >\r\n                        Reset Password\r\n                        </Button>\r\n                \r\n                <Grid container>\r\n                  <Grid item xs>\r\n                   \r\n                    <Link href=\"/login\" variant=\"body2\">\r\n                      Back\r\n                    </Link>\r\n                  </Grid>\r\n                </Grid>\r\n              </form>\r\n            </div>\r\n          </Container>\r\n          </div>\r\n        );\r\n    }\r\n    // render() { \r\n    //     return ( \r\n    //         <div>\r\n\r\n    //             <div className=\"container login-container\">\r\n\r\n    //                 <div className=\"row justify-content-center forgot-banner-row\">\r\n    //                     <div className=\"col-sm-12 text-center align-self-center forgot-banner\"> Reset Your Password</div>\r\n    //                 </div>\r\n\r\n    //                 <div className=\"row justify-content-center\">\r\n    //                     <div className=\"col-sm-12 cred\">        \r\n    //                         Please enter your email address.\r\n    //                         <div className=\"error-message-reset\">\r\n    //                             {this.state.errorMess}\r\n    //                         </div>\r\n    //                         <div className=\"input-group\">\r\n    //                             <input className=\"input\" id=\"email\" type=\"text\" ref={this.emailR} required/>\r\n    //                             <label className=\"label\">Email</label>\r\n    //                         </div>    \r\n    //                     </div>\r\n    //                 </div>\r\n\r\n    //                 <div className=\"row justify-content-center next\">\r\n    //                     <div className=\"col-sm-12 text-center align-self-center login-col\">\r\n    //                         <button onClick = {this.handleReset}> Reset Password</button>\r\n    //                     </div>\r\n    //                     <Link to=\"/login\" className=\"login\">\r\n    //                             Cancel\r\n    //                     </Link>\r\n    //                 </div>\r\n    //             </div>\r\n    //         </div>\r\n    //     );\r\n    // }\r\n}\r\n \r\n\r\nexport default withStyles(useStyle)(Reset);","/** PLAYLIST BUTTON\r\n * Component used within playlist and saved playlists\r\n * Handles one playlist in the playlists page \r\n */\r\n\r\nimport React, { Component } from 'react'\r\nimport {AiFillHeart, AiFillEyeInvisible, AiFillEye} from 'react-icons/ai'\r\nimport {withStyles} from '@material-ui/core/styles'\r\nimport {RiPlayListLine} from 'react-icons/ri'\r\nimport {AiOutlineDelete, AiOutlineCheckCircle, AiOutlineCloseCircle} from 'react-icons/ai'\r\n// FaRegPauseCircle\r\nimport {FaRegPlayCircle, FaRegPauseCircle} from 'react-icons/fa'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport Button from '@material-ui/core/Button'\r\nimport ThumbUpAltIcon from '@material-ui/icons/ThumbUpAlt'\r\nconst useStyle = theme => ({\r\n    deleteBtn :{\r\n        '&:focus':{\r\n            outline:\"none\"\r\n        }\r\n    }\r\n})\r\nclass PlaylistButton extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.setPlaylists = this.props.setPlaylists;\r\n    }\r\n    \r\n    state = { \r\n        playlist: this.props.playlist,\r\n        username: this.props.username,\r\n        deleteConfirmVisible: false,\r\n        history: this.props.history\r\n    }\r\n\r\n    // Set delete confirmation box to visible\r\n    setVisible = () => {\r\n        this.setState({deleteConfirmVisible : true})\r\n    }\r\n\r\n    // Set delete confirmation box to invisible \r\n    setInvisible = () => {\r\n        this.setState({deleteConfirmVisible: false})\r\n    }\r\n\r\n    // Go to the playlist page \r\n    toPlaylist = () => {\r\n        this.state.history.push('/' + encodeURIComponent(this.state.playlist.username) + '/mixtape='+ this.state.playlist._id)\r\n    }\r\n\r\n    // Delete the playlist \r\n    deletePlaylist = () => {\r\n        this.setInvisible()\r\n        // Delete the playlist \r\n        let requestBody = {\r\n            query: `\r\n                mutation {\r\n                    deletePlaylist (id : \"${this.state.playlist._id}\") {\r\n                        _id \r\n                    }\r\n                }\r\n            `\r\n        }\r\n\r\n        // Delete the playlist \r\n        fetch('https://easytunes.herokuapp.com/graphql', {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201) \r\n                    throw new Error('Failed');\r\n                return res.json()\r\n            })\r\n            .then(result => {\r\n                 // Update the playlists on the UI \r\n                requestBody = {\r\n                    query: `\r\n                        query {\r\n                            getUserPlaylists(username: \"${this.state.username}\"){\r\n                                _id\r\n                                name\r\n                                username\r\n                                likes \r\n                                public\r\n                                total_duration\r\n                                playlist_img\r\n                                songs {\r\n                                    song_id\r\n                                    song_uri\r\n                                    name\r\n                                    artists\r\n                                    song_img\r\n                                }\r\n                            }\r\n                        }\r\n                    `\r\n                }\r\n\r\n                fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n                    method: 'POST',\r\n                    body: JSON.stringify(requestBody),\r\n                    headers: {\r\n                    'content-type': 'application/json'\r\n                    }})\r\n                .then(res => {\r\n                    if (res.status !== 200 && res.status !== 201) \r\n                        throw new Error('Failed');\r\n                    return res.json()\r\n                })\r\n                .then(result => {\r\n                    this.setPlaylists(result.data.getUserPlaylists)\r\n                    //error here\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                });\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n    }\r\n    \r\n    render() { \r\n        const playlist = this.state.playlist \r\n        const {classes} = this.props\r\n        return (\r\n            <div className=\"playlist-row\">\r\n                <div className=\"col\">\r\n                    <img alt = \"playlist_img\" src={playlist.playlist_img} class=\"song_picture\"></img>\r\n                </div>\r\n\r\n                <div className=\"col text-left\">\r\n                    {playlist.name}\r\n                    {this.state.username === playlist.username ? <span>  {playlist.public ? <AiFillEye/> : < AiFillEyeInvisible/>} </span> : null}\r\n                </div>\r\n\r\n                <div className=\"col text-left\">\r\n                    {playlist.songs.length} {playlist.songs.length === 1 ? \"Song\" : \"Songs\"} - {playlist.total_duration < 3600 ? \"0 hr \" + (playlist.total_duration < 600 ? \"0\" + Math.floor(playlist.total_duration/60) + \" min\": Math.floor(playlist.total_duration/60) + \" min\") :\r\n                (Math.floor(playlist.total_duration/3600) + \" hr \" + (playlist.total_duration%3600 < 600 ? \"0\" + Math.floor(playlist.total_duration/60) + \" min\": Math.floor(playlist.total_duration/60) + \" min\"))}\r\n                </div>\r\n\r\n                <div className=\"col text-left\">\r\n                    {this.state.username === playlist.username ? <><ThumbUpAltIcon id={playlist._id} size = {24}/> {playlist.likes} </>:\r\n                    <>{playlist.username}</>}\r\n                </div>\r\n\r\n                <button className=\"playlist-btn\" id={playlist.playlist_id} onClick = {this.toPlaylist}/>\r\n                \r\n                <button className=\"play-btn\">\r\n                    { this.props.playlist.songs.length > 0 ?\r\n                    <>\r\n                        { this.props.play && this.props.current_playlist._id === this.state.playlist._id? \r\n                            <FaRegPauseCircle onClick = {this.handlePlay} size = {30}/>\r\n                            : <FaRegPlayCircle onClick = {this.handlePlay} size = {30}/>\r\n                        }\r\n                    </>\r\n                        : <FaRegPlayCircle disabled={true} style={{color : \"gray\"}}size = {30}/>\r\n                    }\r\n                    \r\n                    \r\n                </button>\r\n\r\n                {\r\n                    this.props.sessionUser === playlist.username ? \r\n                        <IconButton className = {classes.deleteBtn} onClick={this.setVisible} >\r\n                            <DeleteIcon fontSize=\"large\"/>\r\n                        </IconButton>\r\n                     : null\r\n\r\n                }\r\n\r\n                {this.state.deleteConfirmVisible ?\r\n\r\n                    <>\r\n                        <Dialog\r\n                            open={this.state.deleteConfirmVisible}\r\n                            keepMounted\r\n                            onClose={this.setInvisible}\r\n                            aria-labelledby=\"alert-dialog-slide-title\"\r\n                            aria-describedby=\"alert-dialog-slide-description\"\r\n                            fullWidth={true}\r\n                            maxWidth = {'xs'}\r\n                        >\r\n                    <DialogTitle id=\"alert-dialog-slide-title\">{\"Delete Playlist: \" + this.state.playlist.name + \"?\"}</DialogTitle>\r\n                    <DialogActions>\r\n                    <Button  onClick={this.deletePlaylist} color=\"primary\">\r\n                        Delete\r\n                    </Button>\r\n                    <Button onClick={this.setInvisible} color=\"primary\">\r\n                        Close\r\n                    </Button>\r\n                </DialogActions>\r\n                </Dialog>\r\n\r\n                    </>\r\n \r\n                : null }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    handlePlay = async () => {\r\n        // If pausing current playlist \r\n        if (this.props.current_playlist !== null && this.props.current_playlist._id === this.state.playlist._id)\r\n            this.props.onPlayChange(!this.props.play) \r\n        // If changing playlist \r\n        else {\r\n            console.log(\"Change playlist\")\r\n            this.props.onPlaylistChange(this.state.playlist, this.state.playlist.songs[0])\r\n        }\r\n            \r\n    }\r\n}\r\n \r\nexport default withStyles(useStyle)(PlaylistButton);","/** NEW PLAYLIST BUTTON  \r\n * Component within Playlists \r\n * Handles creating a new playlist \r\n*/\r\n\r\nimport React, { Component } from 'react'\r\nimport {AiOutlineCheckCircle, AiOutlineCloseCircle} from 'react-icons/ai'\r\nimport {IoMdAddCircleOutline}from 'react-icons/io'\r\nimport PlaylistAddIcon from '@material-ui/icons/PlaylistAdd'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport {withStyles} from '@material-ui/core/styles'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport Button from '@material-ui/core/Button'\r\nconst useStyle = theme => ({\r\n    dialog :{\r\n        minWidth: \"300px\"\r\n    },\r\n    addButton : {\r\n        '&:focus': {\r\n            outline: 'none',\r\n          },\r\n          float: 'right'\r\n    }\r\n})\r\nclass NewPlaylistButton extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.setPlaylists = this.props.setPlaylists\r\n        this.nameEl = React.createRef()\r\n    }\r\n\r\n    state = { \r\n        popupVisible: false,\r\n        username : this.props.username,\r\n        user_id : this.props.user_id,\r\n        error: \"\"\r\n     }\r\n\r\n    // Set new playlist box to visible \r\n    setVisible = () => {\r\n        this.setState({popupVisible : true})\r\n    }\r\n\r\n    // Set new playlist box to invisible \r\n    setInvisible = () => {\r\n        this.setState({popupVisible : false})\r\n    }\r\n\r\n    // Create a new playlist \r\n    createNewPlaylist = () =>{\r\n        let name =this.nameEl.current.children[1].children[0].value.trim()\r\n        let requestBody = {\r\n            query: `\r\n                mutation {\r\n                    createPlaylist (username : \"${this.state.username}\", name : \"${name}\", user_id: \"${this.state.user_id}\") {\r\n                        _id \r\n                    }\r\n                }\r\n            `\r\n        }\r\n\r\n        // Create the playlist \r\n        fetch('https://easytunes.herokuapp.com/graphql', {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201) \r\n                    throw new Error('Failed');\r\n                return res.json()\r\n            })\r\n            .then(result => {\r\n                 // Update the playlists on the UI \r\n\r\n                if (result.errors)\r\n                    this.setState({error: result.errors[0].message})\r\n                else {\r\n                    requestBody = {\r\n                        query: `\r\n                            query {\r\n                                getUserPlaylists(username: \"${this.state.username}\"){\r\n                                    _id\r\n                                    name\r\n                                    username\r\n                                    likes\r\n                                    total_duration \r\n                                    playlist_img\r\n                                    public\r\n                                    songs {\r\n                                        song_id\r\n                                        name\r\n                                    }\r\n                                }\r\n                            }\r\n                        `\r\n                    }\r\n\r\n                    fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n                        method: 'POST',\r\n                        body: JSON.stringify(requestBody),\r\n                        headers: {\r\n                        'content-type': 'application/json'\r\n                        }})\r\n                    .then(res => {\r\n                        if (res.status !== 200 && res.status !== 201) \r\n                            throw new Error('Failed');\r\n                        return res.json()\r\n                    })\r\n                    .then(result => {\r\n                        console.log(result)\r\n                        this.nameEl = \"\"\r\n                        this.setInvisible()\r\n                        this.setPlaylists(result.data.getUserPlaylists)\r\n                    })\r\n                    .catch(err => {\r\n                        console.log(err);\r\n                    });\r\n            }\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n\r\n       \r\n    }\r\n\r\n    \r\n    render() { \r\n        const {classes} = this.props\r\n        return (  \r\n            <>\r\n                <IconButton className = {classes.addButton} onClick = {this.setVisible}> \r\n                    <PlaylistAddIcon  fontSize=\"large\"/>\r\n                </IconButton>\r\n\r\n                <Dialog\r\n                    open={this.state.popupVisible}\r\n                    keepMounted\r\n                    onClose={this.setInvisible}\r\n                    aria-labelledby=\"alert-dialog-slide-title\"\r\n                    aria-describedby=\"alert-dialog-slide-description\"\r\n                    className = {classes.dialog}\r\n                    fullWidth={true}\r\n                    maxWidth = {'sm'}\r\n                >\r\n                    <DialogTitle id=\"alert-dialog-slide-title\">{\"Create New Playlist\"}</DialogTitle>\r\n                    <DialogContent>\r\n                    {this.state.error ?\r\n                        <DialogContentText> {this.state.error} </DialogContentText> : null\r\n                    }\r\n                    <TextField\r\n                        autoFocus\r\n                        margin=\"dense\"\r\n                        id=\"name\"\r\n                        label=\"Playlist Name\"\r\n                        type=\"text\"\r\n                        fullWidth\r\n                        ref = {this.nameEl}\r\n                    />\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                    <Button  onClick={this.createNewPlaylist} color=\"primary\">\r\n                        Create \r\n                    </Button>\r\n                    <Button onClick={this.setInvisible} color=\"primary\">\r\n                        Close\r\n                    </Button>\r\n                </DialogActions>\r\n                </Dialog>\r\n\r\n                </>\r\n        );\r\n    }\r\n}\r\n \r\nexport default withStyles(useStyle)(NewPlaylistButton);","/** PLAYLISTS\r\n * Component within profile\r\n * Handles displaying the user's playlists \r\n */\r\n\r\nimport React, { Component } from 'react'\r\n\r\nimport PlaylistButton from './PlaylistButton'\r\nimport NewPlaylistButton from './NewPlaylistButton'\r\n\r\nclass Playlists extends Component {\r\n \r\n    state = { \r\n        playlists: this.props.playlists,\r\n        sessionUser: this.props.sessionUser,\r\n        user: this.props.user,\r\n        history: this.props.history\r\n    }\r\n\r\n    // Updates playlists \r\n    setPlaylists = (playlists) => {\r\n        this.setState({playlists : playlists})\r\n    }\r\n\r\n\r\n    render() { \r\n\r\n        let playlists = this.state.playlists.map(function(playlist) {\r\n            \r\n            return (\r\n                <PlaylistButton \r\n                    playlist = {playlist} \r\n                    key = {playlist._id} \r\n                    username = {this.state.user.username} \r\n                    setPlaylists = {this.setPlaylists} \r\n                    sessionUser = {this.state.sessionUser}  \r\n                    editing={this.props.editing} \r\n                    history = {this.props.history} \r\n                    play = {this.props.play} \r\n                    onPlayChange = {this.props.onPlayChange}\r\n                    onPlaylistChange = {this.props.onPlaylistChange}\r\n                    current_playlist = {this.props.current_playlist}\r\n                />\r\n            )\r\n        }, this)\r\n        return (\r\n            <>\r\n            {playlists}\r\n            { this.state.sessionUser === this.state.user.username ?\r\n                <div className=\"add-new\">\r\n                    <NewPlaylistButton text = {\"Playlist Name\"} username = {this.state.user.username} user_id = {this.state.user._id} setPlaylists = {this.setPlaylists}/>\r\n                </div>  : null\r\n            }\r\n            </>\r\n        );\r\n    }\r\n}\r\n \r\nexport default Playlists;","/** SAVED PLAYLISTS BUTTON\r\n * Component within Saved Playlists \r\n * Handles one saved playlist in the playlists page \r\n */\r\n\r\nimport React, { Component } from 'react'\r\nimport {AiFillHeart, AiFillEyeInvisible, AiFillEye} from 'react-icons/ai'\r\n\r\nimport {RiPlayListLine} from 'react-icons/ri'\r\nimport {AiOutlineDelete, AiOutlineCheckCircle, AiOutlineCloseCircle} from 'react-icons/ai'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport Button from '@material-ui/core/Button'\r\n// FaRegPauseCircle\r\nimport {FaRegPlayCircle,FaRegPauseCircle} from 'react-icons/fa'\r\nclass SavedPlaylistButton extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.setPlaylists = this.props.setPlaylists;\r\n\r\n    }\r\n    \r\n    state = { \r\n        playlist: this.props.playlist,\r\n        username: this.props.username,\r\n        deleteConfirmVisible: false,\r\n        history: this.props.history,\r\n        loading: true\r\n    }\r\n\r\n    componentDidMount = () =>{\r\n        this.setState({loading: true})\r\n        \r\n        let requestBody = {\r\n            query: `\r\n                query{\r\n                    getPlaylistByID(id : \"${this.props.playlist.playlist_id}\") {\r\n                        _id\r\n                        name\r\n                        username\r\n                        playlist_img\r\n                        likes \r\n                        songs {\r\n                            song_id\r\n                            name\r\n                            song_uri\r\n                            artists\r\n                            song_img\r\n                        }\r\n                            username\r\n                            likes\r\n                            total_duration\r\n                            playlist_img \r\n                            songs {\r\n                                song_id\r\n                                name\r\n                                song_uri\r\n                                artists\r\n                                song_img\r\n                            }\r\n                    }\r\n                }\r\n            `\r\n        }\r\n\r\n        fetch ('https://easytunes.herokuapp.com/graphql', {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }})\r\n            .then(res => {\r\n                // console.log(res)\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n\r\n               this.setState({\r\n                   playlist: data.data.getPlaylistByID,\r\n                   loading:false\r\n               })\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    setVisible = () => {\r\n        this.setState({deleteConfirmVisible : true})\r\n    }\r\n\r\n    setInvisible = () => {\r\n        this.setState({deleteConfirmVisible: false})\r\n    }\r\n\r\n    toPlaylist = () => {\r\n        this.state.history.push('/' + encodeURIComponent(this.state.playlist.username) + '/mixtape='+ this.state.playlist._id)\r\n    }\r\n\r\n    deletePlaylist = () => {\r\n        this.setInvisible()\r\n        // Delete the playlist \r\n        // console.log(this.state.playlist)\r\n        let requestBody = {\r\n            query: `\r\n                mutation {\r\n                    deleteFavorite (username: \"${this.props.sessionUser}\", playlist_id : \"${this.state.playlist._id}\") {\r\n                        _id \r\n                    }\r\n                }\r\n            `\r\n        }\r\n\r\n        // Delete the playlist \r\n        fetch('https://easytunes.herokuapp.com/graphql', {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201) \r\n                    throw new Error('Failed');\r\n                return res.json()\r\n            })\r\n            .then(result => {\r\n                 // Update the playlists on the UI \r\n                //  console.log(this.props.sessionUser)\r\n                requestBody = {\r\n                    query: `\r\n                        query {\r\n                            getUserByUsername(username: \"${this.props.sessionUser}\"){\r\n                                user {\r\n                                    saved_playlists {\r\n                                    playlist_id\r\n                                    name\r\n                                }\r\n                            }\r\n                            }\r\n                        }\r\n                    `\r\n                }\r\n\r\n                fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n                    method: 'POST',\r\n                    body: JSON.stringify(requestBody),\r\n                    headers: {\r\n                    'content-type': 'application/json'\r\n                    }})\r\n                .then(res => {\r\n                    if (res.status !== 200 && res.status !== 201) \r\n                        throw new Error('Failed');\r\n                    return res.json()\r\n                })\r\n                .then(result => {\r\n                    this.setPlaylists(result.data.getUserByUsername.user.saved_playlists)\r\n                    //error here\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                });\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n    }\r\n    render() { \r\n        if (this.state.loading)\r\n            return(<> </>)\r\n        const playlist = this.state.playlist \r\n        // console.log(playlist)\r\n        if (playlist == null) {\r\n            return(<> </>)\r\n        }\r\n        console.log(playlist)\r\n        console.log(this.props)\r\n        return (\r\n            <div className=\"playlist-row\">\r\n                <div className=\"col\">\r\n                    <img alt = \"playlist_img\" src={playlist.playlist_img} class=\"song_picture\"></img>\r\n                </div>\r\n\r\n                <div className=\"col text-left\">\r\n                    {playlist.name}\r\n                    {this.state.username === playlist.username ? <span>  {playlist.public ? <AiFillEye/> : < AiFillEyeInvisible/>} </span> : null}\r\n                </div>\r\n\r\n                <div className=\"col text-left\">\r\n                <div className=\"col text-left\">\r\n                    {playlist.songs.length} {playlist.songs.length === 1 ? \"Song\" : \"Songs\"} - {playlist.total_duration < 3600 ? \"0 hr \" + (playlist.total_duration < 600 ? \"0\" + Math.floor(playlist.total_duration/60) + \" min\": Math.floor(playlist.total_duration/60) + \" min\") :\r\n                (Math.floor(playlist.total_duration/3600) + \" hr \" + (playlist.total_duration%3600 < 600 ? \"0\" + Math.floor(playlist.total_duration/60) + \" min\": Math.floor(playlist.total_duration/60) + \" min\"))}\r\n                </div>\r\n                </div>\r\n\r\n                <div className=\"col text-left\">\r\n                    {this.state.username === playlist.username ? <><AiFillHeart id={playlist._id} size = {24}/> {playlist.likes} </>:\r\n                    <>{playlist.username}</>}\r\n                </div>\r\n\r\n                <button className=\"playlist-btn\" id={playlist.playlist_id} onClick = {this.toPlaylist}/>\r\n                \r\n                <button className=\"play-btn\">\r\n                { playlist.songs.length > 0 ?\r\n                        <>\r\n                        { this.props.play && this.props.current_playlist._id === playlist._id? \r\n                            <FaRegPauseCircle onClick = {this.handlePlay} size = {30}/>\r\n                            : <FaRegPlayCircle onClick = {this.handlePlay} size = {30}/>\r\n                        }\r\n                    </>\r\n                        : null\r\n                    }\r\n\r\n                   \r\n                </button>\r\n\r\n                {\r\n                    this.props.sessionUser === this.state.username ? \r\n                        <IconButton onClick={this.setVisible} >\r\n                            <DeleteIcon fontSize=\"large\"/>\r\n                        </IconButton>\r\n                     : null\r\n\r\n                }\r\n\r\n                {this.state.deleteConfirmVisible ?\r\n                    <Dialog\r\n                    open={this.state.deleteConfirmVisible}\r\n                    keepMounted\r\n                    onClose={this.setInvisible}\r\n                    aria-labelledby=\"alert-dialog-slide-title\"\r\n                    aria-describedby=\"alert-dialog-slide-description\"\r\n                    fullWidth={true}\r\n                    maxWidth = {'xs'}\r\n                    >\r\n                    <DialogTitle id=\"alert-dialog-slide-title\">{\"Delete Saved Mixtape: \" + this.state.playlist.name + \"?\"}</DialogTitle>\r\n                    <DialogActions>\r\n                    <Button  onClick={this.deletePlaylist} color=\"primary\">\r\n                        Delete\r\n                    </Button>\r\n                    <Button onClick={this.setInvisible} color=\"primary\">\r\n                        Close\r\n                    </Button>\r\n                </DialogActions>\r\n                </Dialog>\r\n\r\n                : null }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    handlePlay = async () => {\r\n        // If pausing current playlist \r\n        if (this.props.current_playlist !== null && this.props.current_playlist._id === this.state.playlist._id)\r\n            this.props.onPlayChange(!this.props.play) \r\n        // If changing playlist \r\n        else {\r\n            console.log(\"Change playlist\")\r\n            this.props.onPlaylistChange(this.state.playlist)\r\n        }\r\n            \r\n    }\r\n}\r\n \r\nexport default SavedPlaylistButton;","/** SAVED PLAYLISTS \r\n * Component within profile\r\n * Handles displaying the user's saved playlists \r\n */\r\n\r\nimport React, { Component } from 'react'\r\nimport SavedPlaylistButton from './SavedPlaylistButton'\r\n\r\nclass SavedPlaylists extends Component {\r\n    state = { \r\n        playlists: this.props.playlists,\r\n        sessionUser: this.props.sessionUser,\r\n        user: this.props.user,\r\n        history: this.props.history\r\n    }\r\n    setPlaylists = (playlists) => {\r\n        this.setState({playlists : playlists})\r\n    }\r\n\r\n    render() { \r\n      \r\n        let playlists = this.state.playlists.map(function(playlist) {\r\n            \r\n            return (\r\n                <SavedPlaylistButton key = {playlist.playlist_id} \r\n                    playlist = {playlist} \r\n                    username = {this.state.user.username} \r\n                    setPlaylists = {this.setPlaylists}\r\n                    sessionUser = {this.state.sessionUser}  \r\n                    editing={this.props.editing} \r\n                    history = {this.props.history}\r\n                    play = {this.props.play} \r\n                    onPlayChange = {this.props.onPlayChange}\r\n                    onPlaylistChange = {this.props.onPlaylistChange}\r\n                    current_playlist = {this.props.current_playlist}\r\n                />\r\n            )\r\n        }, this)\r\n        return (\r\n            <>\r\n            {playlists}\r\n\r\n            </>\r\n        );\r\n    }\r\n}\r\n \r\nexport default SavedPlaylists;","/** PROFILE\r\n * Handles the displaying the user's playlists, saved playlists, and uploaded songs \r\n */\r\n\r\nimport React, { Component} from 'react'\r\n\r\nimport {RiUserFollowLine, RiUserAddLine} from 'react-icons/ri'\r\nimport Playlists from './Playlists/Playlists'\r\n// import UploadedSongs from './UploadedSongs/UploadedSongs'\r\nimport SavedPlaylists from './Playlists/SavedPlaylists'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Container from '@material-ui/core/Container'\r\nimport Button from '@material-ui/core/Button'\r\nimport {withStyles} from '@material-ui/core/styles'\r\nimport './Profile.css'\r\n\r\n\r\nconst useStyle = theme => ({\r\n    buttonFocus : {\r\n        borderRadius: \"0\",\r\n        width: \"100%\",\r\n        strokeLinecap: \"round\",\r\n        border: \"none\",\r\n        '&:focus' :{\r\n            outline: \"none\"\r\n        },\r\n        borderBottom : \"2px solid #004CB2\",\r\n        fontWeight: \"bold\"\r\n    },\r\n    buttonNotFocus :{\r\n        width: \"100%\",\r\n        border: \"none\",\r\n        '&:focus' :{\r\n            outline: \"none\"\r\n        },\r\n    },\r\n    container: {\r\n        padding : theme.spacing(0,0,0,0)\r\n    }\r\n})\r\nclass Profile extends Component {\r\n    state = { \r\n        showSavedPlaylists: false,\r\n        showMyPlaylists: true,\r\n        showUploadedSongs: false,\r\n        profileUsername: this.props.match.params.username,\r\n        profileUserInfo: null,\r\n        profileAccountCreationDate: null,\r\n        profileFollowers: null, \r\n        profilePlaylists: null,\r\n        profileSavedPlaylists: null,\r\n        loading: true,\r\n        isHovered: false \r\n    }\r\n\r\n    // Get the user information and their playlists \r\n    componentDidMount = () => {\r\n\r\n        if (!this.props.username)\r\n            this.props.history.push('/login')\r\n\r\n        this.setState({loading : true})\r\n        const username = this.state.profileUsername\r\n\r\n        let requestBody = {\r\n            query: `\r\n                query {\r\n                    getUserByUsername(username: \"${username}\"){\r\n                        user {\r\n                            _id\r\n                            username\r\n                            profile_img\r\n                            joined\r\n                            followers {\r\n                                user_id\r\n                                username\r\n                            }\r\n\r\n                            saved_playlists {\r\n                                playlist_id \r\n                                name\r\n                            }\r\n                        }\r\n                        playlists {\r\n                            _id\r\n                            name\r\n                            username\r\n                            public\r\n                            likes\r\n                            total_duration\r\n                            playlist_img \r\n                            songs {\r\n                                song_id\r\n                                song_uri\r\n                                name\r\n                                artists\r\n                                song_img\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                }\r\n            `\r\n        }\r\n        fetch ('https://easytunes.herokuapp.com/graphql', {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }})\r\n            .then(res => {\r\n             \r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error (\"Failed\")\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n                \r\n                data = data.data.getUserByUsername\r\n                const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n                const date = new Date(parseInt(data.user.joined))\r\n                const showMyPlaylists = this.props.history.location.pathname.split('/').length === 2 ? true : false\r\n                \r\n                this.setState({\r\n                    profileUserInfo: data.user,\r\n                    profileFollowers: data.user.followers, \r\n                    profilePlaylists: data.playlists,\r\n                    profileSavedPlaylists: data.user.saved_playlists,\r\n                    profileAccountCreationDate: months[date.getMonth()] + \" \" + date.getDate() + \", \" + date.getFullYear(),\r\n                    loading: false,\r\n                    showMyPlaylists: showMyPlaylists,\r\n                    showSavedPlaylists: !showMyPlaylists\r\n                })        \r\n            \r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n        \r\n    }\r\n    toggleHover = () => {\r\n        this.setState({isHovered: !this.state.isHovered})\r\n    }\r\n\r\n    handleUnfollow = () => {\r\n        console.log(this.state.following)\r\n        let requestBody = {\r\n            query: `\r\n                mutation{\r\n                    unFollow(username: \"${this.props.username}\", following_id: \"${this.state.profileUserInfo._id}\"){\r\n                   \r\n                            _id\r\n                            following {\r\n                                user_id\r\n                                username\r\n                            }\r\n                        \r\n                    }\r\n                }\r\n            `\r\n        }\r\n        \r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n                console.log(data)\r\n                let profileFollowers = this.state.profileFollowers\r\n                profileFollowers.forEach((follower,i) => {\r\n                    if (follower.username === this.props.username){\r\n                        profileFollowers.splice(i, 1)\r\n                    }\r\n                })\r\n                this.setState({profileFollowers: profileFollowers})\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n    render() { \r\n        const {classes} = this.props\r\n\r\n        if (this.state.loading)\r\n            return (<> </>);\r\n            \r\n        return ( \r\n            \r\n            <div className=\"container-fluid playlist-container\">\r\n\r\n                <div className=\"container-fluid playlist-data-container\">\r\n                    {/* Information Bar about the user */}\r\n                    <div className=\"information-row\">\r\n                        {/* <div className=\"col\">\r\n\r\n                        </div> */}\r\n                        <div className=\"col text-center\">\r\n                            <div className=\"\">\r\n                                <img alt=\"playlist_img\" src={this.state.profileUserInfo.profile_img} class=\"user_picture\"></img>\r\n                            </div>\r\n                            <h2>{this.state.profileUsername}                            \r\n                             <div className =\"follow\">  \r\n                             {this.state.profileUsername !== this.props.username ?\r\n                                !this.isFollowing() ? \r\n                                <button className =\"following-btn align-self-center\"> \r\n                                    Follow\r\n                                </button> \r\n                               :\r\n                                <button className =\"following-btn align-self-center\"  onMouseEnter={this.toggleHover} onMouseLeave={this.toggleHover} onClick = {this.handleUnfollow}> \r\n                                {this.state.isHovered ? \"Unfollow\" : \"Following\"}\r\n\r\n                                </button> \r\n                            : null}\r\n                             </div>\r\n                             \r\n\r\n                            </h2>\r\n                             <h5> User Since: {this.state.profileAccountCreationDate}</h5>\r\n                        </div>\r\n                        {/* <div className=\"col align-self-center\"> */}\r\n\r\n                        </div>\r\n                    {/* </div> */}\r\n                    \r\n                    {/* Navigation bar between \"My Playlist\" and \"Saved Playlists\" */}\r\n                    <div className=\"navigation-row\">\r\n        \r\n                        <Container className = {classes.container}> \r\n                            <Grid container>\r\n                                <Grid xs item align=\"center\">\r\n                                    <Button id = \"playlists-btn\" onClick = {this.changeView} className = {this.state.showMyPlaylists ? classes.buttonFocus : classes.buttonNotFocus}> \r\n                                        { this.state.profileUsername === this.props.username ? \r\n                                            \"My Mixtapes\" :\r\n                                            \"Mixtapes\"\r\n                                        }\r\n                                    </Button>\r\n                                </Grid>\r\n                                <Grid xs item align=\"center\">\r\n                                    <Button id = \"saved-playlists-btn\" onClick = {this.changeView} className = {this.state.showSavedPlaylists ? classes.buttonFocus : classes.buttonNotFocus}> Saved Mixtapes </Button>\r\n                                </Grid>\r\n   \r\n                            </Grid>\r\n                        </Container>\r\n\r\n                    </div>\r\n\r\n                    {/* Renders \"My Playlist\" and \"Saved Playlists\" */}\r\n                    {this.state.showSavedPlaylists ? <SavedPlaylists \r\n                        playlists = {this.state.profileSavedPlaylists} \r\n                        user = {this.state.profileUserInfo} \r\n                        sessionUser = {this.props.username} \r\n                        history = {this.props.history}\r\n                        play = {this.props.play} \r\n                        onPlayChange = {this.props.onPlayChange}\r\n                        onPlaylistChange = {this.props.onPlaylistChange}\r\n                        current_playlist = {this.props.current_playlist} /> : null}\r\n                    {this.state.showMyPlaylists ?  \r\n                        <Playlists playlists = {this.state.profilePlaylists} \r\n                                user = {this.state.profileUserInfo} \r\n                                sessionUser = {this.props.username} \r\n                                history = {this.props.history} \r\n                                play = {this.props.play} \r\n                                onPlayChange = {this.props.onPlayChange}\r\n                                onPlaylistChange = {this.props.onPlaylistChange}\r\n                                current_playlist = {this.props.current_playlist}\r\n                        /> : null}\r\n                    {/* {this.state.showUploadedSongs ? <UploadedSongs user = {this.state.profileUserInfo} sessionUser = {this.props.username}/> : null} */}\r\n                    <div className = \"row blank-space\"> </div>\r\n                </div>\r\n                \r\n                {/* <PlaylistNavbar/> */}\r\n            </div>\r\n                    \r\n                \r\n      \r\n         );\r\n    }\r\n\r\n    // Check if the logged in user is following \r\n    isFollowing = () =>{\r\n        let followers = this.state.profileFollowers\r\n        let following = false \r\n        followers.forEach(follower => {\r\n            if (follower.username === this.props.username)\r\n                following = true \r\n        })\r\n        \r\n        return following\r\n    }\r\n\r\n    // Handle displaying playlists, saved playlists, or uploaded songs \r\n    changeView = (event) => {\r\n\r\n        if (event.currentTarget.id === 'playlists-btn'){\r\n            this.setState({showMyPlaylists : true, showSavedPlaylists:false})\r\n            this.props.history.push('/' + this.state.profileUsername)\r\n        }\r\n        else {\r\n            this.setState({showMyPlaylists : false, showSavedPlaylists:true})\r\n            this.props.history.push('/' + this.state.profileUsername + '/saved-mixtapes')\r\n        }\r\n    }\r\n}\r\n \r\nexport default withStyles(useStyle)(Profile);","/** SONG\r\n * Component within Song List \r\n * Handles displaying one song \r\n */\r\n\r\nimport React, { Component } from 'react'\r\nimport {AiOutlineDelete, AiOutlineArrowUp, AiOutlineArrowDown} from 'react-icons/ai'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport Button from '@material-ui/core/Button'\r\n// FaRegPauseCircle\r\nimport {FaRegPlayCircle, FaRegPauseCircle} from 'react-icons/fa'\r\nclass Song extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.removeSong = this.props.removeSong\r\n        this.handleMoveUp = this.props.handleMoveUp\r\n        this.handleMoveDown = this.props.handleMoveDown\r\n    }\r\n    state = { \r\n        song: this.props.song, \r\n        editing: this.props.editing,\r\n        deleteConfirmVisible : false,\r\n        playlistId: this.props.playlist_id\r\n    }\r\n\r\n    // Sets delete confirmation box to visible \r\n    setVisible = () => {\r\n        this.setState({deleteConfirmVisible : true})\r\n    }\r\n\r\n    // Sets delete confirmation box to invisible \r\n    setInvisible = () => {\r\n        this.setState({deleteConfirmVisible: false})\r\n    }\r\n    \r\n    // Remove song from the playlist (Edit Mode)\r\n    // NOTE: Does not delete the song from the database \r\n    handleDelete = () => {\r\n        this.removeSong(this.state.song, this.props.index)\r\n    }\r\n\r\n    moveUp = () => {\r\n        console.log(\"move up\")\r\n        this.handleMoveUp(this.state.song, this.props.index)\r\n    }\r\n     \r\n    moveDown = () => {\r\n        console.log(\"move down\")\r\n        this.handleMoveDown(this.state.song, this.props.index)\r\n    }\r\n\r\n    handlePlay = async () => {\r\n        // No songs playing \r\n        if (!this.props.current_playlist || !this.props.current_song || this.props.current_playlist._id !== this.props.playlist_id){\r\n            console.log(\"Play Playlist\")\r\n            let requestBody = {\r\n                query : `\r\n                    query {\r\n                        getPlaylistByID(id : \"${this.state.playlistId}\") {\r\n                            likes \r\n                            name \r\n                            public \r\n                            songs {\r\n                                name \r\n                                song_id \r\n                                song_uri\r\n                                song_img\r\n                            }\r\n                            total_duration \r\n                            username \r\n                            _id \r\n                        }\r\n                    }\r\n                `\r\n            }\r\n\r\n            fetch('https://easytunes.herokuapp.com/graphql',{\r\n                method: 'POST',\r\n                body: JSON.stringify(requestBody),\r\n                headers: {\r\n                    'content-type': 'application/json'\r\n                }})\r\n                .then (res => {\r\n                    if (res.status !== 200 && res.status !== 201)\r\n                        throw new Error(\"Playlist not found\")\r\n                    return res.json()\r\n                })\r\n                .then(data => {\r\n                    console.log(data.data.getPlaylistByID)\r\n                    this.props.onPlaylistChange(data.data.getPlaylistByID, this.state.song)\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                })\r\n        }\r\n        // Same playlist and pause the song \r\n        else if (this.props.current_playlist._id === this.props.playlist_id && this.props.current_song.song_id === this.state.song.song_id)\r\n            this.props.onPlayChange(!this.props.play)\r\n        // Different Song \r\n        else {\r\n            console.log(\"SONG ON SONG CHANGE\")\r\n            this.props.onSongChange(this.state.song.song_id)\r\n        }\r\n            \r\n           // console.log(\"Change songs\")\r\n    }\r\n\r\n    render() { \r\n        console.log(this.props.current_song,  this.props.current_playlist )\r\n\r\n        return (  \r\n            <div className=\"row song-row\">\r\n            <div className=\"col song-col text-left\">\r\n                {this.props.index+1}\r\n            </div>\r\n            <div className=\"col song-col text-left\">\r\n            <button className=\"play-btn\" onClick = {this.handlePlayClick}>\r\n                {this.props.play && this.props.current_playlist._id === this.state.playlistId && this.props.current_song.song_id === this.state.song.song_id ?\r\n                    <FaRegPauseCircle onClick = {this.handlePlay} size= {24}/>\r\n                 : \r\n                    <FaRegPlayCircle onClick = {this.handlePlay} size= {24}/>\r\n                }\r\n                \r\n            </button>\r\n            </div>\r\n            <div className=\"col song-col\">\r\n                <img alt = \"\" src={this.state.song.song_img} class=\"song_picture\"></img>\r\n            </div>\r\n            <div className=\"col song-col text-left\">\r\n                {this.state.song.name}\r\n            </div>\r\n\r\n            <div className=\"col song-col text-left\">\r\n                {this.state.song.artists}\r\n            </div>\r\n            <div className=\"col song-col text-center\">\r\n                {this.state.song.duration < 60 ? \"0:\" + (this.state.song.duration < 10 ? \"0\" + this.state.song.duration: this.state.song.duration) :\r\n                (Math.floor(this.state.song.duration/60) + \":\" + (this.state.song.duration%60 < 10 ? \"0\" + this.state.song.duration%60 : this.state.song.duration%60))}\r\n            </div>\r\n            <div className=\"col song-col text-center\">\r\n                {this.state.editing ? \r\n                    <div>\r\n                        {(this.props.index > 0) ? <AiOutlineArrowUp size={34} className=\"upbtn\" onClick={this.moveUp}/> : <AiOutlineArrowUp size={34} disabled color=\"#cccccc\"/>}\r\n                        {(this.props.index === this.props.playlist_length - 1) ? <AiOutlineArrowDown size={34} disabled color=\"#cccccc\"/> : <AiOutlineArrowDown size={34} class=\"downbtn\" onClick={this.moveDown}/>}\r\n                    </div> \r\n                :null}\r\n            </div>\r\n            <div className=\"col song-col text-center\">\r\n                {this.state.editing ? <button className = 'delete-btn' onClick={this.handleDelete}> <AiOutlineDelete size = {24}/></button>: null}\r\n            </div>\r\n\r\n       \r\n      </div>  \r\n        );\r\n    }\r\n}\r\n \r\nexport default Song;","/** SONG LIST\r\n * Component within Playlist\r\n * Handles displaying the list of songs in a playlist \r\n */\r\n\r\nimport React, { Component } from 'react'\r\n\r\nimport './Songlist.css'\r\nimport Song from './Song'\r\nclass Songlist extends Component {\r\n    state = {\r\n        songs : this.props.songs,\r\n        playlist_id: this.props.playlist_id,\r\n        editing: this.props.editing,\r\n    }\r\n\r\n    // Handles when the user clicks play \r\n    handlePlayClick = (event) =>{\r\n        console.log(event)\r\n    }\r\n\r\n    // Remove song from the playlist \r\n    removeSong = (song, index) => {\r\n        console.log(song, index)\r\n        let songs = this.state.songs\r\n        songs.splice(index, 1)\r\n        this.setState({songs : songs})\r\n    }\r\n    \r\n    handleMoveUp = (song, index) => {\r\n        console.log(song, index)\r\n        let songs = this.state.songs\r\n\r\n        let temp = songs[index]\r\n        songs[index] = songs[index-1]\r\n        songs[index-1] = temp\r\n\r\n        this.setState({songs : songs})\r\n    }\r\n    \r\n    handleMoveDown = (song, index) => {\r\n        console.log(song, index)\r\n        let songs = this.state.songs\r\n\r\n        let temp = songs[index]\r\n        songs[index] = songs[index+1]\r\n        songs[index+1] = temp\r\n\r\n\r\n        this.setState({songs : songs})\r\n    }\r\n\r\n    render() {\r\n        let songs = this.state.songs.map(function(song, i){\r\n            return (\r\n                <Song  key = {song.name + song.song_id} \r\n                    song={song} \r\n                    index={i}\r\n                    editing={this.state.editing} \r\n                    playlist_id = {this.state.playlist_id} \r\n                    removeSong={this.removeSong} \r\n                    handleMoveUp={this.handleMoveUp} \r\n                    handleMoveDown={this.handleMoveDown} \r\n                    playlist_length={this.props.songs.length}\r\n                    play = {this.props.play}\r\n                    onPlayChange = {this.props.onPlayChange}\r\n                    onPlaylistChange = {this.props.onPlaylistChange}\r\n                    onSongChange = {this.props.onSongChange}\r\n                    current_playlist = {this.props.current_playlist}\r\n                    current_song = {this.props.current_song}\r\n                />\r\n            );\r\n        }, this)\r\n\r\n        return (\r\n            <>\r\n                {songs}\r\n            </>\r\n        )\r\n    }\r\n\r\n}\r\n \r\nexport default Songlist;","import React, { Component } from 'react'\r\n\r\nclass Comment extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.commentEl = React.createRef()\r\n    }\r\n    state = {  \r\n        buttonsVisible: false,\r\n    }\r\n\r\n\r\n    setVisible = () => {\r\n        console.log(\"BUTTONS VISIBLE\")\r\n        this.setState({buttonsVisible : true})\r\n    }\r\n\r\n    handleBlur = () => {\r\n        if (this.state.text === \"\")\r\n            this.setState({buttonsVisible: false})\r\n    }\r\n\r\n    handleCancel = () => {\r\n        document.getElementById(\"comment-input\").value = \"\"\r\n        this.setState({text : \"\", buttonsVisible: false})\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        console.log(this.commentEl.current.value)\r\n        let requestBody = {\r\n            query: `\r\n            mutation {\r\n                addComment(playlist_id: \"${this.props.playlist_id}\", username : \"${this.props.username}\", comment: \"${this.commentEl.current.value}\"){\r\n                    comments {\r\n                        _id\r\n                        user_id\r\n                        message \r\n                        date\r\n                        replies {\r\n                            user_id\r\n                            message\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        `\r\n        }\r\n\r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n            'content-type': 'application/json'\r\n            }})\r\n        .then(res => {\r\n            if (res.status !== 200 && res.status !== 201) \r\n                throw new Error('Failed');\r\n            return res.json()\r\n        })\r\n        .then (data => {\r\n          //  this.props.setState({comments : data.data.addComment.comments})\r\n          console.log(data)\r\n          this.props.stateChange(data.data.addComment.comments)\r\n          this.commentEl.current.value = \"\"\r\n          this.setState({buttonsVisible: false}, function () {console.log(this.state)})\r\n            \r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n    }\r\n    render() { \r\n        return (  \r\n            <>\r\n            <textarea id = \"comment-input\" className=\"comment-text\" type=\"text\" ref = {this.commentEl} placeholder=\"Add a Comment\" onFocus = {this.setVisible} onBlur = {this.handleBlur}/>\r\n            {\r\n                this.state.buttonsVisible === true ? \r\n                <>\r\n                     <button className = \"comment-button\" onClick ={this.handleSubmit}> COMMENT </button>\r\n                     <button className = \"comment-button\" onClick = {this.handleCancel} style = {{color: \"black\", backgroundColor: \"white\", border:\"none\"}}> CANCEL </button>\r\n                     </>\r\n                : null \r\n            }\r\n            </>\r\n        );\r\n    }\r\n}\r\n \r\nexport default Comment;","import React, { Component } from 'react'\r\n\r\nclass Reply extends Component {\r\n    state = { \r\n        visibility: false,\r\n        text : \"\"\r\n    }\r\n\r\n    onChange = (event) => {\r\n        this.setState({text: event.target.value})\r\n    }\r\n\r\n    setVisible = () => {\r\n        this.setState({visibility: true})\r\n    }\r\n\r\n    setInvisible = () => {\r\n        this.setState({visibility: false})\r\n    }\r\n\r\n    handleCancel = () => {\r\n        this.setInvisible()\r\n        document.getElementById(\"comment-input\").value = \"\"\r\n        this.setState({text : \"\"})\r\n    }\r\n\r\n    handleSubmit = () => {\r\n        let requestBody = {\r\n            query: `\r\n            mutation {\r\n                addReply(user_id:\"${this.props.user_id}\", message: \"${this.state.text}\", playlist_id: \"${this.props.playlist_id}\", comment_index: ${this.props.commentIndex}){\r\n\r\n                    comments {\r\n                        _id\r\n                        user_id\r\n                        message \r\n                        date \r\n                        replies {\r\n                            _id\r\n                            user_id\r\n                            message\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        `\r\n        }\r\n\r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n            'content-type': 'application/json'\r\n            }})\r\n        .then(res => {\r\n            if (res.status !== 200 && res.status !== 201) \r\n                throw new Error('Failed');\r\n            return res.json()\r\n        })\r\n        .then(data => {\r\n            this.setInvisible()\r\n            this.props.stateChange(data.data.addReply.comments)\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n    }\r\n    render() { \r\n        return (  \r\n            <>\r\n        \r\n        {\r\n            this.state.visibility ? \r\n            <>\r\n                <textarea id = \"comment-input\" className=\"comment-text\" type=\"text\" placeholder=\"Add a Comment\" onChange = {this.onChange}/>\r\n                 <button className = \"comment-button\" onClick ={this.handleSubmit}> REPLY </button>\r\n                 <button className = \"comment-button\" onClick = {this.handleCancel} style = {{color: \"black\", backgroundColor: \"white\", border:\"none\"}}> CANCEL </button>\r\n                 </>\r\n            : \r\n            <button className = \"reply-button\" onClick = {this.setVisible}> REPLY </button>  \r\n        }\r\n        \r\n        </>\r\n        );\r\n    }\r\n}\r\n \r\nexport default Reply;\r\n","import React, { Component } from 'react'\r\n\r\nclass ShowReplyCard extends Component {\r\n    state = {  \r\n        loading: true,\r\n        username : null\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let requestBody = {\r\n            query: `\r\n                query {\r\n                    getUserById (user_id : \"${this.props.user_id}\"){\r\n                        username\r\n                    }\r\n                }\r\n            `\r\n        }\r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n            'content-type': 'application/json'\r\n            }})\r\n        .then(res => {\r\n            if (res.status !== 200 && res.status !== 201) \r\n                throw new Error('Playlist not found');\r\n            return res.json()\r\n        })\r\n        .then(data => {\r\n            console.log(data.data.getUserById)\r\n            this.setState({username : data.data.getUserById.username, loading: false})\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n    }\r\n    render() { \r\n        if (this.state.loading)\r\n            return (<> </>)\r\n\r\n        return (  \r\n            <>\r\n            <div className=\"username-row\">{this.state.username}</div>\r\n                    <div className=\"comment-row\">{this.props.message}</div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n \r\nexport default ShowReplyCard;","import React, { Component } from 'react'\r\nimport { BsFillCaretUpFill, BsFillCaretDownFill} from 'react-icons/bs'\r\nimport ShowReplyCard from './ShowReplyCard'\r\n\r\nclass ShowReplies extends Component {\r\n    state = {  \r\n        repliesVisible: false \r\n    }\r\n\r\n    toggleVisibility = () => {\r\n        this.setState({repliesVisible : !this.state.repliesVisible})\r\n    }\r\n\r\n    \r\n    render() { \r\n        let res = this.props.replies.map(function(reply, j){\r\n            return (\r\n                <li key = {reply.user_id + j}>\r\n                    <ShowReplyCard user_id = {reply.user_id} message = {reply.message} />\r\n                </li>\r\n            )\r\n        }, this)\r\n\r\n        return (  \r\n            <div>\r\n            \r\n            {\r\n                !this.state.repliesVisible ? \r\n                <>\r\n                <button className = \"view-replies-btn\" onClick={this.toggleVisibility}> \r\n                        <BsFillCaretDownFill/> \r\n                        Show Replies \r\n                </button>\r\n                {/* {document.getElementById(id).style.display = \"none\"} */}\r\n                </>\r\n                :\r\n                <>\r\n                <button className = \"view-replies-btn\" onClick={this.toggleVisibility}> \r\n                        <BsFillCaretUpFill/> \r\n                        Hide Replies \r\n                </button>\r\n                 \r\n                    <div className=\"container replies-container\"  >\r\n                        <ul>\r\n                            {res}\r\n                        </ul>\r\n                    </div> \r\n                    \r\n              \r\n                </>\r\n            }\r\n        </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default ShowReplies;","import React, { Component } from 'react'\r\nimport Reply from './Reply.js'\r\nimport ShowReplies from './ShowReplies'\r\n\r\nclass UserComment extends Component {\r\n    state = {  \r\n        editVisible: false,\r\n        text : this.props.message,\r\n        username : null,\r\n        loading: true\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let requestBody = {\r\n            query: `\r\n                query {\r\n                    getUserById (user_id : \"${this.props.user_id}\"){\r\n                        username\r\n                    }\r\n                }\r\n            `\r\n        }\r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n            'content-type': 'application/json'\r\n            }})\r\n        .then(res => {\r\n            if (res.status !== 200 && res.status !== 201) \r\n                throw new Error('Playlist not found');\r\n            return res.json()\r\n        })\r\n        .then(data => {\r\n            console.log(data.data.getUserById)\r\n            this.setState({username : data.data.getUserById.username, loading: false})\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n\r\n    }\r\n    handleUpdate = (event) => {\r\n        this.setState({text : event.target.value, loading:false})\r\n    }\r\n\r\n    handleEditVisibility = () => {\r\n        console.log(\"HERE\")\r\n        this.setState({editVisible : !this.state.editVisible})\r\n    }\r\n\r\n    handleDelete = () => {\r\n        this.props.comments.splice(this.props.index, 1)\r\n        let requestBody = {\r\n            query : `\r\n                mutation {\r\n                    deleteComment(playlist_id: \"${this.props.playlist_id}\", user_id: \"${this.props.user_id}\", index: ${this.props.index}) {\r\n                        comments {\r\n                            _id\r\n                            user_id\r\n                            message\r\n                            replies {\r\n                                message\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                }\r\n                `\r\n        }\r\n\r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n            'content-type': 'application/json'\r\n            }})\r\n        .then(res => {\r\n            if (res.status !== 200 && res.status !== 201) \r\n                throw new Error('Playlist not found');\r\n            return res.json()\r\n        })\r\n        .then(data => {\r\n            this.props.updateComments(data.data.deleteComment.comments)\r\n            this.setState({editVisible: false})\r\n            //this.setState({comments:data.data.deleteComment.comments})\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n\r\n    }\r\n\r\n    handleEditSubmit = () => {\r\n        console.log(this.state.text)\r\n        let requestBody = {\r\n            query: `\r\n            mutation {\r\n                editComment(user_id: \"${this.props.user_id}\", message: \"${this.state.text}\", playlist_id: \"${this.props.playlist_id}\", comment_index : ${this.props.index}){\r\n                    comments {\r\n                        _id\r\n                        user_id\r\n                        message \r\n                        date\r\n                        replies {\r\n                            user_id\r\n                            message\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        `\r\n        }\r\n\r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n            'content-type': 'application/json'\r\n            }})\r\n        .then(res => {\r\n            if (res.status !== 200 && res.status !== 201) \r\n                throw new Error(res);\r\n            return res.json()\r\n        })\r\n        .then(data => {\r\n            console.log(data)\r\n            this.handleEditVisibility()\r\n            this.props.updateComments(data.data.editComment.comments)\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n\r\n    }\r\n    render() { \r\n        if (this.state.loading)\r\n            return (<> </>)\r\n        return (  \r\n            <>\r\n            {/* Username */}\r\n            <div className=\"row username-row\">\r\n                {/* <div className=\"\">\r\n                    <img alt = \"playlist_img\" src={this.props.profile_img} class=\"user_picture\"></img>\r\n                </div> */}\r\n                {this.state.username}\r\n                {this.state.username === this.props.sessionUser ?\r\n                    <button onClick ={this.handleEditVisibility} className = \"delete-button\"> Edit </button>\r\n                    : null\r\n                }\r\n            </div>\r\n\r\n            {/* Comment */}\r\n            <div className=\"row comment-row\">\r\n                {!this.state.editVisible ? <>{this.props.message} </>\r\n                    : \r\n                    <>\r\n                        <textarea id = \"comment-input\" className=\"comment-text\" type=\"text\" placeholder = {this.props.message} onChange = {this.handleUpdate}/>\r\n                        <button className = \"comment-button\" onClick = {this.handleEditSubmit}> EDIT </button>\r\n                        <button className = \"comment-button\" onClick = {this.handleEditVisibility} style = {{color: \"black\", backgroundColor: \"white\", border:\"none\"}}> CANCEL </button>\r\n                        <button className = \"comment-button\" onClick = {this.handleDelete}> DELETE </button>\r\n                    </>\r\n                }\r\n                \r\n            </div>\r\n        \r\n            {/* Reply Button */}\r\n            <div className=\"row replies-row\">\r\n                <Reply commentIndex = {this.props.index} user_id = {this.props.user_id}  playlist_id = {this.props.playlist_id} stateChange = {this.props.stateChange}/>\r\n\r\n            </div>\r\n            <div className=\"row replies-row\">\r\n\r\n                {this.props.replies.length > 0 ? \r\n                <ShowReplies replies = {this.props.replies}/> : null\r\n                }\r\n            </div>\r\n        </>\r\n        );\r\n    }\r\n}\r\n \r\nexport default UserComment;","/** COMMENTS\r\n * Component within Playlist\r\n * Handles displaying comments \r\n */\r\n\r\nimport React, { Component } from 'react'\r\nimport Comment from './Comment.js'\r\nimport UserComment from './UserComment.js'\r\nimport './Comments.css'\r\n\r\nclass Comments extends Component {\r\n    state = {\r\n        comments : this.props.comments,\r\n        editCommentVisible : false,\r\n    }  \r\n\r\n    stateChange = (comment) => {\r\n\r\n        this.setState({comments : comment}, function () {\r\n            console.log(this.state.comments)\r\n        })\r\n    }\r\n\r\n    render() {\r\n    \r\n        let comments = this.state.comments.map(function(elem, i){\r\n            // One comment, i is index \r\n\r\n            return (\r\n                    <div key = {elem.user_id + \" \" + i.toString()}  className=\"container result-container\">\r\n                        <UserComment user_id = {elem.user_id} \r\n                            message = {elem.message} \r\n                            index = {i} \r\n                            replies = {elem.replies} \r\n                            sessionUser = {this.props.username} \r\n                            playlist_id = {this.props.playlist_id} \r\n                            stateChange = {this.stateChange}\r\n                            updateComments = {this.updateComments}\r\n                            comments = {this.state.comments}\r\n                        />\r\n                    </div>\r\n            )\r\n        }, this)\r\n        return (\r\n            <>\r\n                <div className=\"container comments-container\">\r\n                    <div className=\"row\">\r\n                    <Comment playlist_id = {this.props.playlist_id} username = {this.props.username} stateChange = {this.stateChange}/>\r\n                    </div>\r\n                    \r\n                    {comments}\r\n                </div>\r\n\r\n            </>\r\n        );\r\n    }\r\n\r\n    updateComments = (comments) => {\r\n        this.setState({comments:comments})\r\n    } \r\n}\r\n \r\nexport default Comments;","/** PLAYLIST SETTING\r\n * Component within Playlist \r\n * Used to handle editing the playlist \r\n */\r\n\r\nimport React, { Component } from 'react'\r\nimport './PlaylistSetting.css'\r\nimport Button from '@material-ui/core/Button'\r\nimport {withStyles} from '@material-ui/core/styles'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\n// For Rendering the Settings section of a playlist\r\n\r\nconst useStyle = theme => ({\r\n    privacyButton :{\r\n        background: \"#696969\",\r\n        '&:focus': {\r\n            outline: \"none\"\r\n        },\r\n\r\n        backgroundColor: '#FFF',\r\n        color: '#FFF',\r\n        \"&:hover\": {\r\n            backgroundColor: \"#696969\"\r\n          }\r\n    },\r\n    editSaveButton :{\r\n        '&:focus': {\r\n            outline: \"none\"\r\n        },\r\n\r\n        \"&:hover\": {\r\n            backgroundColor: \"#696969\"\r\n          }\r\n    },\r\n})\r\nclass PlaylistSetting extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.onChange=  this.props.onChange\r\n    }\r\n    state = { \r\n        playlist : this.props.playlist,\r\n        save : false,\r\n        edit: this.props.editing,\r\n        public:this.props.playlist.public,\r\n        playlist_img: this.props.playlist.playlist_img,\r\n        deleteConfirmVisible: false\r\n    }\r\n\r\n    // Changes the edit status \r\n    handleEditClick = () => {\r\n        this.setState({edit: !this.state.edit}, () =>{\r\n            this.onChange(\"edit-status\" , this.state.edit)\r\n        })\r\n\r\n        // this.changeEdit()\r\n        \r\n    }\r\n\r\n    // Save Changes \r\n    handleSave = () => {\r\n        this.setState({edit: !this.state.edit}, () =>{\r\n            this.onChange(\"edit-status\" , this.state.edit)\r\n            this.onChange(\"save\", null)\r\n        })\r\n    }\r\n\r\n    // Cancel changes \r\n    handleCancel = () => {\r\n        this.setState({edit: !this.state.edit}, () =>{\r\n            this.onChange(\"edit-status\" , this.state.edit)\r\n            this.onChange(\"revert\", null)\r\n        })\r\n        \r\n    }\r\n    // Change privacy setting of the playlist (Edit mode)\r\n    // NOTE: Does not update privacy setting in the database \r\n    changePrivacy = () => {\r\n        let playlist = this.state.playlist\r\n        playlist.public = !this.state.public \r\n        this.setState({public: !this.state.public})\r\n    }\r\n\r\n    changeName = (event) => {\r\n        let playlist = this.state.playlist\r\n        playlist.name = event.target.value \r\n        this.setState({playlist: playlist})\r\n    }\r\n    confirmDelete = () => {\r\n        this.setState({deleteConfirmVisible: true})\r\n    }\r\n    deleteConfirmVisibleClose = () => {\r\n        this.setState({deleteConfirmVisible: false})\r\n    }\r\n    handleDelete = () => {\r\n        // this.setInvisible()\r\n        // Delete the playlist \r\n        let requestBody = {\r\n            query: `\r\n                mutation {\r\n                    deletePlaylist (id : \"${this.props.playlist_id}\") {\r\n                        _id \r\n                    }\r\n                }\r\n            `\r\n        }\r\n\r\n        // Delete the playlist \r\n        fetch('https://easytunes.herokuapp.com/graphql', {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201) \r\n                    throw new Error('Failed');\r\n                return res.json()\r\n            })\r\n            .then(result => {\r\n               this.props.history.push('/' + this.props.username)\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n    }\r\n\r\n    Post = (e) => {\r\n        e.preventDefault();\r\n        const file = document.getElementById(\"photo-input\").files;\r\n        const formData = new FormData();\r\n\r\n        formData.append(\"img\", file[0]);\r\n\r\n        fetch(\"https://easytunes.herokuapp.com/\", {\r\n            method: \"POST\",\r\n            body: formData\r\n            }).then(r => {\r\n            console.log(r);\r\n        });\r\n        let playlist = this.state.playlist\r\n        playlist.playlist_img = `https://easytunes.herokuapp.com/image_file/${file[0].name}`\r\n        this.setState({playlist : playlist})\r\n        console.log(file[0]);\r\n    }\r\n\r\n    render(){\r\n        const {classes} = this.props\r\n  \r\n        return (\r\n            <>\r\n                <div className=\"settings-row\">\r\n                    {this.state.edit ? \r\n                    <Button onClick={this.changePrivacy} className = {classes.privacyButton}> {this.state.public ? \"Public\" : \"Private\"} </Button>\r\n               \r\n                    : \r\n                    null\r\n                    }\r\n                    \r\n                    \r\n                </div>\r\n                <div className=\"settings-row\">\r\n                    Mixtape Name \r\n                    <input type=\"text\" disabled = {!this.state.edit} defaultValue={this.state.playlist.name} required onChange={this.changeName}/>\r\n                </div>\r\n                {this.state.edit ?\r\n                <div className='photo_input'>\r\n                    Upload Mixtape Photo\r\n                    <div className=\"\">\r\n                        <div className=\"custom-file\">\r\n                            <input\r\n                                type=\"file\"\r\n                                id=\"photo-input\"\r\n                                accept=\"image/*\"\r\n                            />\r\n                        </div>    \r\n                        </div>\r\n                            <button type=\"button\" className=\"btn btn-primary\" onClick={this.Post}>\r\n                                Upload\r\n                            </button>\r\n                            <img\r\n                                id=\"img\"\r\n                                style={{\r\n                                    display: \"block\",\r\n                                    height: \"200px\",\r\n                                    width: \"200px\",\r\n                                    \"margin-top\": \"5px\",\r\n                                }}\r\n                                src={this.state.playlist.playlist_img}\r\n                            >\r\n                            </img>\r\n                        </div>\r\n                : null\r\n                }\r\n\r\n                <div className=\"settings-row\">\r\n                    {this.state.edit? \r\n                        <>\r\n                        <button className =\"save-btn\" onClick={this.handleSave}> Save </button>\r\n                        <button className =\"cancel-btn\" onClick={this.handleCancel}> Cancel </button>\r\n                        </>\r\n                        :\r\n                        <button className =\"save-btn\" onClick = {this.handleEditClick}>Edit </button>\r\n                    }\r\n                    <button className=\"delete-btn\" onClick = {this.confirmDelete}>Delete</button>\r\n                </div>\r\n\r\n                {this.state.deleteConfirmVisible ? \r\n                    <Dialog\r\n                    open={this.state.deleteConfirmVisible}\r\n                    keepMounted\r\n                    onClose={this.deleteConfirmVisibleClose}\r\n                    aria-labelledby=\"alert-dialog-slide-title\"\r\n                    aria-describedby=\"alert-dialog-slide-description\"\r\n                    fullWidth={true}\r\n                    maxWidth = {'sm'}\r\n                >\r\n                    <DialogTitle id=\"alert-dialog-slide-title\">{\"Delete Mixtape: \" + this.state.playlist.name + \"?\"}</DialogTitle>\r\n\r\n                    <DialogActions>\r\n                    <Button  onClick={this.handleDelete} color=\"primary\">\r\n                        Delete\r\n                    </Button>\r\n                    <Button onClick={this.deleteConfirmVisibleClose} color=\"primary\">\r\n                        Close\r\n                    </Button>\r\n                </DialogActions>\r\n                </Dialog>\r\n                : null\r\n\r\n                }\r\n            </>\r\n        );\r\n    }\r\n}\r\n \r\nexport default withStyles(useStyle)(PlaylistSetting);","/** PLAYLIST\r\n * Handles the page for a playlist \r\n */\r\n\r\nimport React, { Component} from 'react'\r\nimport { AiFillHeart, AiFillEyeInvisible, AiFillEye} from 'react-icons/ai'\r\nimport { BiGitRepoForked } from 'react-icons/bi'\r\nimport Songlist from './Songlist/Songlist'\r\nimport Comments from './Comments/Comments'\r\nimport PlaylistSetting from './PlaylistSetting/PlaylistSetting'\r\nimport {AiOutlineCheckCircle, AiOutlineCloseCircle} from 'react-icons/ai'\r\nimport ThumbUpAltIcon from '@material-ui/icons/ThumbUpAlt'\r\nimport ThumbUpAltOutlinedIcon from '@material-ui/icons/ThumbUpAltOutlined'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport Button from '@material-ui/core/Button'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Container from '@material-ui/core/Container'\r\nimport {withStyles} from '@material-ui/core/styles'\r\nimport './Playlist.css'\r\nimport {FaRegPauseCircle, FaRegPlayCircle} from 'react-icons/fa'\r\nimport { FaShare } from 'react-icons/fa'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport BookmarkIcon from '@material-ui/icons/Bookmark'\r\nimport BookmarkBorderIcon from '@material-ui/icons/BookmarkBorder'\r\n\r\nconst useStyle = theme => ({\r\n    buttonFocus : {\r\n        borderRadius: \"0\",\r\n        width: \"100%\",\r\n        strokeLinecap: \"round\",\r\n        border: \"none\",\r\n        '&:focus' :{\r\n            outline: \"none\"\r\n        },\r\n        borderBottom : \"2px solid #004CB2\",\r\n        fontWeight: \"bold\"\r\n    },\r\n    buttonNotFocus :{\r\n        width: \"100%\",\r\n        border: \"none\",\r\n        '&:focus' :{\r\n            outline: \"none\"\r\n        },\r\n    },\r\n    container: {\r\n        padding : theme.spacing(0,0,0,0)\r\n    }\r\n})\r\nclass Playlist extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.nameEl = React.createRef()\r\n    }\r\n    state = {\r\n        songsVisible : true,\r\n        commentsVisible : false,\r\n        settingsVisible : false,\r\n        playlistInfo : null,\r\n        playlistId : this.props.match.params.playlistid,\r\n        username : this.props.match.params.username,\r\n        loading: true,\r\n        editing: false,\r\n        forkPopupVisible: false,\r\n        error : \"\",\r\n        liked: false,\r\n        favorited: null\r\n    }\r\n\r\n    // Get the playlist \r\n    getPlaylist = () => {\r\n        this.setState({loading : true})\r\n        console.log(this.state.playlistId)\r\n        let requestBody = {\r\n            query : `\r\n                query {\r\n                    getPlaylistByID (id : \"${this.state.playlistId}\"){\r\n                        name \r\n                        username \r\n                        date_created\r\n                        total_duration \r\n                        playlist_img\r\n                        likes \r\n                        public \r\n                        comments {\r\n                            _id\r\n                            user_id\r\n                            date\r\n                            message\r\n                            replies {\r\n                                _id\r\n                                user_id\r\n                                date\r\n                                message\r\n                            }\r\n                        }\r\n                        songs {\r\n                            song_id \r\n                            song_uri\r\n                            name \r\n                            artists\r\n                            duration\r\n                            song_img\r\n                        }\r\n                    }\r\n                }\r\n            `\r\n        }\r\n        fetch('https://easytunes.herokuapp.com/graphql', {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201) \r\n                    throw new Error('Playlist not found');\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n                const playlist = data.data.getPlaylistByID\r\n                console.log(data)\r\n                let requestBody = {\r\n                    query: `\r\n                        query {\r\n                            getUserByUsername (username : \"${this.props.username}\") {\r\n                                user {\r\n                                    liked_playlists{ \r\n                                        playlist_id\r\n                                        name\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    `\r\n                }\r\n                \r\n                fetch('https://easytunes.herokuapp.com/graphql', {\r\n                            method: 'POST',\r\n                            body: JSON.stringify(requestBody),\r\n                            headers: {\r\n                                'content-type': 'application/json'\r\n                            }\r\n                            })\r\n                            .then(res => {\r\n                                if (res.status !== 200 && res.status !== 201) \r\n                                    throw new Error('Failed');\r\n                                return res.json()\r\n                            })\r\n                            .then(data => {\r\n                                data = data.data.getUserByUsername.user\r\n                                console.log(data.liked_playlists)\r\n                                let liked = false \r\n                                data.liked_playlists.forEach(playlist => {\r\n                                    if (playlist.playlist_id === this.state.playlistId)\r\n                                        liked = true \r\n                                    \r\n                                })\r\n                                let requestBody = {\r\n                                    query: `\r\n                                       query {\r\n                                           getUserByUsername(username: \"${this.props.username}\"){\r\n                                               user {\r\n                                                   saved_playlists {\r\n                                                       playlist_id\r\n                                                   }\r\n                                               }\r\n                                           }\r\n                                       }\r\n                                    `\r\n                                }\r\n                       \r\n                                fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n                                   method: 'POST',\r\n                                   body: JSON.stringify(requestBody),\r\n                                   headers: {\r\n                                   'content-type': 'application/json'\r\n                                   }})\r\n                               .then(res => {\r\n                                   if (res.status !== 200 && res.status !== 201) \r\n                                       throw new Error('Failed');\r\n                                   return res.json()\r\n                               })\r\n                               .then(result => {\r\n                                   const saved = result.data.getUserByUsername.user.saved_playlists\r\n                                   console.log(\"HERE\")\r\n                                   let favorite = false \r\n                                   saved.forEach(playlist => {\r\n                                       if (playlist.playlist_id === this.state.playlistId)\r\n                                          favorite = true \r\n                                   })\r\n                                   console.log(\"HERE\")\r\n                                   this.setState({\r\n                                    playlistInfo: playlist,\r\n                                    loading: false,\r\n                                    liked: liked,\r\n                                    favorited: favorite\r\n                                    })\r\n                               })\r\n                               .catch(err => {\r\n                                   console.log(err);\r\n                               });\r\n                               \r\n                            })\r\n                            .catch(err => {\r\n                                console.log(err);\r\n                            });\r\n\r\n                \r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        if (!this.props.username)\r\n            this.props.history.push('/login')\r\n        this.getPlaylist()\r\n    }\r\n\r\n    forkPlaylist = () => {\r\n        console.log(this.state.username)\r\n        let requestBody = {\r\n            query: `\r\n                query {\r\n                    getUserByUsername (username : \"${this.state.username}\") {\r\n                        user {\r\n                            _id\r\n                        }\r\n                    }\r\n                }\r\n            `\r\n        }\r\n        //find user id\r\n        fetch('https://easytunes.herokuapp.com/graphql', {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201) \r\n                    throw new Error('Failed');\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n                data = data.data.getUserByUsername.user._id\r\n                let songs = []\r\n                this.state.playlistInfo.songs.forEach(song => {\r\n                    songs.push(JSON.stringify({\r\n                        song_id: song.song_id,\r\n                        name: song.name,\r\n                        uploaded: song.uploaded,\r\n                        artists: song.artists, \r\n                        duration: song.duration,\r\n                        song_img: song.song_img\r\n                    }))\r\n                })\r\n                let name =this.nameEl.current.children[1].children[0].value.trim()\r\n                requestBody = {\r\n                    query: `\r\n                        mutation {\r\n                            forkPlaylist (username : \"${this.props.username}\", playlist_id : \"${this.state.playlistId}\", name: \"${name}\") {\r\n                                _id \r\n                            }\r\n                        }\r\n                    `\r\n                }\r\n                console.log(\"requesting\")\r\n                // Create the playlist \r\n                fetch('https://easytunes.herokuapp.com/graphql', {\r\n                    method: 'POST',\r\n                    body: JSON.stringify(requestBody),\r\n                    headers: {\r\n                        'content-type': 'application/json'\r\n                    }\r\n                    })\r\n                    .then(res => {\r\n                        if (res.status !== 200 && res.status !== 201) \r\n                            throw new Error('Failed');\r\n                        return res.json()\r\n                    })\r\n                    .then (data => {\r\n                        console.log(data)\r\n                        if (data.errors)\r\n                            this.setState({error: data.errors[0].message})\r\n                        else {\r\n                            this.setForkInvisible()\r\n                    }\r\n                    })\r\n                    .catch(err => {\r\n                        console.log(err);\r\n                    });\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n    }\r\n    setForkVisible = () => {\r\n        this.setState({forkPopupVisible : true})\r\n    }\r\n\r\n    setForkInvisible = () => {\r\n        this.setState({forkPopupVisible : false})\r\n    }\r\n\r\n\r\n    handleLike = () => {\r\n        let requestBody = {\r\n            query: `\r\n                mutation {\r\n                    like_unlikePlaylist(username: \"${this.props.username}\", playlist_id: \"${this.state.playlistId}\", playlist_name: \"${this.state.playlistInfo.name}\"){\r\n                        _id\r\n                    }\r\n                }\r\n            `\r\n        }\r\n        fetch('https://easytunes.herokuapp.com/graphql', {\r\n                            method: 'POST',\r\n                            body: JSON.stringify(requestBody),\r\n                            headers: {\r\n                                'content-type': 'application/json'\r\n                            }\r\n                            })\r\n                            .then(res => {\r\n                                if (res.status !== 200 && res.status !== 201) \r\n                                    throw new Error('Failed');\r\n                                return res.json()\r\n                            })\r\n                            .then(data => {\r\n                                let playlist = this.state.playlistInfo\r\n                                if (this.state.liked)\r\n                                    playlist.likes -= 1\r\n                                else \r\n                                    playlist.likes += 1\r\n                                \r\n                                this.setState({liked: !this.state.liked, playlist: playlist})\r\n        \r\n                            })\r\n                            .catch(err => {\r\n                                console.log(err);\r\n                            });\r\n    }\r\n\r\n    handleFavorite = () => {\r\n        let requestBody = {\r\n            query: `\r\n                mutation { \r\n                    addSavedPlaylist(username: \"${this.props.username}\", playlist_id: \"${this.state.playlistId}\", name: \"${this.state.playlistInfo.name}\"){\r\n                            _id\r\n                            name\r\n                            username\r\n                            songs {\r\n                                song_id\r\n                                name\r\n                            }\r\n                    }\r\n                }\r\n            `\r\n        }\r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n            console.log(data)\r\n                this.setState({favorited:true})\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n        }\r\n    render() { \r\n\r\n            if (this.state.loading)\r\n                return (<> </>);\r\n                const {classes} = this.props\r\n            console.log(this.state.favorited)\r\n            function User ({username, history}){\r\n                function toUserProfile(){\r\n                    history.history.push('/' + username)\r\n                }\r\n\r\n                return (\r\n                    <button className=\"user-btn\" onClick = {toUserProfile}> {username} </button>\r\n                )\r\n            }\r\n            return ( \r\n                <div className=\"container-fluid playlist-container playlist\">\r\n\r\n\r\n                    <div className=\"container-fluid playlist-data-container\">\r\n                        {/* Information about the Playlist */}\r\n                        <div className=\"information-row\">\r\n                            <div className=\"col text-center align-self-center playlist-col\">\r\n                                <div className=\"likes\">\r\n                                    {this.state.liked ? \r\n                                        <ThumbUpAltIcon fontSize =\"large\" onClick = {this.handleLike}/>\r\n                                     : \r\n                                        <ThumbUpAltOutlinedIcon onClick = {this.handleLike} fontSize =\"large\" />} \r\n                                    \r\n                                    {this.state.playlistInfo.likes} \r\n\r\n                                    { this.props.username !== this.state.username ?\r\n                                    <>\r\n                                    { !this.state.favorited ? \r\n                                        <IconButton onClick = {this.handleFavorite}>\r\n                                            <BookmarkBorderIcon fontSize=\"large\" />\r\n                                        </IconButton>\r\n                                        :  \r\n                                        <IconButton >\r\n                                            <BookmarkIcon fontSize=\"large\" />\r\n                                         </IconButton>\r\n                                    }\r\n                                    </>\r\n                                : null\r\n                                }\r\n                                </div>\r\n                                \r\n \r\n                                \r\n                            </div>\r\n   \r\n                            <div className=\"col text-center align-self-left playlist-col\">\r\n                                <div className=\"col\">\r\n                                    <img alt=\"playlist_img\" src={this.state.playlistInfo.playlist_img} class=\"song_picture\"></img>\r\n                                </div>\r\n                                <h2>{this.state.playlistInfo.name} {this.state.playlistInfo.public ? <AiFillEye size={24}/> : <AiFillEyeInvisible size={24}/>}</h2>\r\n\r\n                                <h5> Mixtape By: <User username = {this.state.playlistInfo.username} history = {this.props} /> </h5>\r\n                                <div>{this.state.playlistInfo.total_duration < 3600 ? \"0 hr \" + (this.state.playlistInfo.total_duration < 600 ? \"0\" + Math.floor(this.state.playlistInfo.total_duration/60) + \" min\": Math.floor(this.state.playlistInfo.total_duration/60) + \" min\") :\r\n                (Math.floor(this.state.playlistInfo.total_duration/3600) + \" hr \" + (this.state.playlistInfo.total_duration%3600 < 600 ? \"0\" + Math.floor(this.state.playlistInfo.total_duration/60) + \" min\": Math.floor(this.state.playlistInfo.total_duration/60) + \" min\"))}</div>\r\n                            \r\n                            </div>\r\n\r\n                            <div className=\"col text-center align-self-center playlist-col\">\r\n                                <div>\r\n                                     { this.state.playlistInfo.songs.length > 0 ?\r\n                                <>\r\n                                    { this.props.play && this.props.current_playlist.name === this.state.playlistInfo.name? \r\n                                        <FaRegPauseCircle className = \"playlist-play-btn text-center align-self-center\" onClick = {this.handlePlay} size = {34}/>\r\n                                        : <FaRegPlayCircle className = \"playlist-play-btn text-center align-self-center\" onClick = {this.handlePlay} size = {34}/>\r\n                                    }\r\n                                </>\r\n                                : null\r\n                                }\r\n                                {/* <FaRegPauseCircle className = \"playlist-play-btn\" onClick = {this.handlePlay} size = {30}/> */}\r\n                                    <FaShare size={34} className=\"share\" onClick={() => {navigator.clipboard.writeText(window.location.href)}}/> \r\n\r\n                                    \r\n                                    <BiGitRepoForked size={34} className=\"fork\" onClick={this.setForkVisible}/>\r\n                                </div>\r\n                            </div>\r\n                            {this.state.forkPopupVisible ? \r\n                 <Dialog\r\n                 open={this.state.forkPopupVisible}\r\n                 keepMounted\r\n                 onClose={this.setForkInvisible}\r\n                 aria-labelledby=\"alert-dialog-slide-title\"\r\n                 aria-describedby=\"alert-dialog-slide-description\"\r\n                 fullWidth={true}\r\n                 maxWidth = {'sm'}\r\n             >\r\n                 <DialogTitle id=\"alert-dialog-slide-title\">{\"Fork Mixtape: \" + this.state.playlistInfo.name}</DialogTitle>\r\n                 <DialogContent>\r\n                 {this.state.error ?\r\n                     <DialogContentText> {this.state.error} </DialogContentText> : null\r\n                 }\r\n                 <TextField\r\n                     autoFocus\r\n                     margin=\"dense\"\r\n                     id=\"name\"\r\n                     label=\"Mixtape Name\"\r\n                     type=\"text\"\r\n                     fullWidth\r\n                     ref = {this.nameEl}\r\n                 />\r\n                 </DialogContent>\r\n                 <DialogActions>\r\n                 <Button  onClick={this.forkPlaylist} color=\"primary\">\r\n                     Fork\r\n                 </Button>\r\n                 <Button onClick={this.setForkInvisible} color=\"primary\">\r\n                     Close\r\n                 </Button>\r\n             </DialogActions>\r\n             </Dialog>\r\n\r\n                                :\r\n                                null\r\n                                }\r\n   \r\n                        </div>\r\n\r\n                        {/* Songs, Likes and Comments, Settings Navbar */}\r\n                        {this.state.playlistInfo.username === this.props.username ? \r\n                            <div className=\"navigation-row\">\r\n                                <Container className = {classes.container}> \r\n                                <Grid container>\r\n                                    <Grid xs item align=\"center\">\r\n                                        <Button id = \"songs-btn\" onClick = {this.changeView} className = {this.state.songsVisible ? classes.buttonFocus : classes.buttonNotFocus}> \r\n                                            Songs\r\n                                        </Button>\r\n                                    </Grid>\r\n                                    <Grid xs item align=\"center\">\r\n                                        <Button id = \"comments-btn\" onClick = {this.changeView} className = {this.state.commentsVisible? classes.buttonFocus : classes.buttonNotFocus}> \r\n                                            Comments\r\n                                        </Button>\r\n                                    </Grid>\r\n                                    <Grid xs item align=\"center\">\r\n                                        <Button id = \"settings-btn\" onClick = {this.changeView} className = {this.state.settingsVisible ? classes.buttonFocus : classes.buttonNotFocus}> \r\n                                           Settings\r\n                                        </Button>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </Container>\r\n                            </div> : \r\n                            <div className=\"navigation-row\">\r\n                            <Container className = {classes.container}> \r\n                            <Grid container>\r\n                                <Grid xs item align=\"center\">\r\n                                    <Button id = \"songs-btn\" onClick = {this.changeView} className = {this.state.songsVisible ? classes.buttonFocus : classes.buttonNotFocus}> \r\n                                        Songs\r\n                                    </Button>\r\n                                </Grid>\r\n                                <Grid xs item align=\"center\">\r\n                                    <Button id = \"comments-btn\" onClick = {this.changeView} className = {this.state.commentsVisible? classes.buttonFocus : classes.buttonNotFocus}> \r\n                                        Comments\r\n                                    </Button>\r\n                                </Grid>\r\n    \r\n                            </Grid>\r\n                        </Container>\r\n                        </div> \r\n    \r\n                        }\r\n\r\n                        {/* Render \"Songs\", \"Comments\", \"Settings\" */}\r\n                        {this.state.songsVisible ? <Songlist \r\n                                                        playlist_id = {this.state.playlistId} \r\n                                                        songs = {this.state.playlistInfo.songs} \r\n                                                        editing= {this.state.editing}\r\n                                                        play = {this.props.play}\r\n                                                        onPlayChange = {this.props.onPlayChange}\r\n                                                        onPlaylistChange = {this.props.onPlaylistChange}\r\n                                                        onSongChange = {this.props.onSongChange}\r\n                                                        current_playlist = {this.props.current_playlist}\r\n                                                        current_song = {this.props.current_song}\r\n                                                    /> \r\n                        : null}\r\n                        {this.state.commentsVisible ? <Comments comments = {this.state.playlistInfo.comments} username = {this.props.username} playlist_id = {this.state.playlistId}  /> : null}\r\n                        {this.state.settingsVisible ? \r\n                            <PlaylistSetting username = {this.props.username} \r\n                                    history = {this.props.history}\r\n                                    playlist_id = {this.state.playlistId} \r\n                                    playlist = {this.state.playlistInfo} \r\n                                    editing= {this.state.editing} \r\n                                    onChange = {this.onChange}/> : null}\r\n                        <div className = \"row blank-space\"> </div>\r\n                    </div>\r\n  \r\n                </div>\r\n                \r\n            );\r\n        }\r\n        handlePlay = async () => {\r\n            // If pausing current playlist \r\n            if (this.props.current_playlist !== null && this.props.current_playlist._id === this.state.playlistId)\r\n                this.props.onPlayChange(!this.props.play) \r\n            // If changing playlist \r\n            else {\r\n                console.log(\"Change playlist\")\r\n                let playlists = this.state.playlistInfo\r\n                playlists[\"_id\"] = this.state.playlistId\r\n                this.props.onPlaylistChange(playlists, this.state.playlistInfo.songs[0])\r\n            }\r\n                \r\n        }\r\n        // Update the playlist after edit \r\n        onChange = async (type, obj) => {\r\n            if (type === \"playlist\") {\r\n                this.setState({playlist: obj})\r\n            }\r\n            else if (type === \"revert\"){\r\n                this.setState({\r\n                    songsVisible : true,\r\n                    commentsVisible : false,\r\n                    settingsVisible : false,\r\n                })\r\n               this.getPlaylist()\r\n            }\r\n            else if (type === \"save\"){\r\n                this.updatePrivacy()\r\n                this.updateName()\r\n                this.updateImg()\r\n                console.log(this.state.playlistId)\r\n                await this.removeSongs()\r\n                console.log(this.state.playlistInfo.songs)\r\n                for(let i = 0; i < this.state.playlistInfo.songs.length; i++)\r\n                    await this.addSong(this.state.playlistInfo.songs[i])\r\n            }\r\n            else{\r\n                this.setState({editing: obj})\r\n            }\r\n\r\n\r\n       \r\n        }\r\n\r\n        updatePrivacy = () => {\r\n            // Set Public/Private status \r\n            let playlist = this.state.playlistInfo\r\n            let requestBody = {\r\n                query: `\r\n                    mutation {\r\n                        changePlaylistPrivacy(id: \"${this.state.playlistId}\", privacy: ${playlist.public}){\r\n                            _id \r\n                        }\r\n                    }\r\n                `\r\n            }\r\n            this.fetch(requestBody)\r\n        }\r\n\r\n        updateName = () => {\r\n            let playlist = this.state.playlistInfo\r\n            let requestBody = {\r\n                query: `\r\n                    mutation {\r\n                        changePlaylistName(id: \"${this.state.playlistId}\", name: \"${playlist.name}\"){\r\n                            _id \r\n                        }\r\n                    }\r\n                `\r\n            }\r\n\r\n            this.fetch(requestBody)\r\n        }\r\n        updateImg = () => {\r\n            let playlist = this.state.playlistInfo\r\n            let requestBody = {\r\n                query: `\r\n                    mutation {\r\n                        changePlaylistImg(id: \"${this.state.playlistId}\", img: \"${playlist.playlist_img}\"){\r\n                            _id \r\n                        }\r\n                    }\r\n                `\r\n            }\r\n\r\n            this.fetch(requestBody)\r\n        }\r\n\r\n        removeSongs = () => {\r\n            return new Promise((resolve, reject) => {\r\n                let requestBody = {\r\n                    query: `\r\n                        mutation {\r\n                            removeAllSongs(id: \"${this.state.playlistId}\"){\r\n                                _id \r\n                            }\r\n                        }\r\n                    `\r\n                }\r\n                fetch('https://easytunes.herokuapp.com/graphql', {\r\n                method: 'POST',\r\n                body: JSON.stringify(requestBody),\r\n                headers: {\r\n                    'content-type': 'application/json'\r\n                }\r\n                })\r\n                .then(res => {\r\n                    if (res.status !== 200 && res.status !== 201) \r\n                        throw new Error('Playlist not found');\r\n                    return res.json()\r\n                })\r\n                .then(data => {\r\n                    resolve(data)\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                });\r\n             });\r\n        }\r\n\r\n        addSong = (song) => {\r\n            return new Promise((resolve, reject) => {\r\n                let artists = \"\"\r\n                artists += song.artists.map(artist => {\r\n                    return \"\\n\" + artist\r\n                })\r\n    \r\n                let requestBody = {\r\n                    query: `\r\n                        mutation {\r\n                            addSong(songInput: {_id: \"${song.song_id}\", name: \"${song.name}\", artists: \"\"\"${artists}\"\"\", uploaded: false, duration: ${song.duration}, img: \"${song.song_img}\",uri: \"${song.song_uri}\"}, playlist_id: \"${this.state.playlistId}\"){\r\n                                _id\r\n                            }\r\n                        }\r\n                    `\r\n                }\r\n                fetch('https://easytunes.herokuapp.com/graphql', {\r\n                method: 'POST',\r\n                body: JSON.stringify(requestBody),\r\n                headers: {\r\n                    'content-type': 'application/json'\r\n                }\r\n                })\r\n                .then(res => {\r\n                    if (res.status !== 200 && res.status !== 201) \r\n                        throw new Error('Playlist not found');\r\n                    return res.json()\r\n                })\r\n                .then(data => {\r\n                    resolve(data)\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                });\r\n             });\r\n        }\r\n        fetch = (requestBody) => {\r\n            fetch('https://easytunes.herokuapp.com/graphql', {\r\n                method: 'POST',\r\n                body: JSON.stringify(requestBody),\r\n                headers: {\r\n                    'content-type': 'application/json'\r\n                }\r\n                })\r\n                .then(res => {\r\n                    if (res.status !== 200 && res.status !== 201) \r\n                        throw new Error('Playlist not found');\r\n                    return res.json()\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                });\r\n\r\n        }\r\n\r\n        changeView = (event) => {\r\n            console.log(event.target)\r\n            if (event.currentTarget.id === 'songs-btn'){\r\n                this.setState({songsVisible : true, commentsVisible:false, settingsVisible:false})\r\n               // this.props.history.push('/' + this.state.user.username+ \"/followers\")\r\n            }\r\n            else if (event.currentTarget.id === 'comments-btn'){\r\n                this.setState({songsVisible : false, commentsVisible:true, settingsVisible:false})\r\n               // this.props.history.push('/' + this.state.user.username + \"/following\")\r\n            }\r\n            else {\r\n                this.setState({songsVisible : false, commentsVisible:false, settingsVisible:true})\r\n               // this.props.history.push('/' + this.state.user.username + \"/requests\")\r\n            }       \r\n        }\r\n\r\n}\r\n \r\nexport default withStyles(useStyle)(Playlist);","import React, { Component } from 'react'\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport Navbar from '../Navbar/Navbar';\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\n\r\n\r\nconst useStyles = theme => ({\r\n  root: {\r\n    minHeight: '100vh',\r\n    backgroundImage: `url(${process.env.PUBLIC_URL + '../../assets/home.jpg' })`,\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundSize: 'cover',\r\n    flexGrow: 1,\r\n    justifyContent: 'center'\r\n  },\r\n  \r\n  hero: {\r\n    height: \"100vh\",\r\n    background: \"none\",\r\n    position: \"relative\",\r\n    display: 'flex',\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    color: \"black\",\r\n    fontSize: \"3rem\",\r\n    \r\n  },\r\n\r\n  title: {\r\n    fontSize: \"3rem\",\r\n    color: \"black\",\r\n    display: 'flex',\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  \r\n});\r\n\r\nclass Home extends Component {\r\n  state = {  }\r\n  componentDidMount = () => {\r\n    if (this.props.username)\r\n      this.props.history.push('/home')\r\n  }\r\n  render() { \r\n    const {classes} = this.props\r\n    return (  \r\n      <div className={classes.root}>\r\n      <Navbar />\r\n      <Box className={classes.hero}>\r\n        <Box textAlign='center'>\r\n        <Typography className={classes.title} color=\"textSecondary\" gutterBottom>\r\n          Follow Music Mixtapes\r\n        </Typography>\r\n        <Typography className={classes.title} color=\"textSecondary\">\r\n          Join Conversations\r\n        </Typography>\r\n        <Link to=\"/register\">\r\n        <Button variant=\"contained\" color=\"secondary\" >\r\n          Get Started\r\n        </Button>\r\n        </Link>\r\n        </Box>\r\n      </Box>\r\n      \r\n\r\n    </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default withStyles(useStyles)(Home);","/** PLAYLIST BUTTON\r\n * Component used within playlist and saved playlists\r\n * Handles one playlist in the playlists page \r\n */\r\n\r\nimport React, { Component } from 'react'\r\nimport {AiFillHeart, AiFillEyeInvisible, AiFillEye} from 'react-icons/ai'\r\nimport {withStyles} from '@material-ui/core/styles'\r\nimport {RiPlayListLine} from 'react-icons/ri'\r\nimport {AiOutlineDelete, AiOutlineCheckCircle, AiOutlineCloseCircle} from 'react-icons/ai'\r\n// FaRegPauseCircle\r\nimport ThumbUpAltIcon from '@material-ui/icons/ThumbUpAlt'\r\nimport './HomeScreen.css'\r\n\r\nconst useStyle = theme => ({\r\n    deleteBtn :{\r\n        '&:focus':{\r\n            outline:\"none\"\r\n        }\r\n    }\r\n})\r\nclass Home_Playlist_Button extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.setPlaylists = this.props.setPlaylists;\r\n    }\r\n    \r\n    state = { \r\n        playlist: this.props.playlist,\r\n        history: this.props.history\r\n    }\r\n\r\n    // Go to the playlist page \r\n    toPlaylist = () => {\r\n        this.state.history.push('/' + encodeURIComponent(this.state.playlist.username) + '/mixtape='+ this.state.playlist._id)\r\n    }\r\n       \r\n    render() { \r\n        const playlist = this.state.playlist \r\n        const {classes} = this.props\r\n        return (\r\n            <div className=\"playlist-row playlist-button\" onClick={this.toPlaylist}>\r\n<div className=\"card-content col s1\" >\r\n                        <img alt = \"playlist_img\" src={this.state.playlist.playlist_img} class=\"song_picture\"></img>\r\n                    </div>\r\n                    <div className='card-content col s3' onClick={this.toPlaylist}>\r\n                        <button><span className='card-title'>{this.state.playlist.name}</span></button>\r\n                        </div>\r\n                    <div className='card-content col s3' onClick={this.toPlaylist}> \r\n                        <span className='card-title'>{this.state.playlist.username}</span>\r\n                    </div>\r\n                    <div className='card-content col s1' onClick={this.toPlaylist}>\r\n                        <span className='card-title'>{this.state.playlist.likes}</span>\r\n                    </div>\r\n                    <div className='card-content col s3'>\r\n                        <span className='card-title'>\r\n                            {this.state.playlist.songs.length} {this.state.playlist.songs.length === 1 ? \"Song \" : \"Songs \"}\r\n                        </span>\r\n                        {\"- \"}\r\n                        <span className='card-title'>\r\n                            {this.state.playlist.total_duration < 3600 ? \"0 hr \" + (this.state.playlist.total_duration < 600 ? \"0\" + Math.floor(this.state.playlist.total_duration/60) + \" min\": Math.floor(this.state.playlist.total_duration/60) + \" min\") :\r\n                            (Math.floor(this.state.playlist.total_duration/3600) + \" hr \" + (this.state.playlist.total_duration%3600 < 600 ? \"0\" + Math.floor(this.state.playlist.total_duration/60) + \" min\": Math.floor(this.state.playlist.total_duration/60) + \" min\"))}\r\n                        </span>\r\n                    </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default withStyles(useStyle)(Home_Playlist_Button);","/** PLAYLISTS\r\n * Component within profile\r\n * Handles displaying the user's playlists \r\n */\r\n\r\nimport React, { Component } from 'react'\r\n\r\nimport Home_Playlist_Button from './Home_Playlist_Button'\r\nimport './HomeScreen.css'\r\n\r\n\r\nclass Home_Playlists extends Component {\r\n \r\n    state = { \r\n        playlists: this.props.playlists,\r\n    }\r\n\r\n    // Updates playlists \r\n    setPlaylists = (playlists) => {\r\n        this.setState({playlists : playlists})\r\n    }\r\n\r\n\r\n    render() { \r\n        let playlists = this.state.playlists.map(function(playlist) {\r\n            return (\r\n                <Home_Playlist_Button \r\n                    playlist = {playlist} \r\n                    key = {playlist._id} \r\n                    history = {this.props.history} \r\n                />\r\n            )\r\n        }, this)\r\n        return (\r\n            <>\r\n            {playlists}\r\n            </>\r\n        );\r\n    }\r\n}\r\n \r\nexport default Home_Playlists;","/** HOME SCREEN\r\n * Handles displaying the home screen after logging in \r\n */\r\n\r\nimport React, {Component } from 'react'\r\nimport '../Navbar/Navbar.css';\r\nimport \"./HomeScreen.css\"\r\nimport Home_Playlists from './Home_Playlists.js'\r\n\r\nclass HomeScreen extends Component {\r\n\r\n    state = {\r\n      loading: true,\r\n      current_playlist: null,\r\n      current_song: null,\r\n      index: -1,\r\n      top_five: null\r\n    }\r\n\r\n    componentDidMount = () => {\r\n      if (!this.props.username)\r\n        this.props.history.push('/login')\r\n\r\n      this.setState({loading : true})\r\n      let current_song = null\r\n        let requestBody = {\r\n            query : `\r\n                query {\r\n                  getUserByUsername(username: \"${this.props.username}\"){\r\n                      user{\r\n                      current_song_id\r\n                      current_playlist_id\r\n                      }\r\n                    }\r\n                }\r\n            `\r\n        }\r\n        fetch('https://easytunes.herokuapp.com/graphql', {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201) \r\n                    throw new Error('Playlist not found');\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n                data = data.data.getUserByUsername.user\r\n\r\n                if (data.current_playlist_id == null){\r\n                  this.setState({\r\n                    loading: false\r\n                  })\r\n                }\r\n\r\n                else{\r\n                  requestBody = {\r\n                    query : `\r\n                        query {\r\n                          getPlaylistByID(id : \"${data.current_playlist_id}\"){\r\n                            _id\r\n                            name\r\n                            playlist_img\r\n                            total_duration\r\n                            songs {\r\n                              song_id\r\n                              name\r\n                              artists\r\n                              uploaded\r\n                              duration\r\n                              song_img\r\n                            }\r\n                            }\r\n                        }\r\n                    `\r\n                }\r\n\r\n                current_song = data.current_song_id\r\n\r\n                fetch('https://easytunes.herokuapp.com/graphql', {\r\n                  method: 'POST',\r\n                  body: JSON.stringify(requestBody),\r\n                  headers: {\r\n                      'content-type': 'application/json'\r\n                  }\r\n                  })\r\n                  .then(res => {\r\n                      if (res.status !== 200 && res.status !== 201) \r\n                          throw new Error('Playlist not found');\r\n                      return res.json()\r\n                  })\r\n                  .then(data => {\r\n                      data = data.data.getPlaylistByID\r\n                      let index = -1\r\n                      data.songs.forEach((song,i) => {\r\n                        if (song.song_id === current_song)\r\n                          index = i\r\n                      })\r\n                      \r\n                      this.setState({\r\n                        current_playlist: data,\r\n                        current_song: current_song,\r\n                        index: index,\r\n                        loading: false\r\n                      })\r\n                  })\r\n                  .catch(err => {\r\n                      console.log(err);\r\n                  });\r\n                }\r\n        \r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n            console.log(\"loading top five\")\r\n            this.loadTopFive()\r\n    }\r\n\r\n    loadTopFive = () => {\r\n      console.log(\"loading top five 2\")\r\n      let requestBody = {\r\n        query : `\r\n            query {\r\n              topFivePlaylists{\r\n                _id \r\n                name \r\n                username\r\n                likes\r\n                total_duration \r\n                playlist_img\r\n                songs {\r\n                  song_id\r\n                  song_uri\r\n                  name\r\n                  artists\r\n                  song_img\r\n                }\r\n              }\r\n            }\r\n        `\r\n    }\r\n    fetch('https://easytunes.herokuapp.com/graphql', {\r\n        method: 'POST',\r\n        body: JSON.stringify(requestBody),\r\n        headers: {\r\n            'content-type': 'application/json'\r\n        }\r\n        })\r\n        .then(res => {\r\n            if (res.status !== 200 && res.status !== 201) \r\n                throw new Error('Playlist not found');\r\n            return res.json()\r\n        })\r\n        .then(data => {\r\n          console.log(\"loading top five 3\")\r\n          data = data.data.topFivePlaylists\r\n          console.log(data)\r\n          \r\n          this.setState({\r\n            top_five : data\r\n          })\r\n      })\r\n      .catch(err => {\r\n          console.log(err);\r\n      });\r\n    }\r\n    // Redirect to Home when home button is pressed \r\n    handleHome = () => {\r\n        const {history } = this.props;\r\n        history.replace('/home')\r\n    }\r\n    \r\n    getArtists = () => {\r\n      let artists = \"\"\r\n\r\n      this.props.current_song.artists.forEach((artist,i) => {\r\n          if (i === 0)\r\n            artists = artist \r\n          else \r\n            artists = artists + \", \" + artist\r\n      })\r\n      console.log(artists)\r\n      return artists\r\n    }\r\n    render() { \r\n\r\n      if (this.state.loading)\r\n        return (<></>)\r\n        console.log(this.props.access_token)\r\n    \r\n        return ( \r\n                \r\n                <div className=\"container-fluid  user-home-container\" ref={this.container}>\r\n                    {/* Home Button and Account Icon */}\r\n                        <div className=\"container-child\" style={{width: \"50%\", \"margin-left\": \"10px\"}}>\r\n                          <div className=\"row\">\r\n                              <h3 className=\"current-playlist\">Top Mixtapes</h3>\r\n                          </div>\r\n                          <div className='row'>\r\n                              <div className='col s1 current-playlist'></div>\r\n                              <div className='col s3 current-playlist'>Name</div>\r\n                              <div className='col s3 current-playlist'>Username</div>\r\n                              <div className='col s1 current-playlist'>Likes</div>\r\n                              <div className='col s3 current-playlist'>Songs</div>\r\n                              <div className='col s3 current-playlist'></div>\r\n                          </div>\r\n                          {this.state.top_five ?\r\n                          <Home_Playlists playlists = {this.state.top_five} \r\n                                history = {this.props.history}/>\r\n                                :\r\n                          null }\r\n                        \r\n                    </div>\r\n                    <div className=\"container-child\" style={{width: \"50%\"}}>\r\n                      <div className=\"container-fluid text-center\">\r\n                                <div className=\"current-playlist\">\r\n                                  CURRENT MIXTAPE\r\n                                </div>\r\n                                <div className=\"current-playlist-name\">\r\n                                  {this.props.current_playlist ? this.props.current_playlist.name : \"N/A\"}\r\n                                </div>\r\n                          </div>\r\n\r\n                      <div className=\"image-container\">\r\n                          <img src={this.props.current_playlist ? this.props.current_playlist.playlist_img : 'https://community.spotify.com/t5/image/serverpage/image-id/25294i2836BD1C1A31BDF2?v=1.0'}  alt=\"\" class=\"home_card\"/>\r\n                      </div>\r\n                      \r\n                      <div className=\"container-fluid text-center song-info-row\">\r\n                          <div className=\"song-name\">\r\n                              {this.props.current_playlist ? this.props.current_song.name : \"Song Name\"}\r\n                          </div>\r\n                          <div className=\"song-artist\">\r\n                              {this.props.current_playlist ? this.getArtists() : \"Artist\"}\r\n                          </div>\r\n                      </div>\r\n                    </div>\r\n                    {/* <SpotifyPlayer\r\n                      token= {this.props.access_token}\r\n                      uris={[\"spotify:track:2r6OAV3WsYtXuXjvJ1lIDi\", \"spotify:track:7qwt4xUIqQWCu1DJf96g2k\"]}\r\n                      style = {{width: \"100%\"}}\r\n                    /> */}\r\n                  \r\n                    \r\n                </div>\r\n          \r\n         );\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\nexport default HomeScreen;\r\n\r\n\r\n","/** ADD SONG\r\n * Component within Search List \r\n * Used to add a song into a playlist \r\n**/\r\n\r\nimport React, { Component } from 'react'\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport {withStyles} from '@material-ui/core/styles'\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle'\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport TextField from '@material-ui/core/TextField'\r\nconst useStyles = theme => ({\r\n    dialog :{\r\n        minWidth: \"300px\"\r\n    },\r\n  dialogButton : {\r\n        width: \"100%\",\r\n        background: \"transparent\",\r\n        '&:focus' :{\r\n            outline: \"none\"\r\n        }\r\n  },\r\n  iconButton :{\r\n    width: \"100%\",\r\n    background: \"transparent\",\r\n    '&:focus' :{\r\n        outline: \"none\"\r\n    }\r\n  },\r\n  button : {\r\n    '&:focus' :{\r\n        outline: \"none\"\r\n    }\r\n  }\r\n})\r\nclass AddSong extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.anchorEl = null\r\n        this.nameEl = React.createRef()\r\n    }\r\n    state = { \r\n        playlists: null, \r\n        song: this.props.song,\r\n        username: this.props.username, \r\n        loading: true,\r\n        open: false,\r\n        createNew: false,\r\n        error : null\r\n    }\r\n\r\n    // Fetch the user's playlist \r\n    componentDidMount = () => {\r\n        this.setState({loading: true})\r\n\r\n        let requestBody = {\r\n            query: `\r\n                query {\r\n                    getUserByUsername(username: \"${this.props.username}\"){\r\n                        playlists {\r\n                            _id\r\n                            name\r\n                            songs {\r\n                                song_id\r\n                                name\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                }\r\n            `\r\n        }\r\n        fetch ('https://easytunes.herokuapp.com/graphql', {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }})\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n                this.setState({playlists : data.data.getUserByUsername.playlists, loading: false})\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    // Handle the visibility state of the user's playlists \r\n    changeVisible = () => {\r\n        this.setState({visible : !this.state.visible})\r\n    }\r\n    millisToSeconds(millis) {\r\n        const seconds = Math.floor(millis/1000);\r\n        return seconds\r\n    }\r\n\r\n    // Handle adding the song to a playlist \r\n    handleAdd = (event) => {\r\n        let artists = \"\"\r\n\r\n        artists += this.state.song.artists.map(artist => {\r\n            return \"\\n\" + artist.name\r\n        })\r\n        let songlength = this.millisToSeconds(this.state.song.duration_ms)\r\n        console.log(event.currentTarget)\r\n        let requestBody = {\r\n            query: `\r\n                mutation {\r\n                    addSong(songInput: {_id: \"${this.state.song.id}\", name: \"${this.state.song.name}\", artists: \"\"\"${artists}\"\"\", uploaded: false, duration: ${songlength}, img: \"${this.state.song.album.images[0].url}\" , uri: \"${this.state.song.uri}\"}, playlist_id: \"${event.currentTarget.id}\"){\r\n                        _id\r\n                    }\r\n                }\r\n            `\r\n        }\r\n\r\n        fetch ('https://easytunes.herokuapp.com/graphql', {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }})\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n                this.handleClose()\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n    \r\n    createAndAdd = () => {\r\n        console.log(\"HERE\")\r\n        const name = this.nameEl.current.children[1].children[0].value.trim()\r\n        let requestBody = {\r\n            query: `\r\n                query {\r\n                    getUserByUsername(username: \"${this.props.username}\"){\r\n                        user{\r\n                            _id\r\n                        }\r\n                    }\r\n                }\r\n            `\r\n        }\r\n\r\n        fetch ('https://easytunes.herokuapp.com/graphql', {\r\n                        method: 'POST',\r\n                        body: JSON.stringify(requestBody),\r\n                        headers: {\r\n                            'content-type': 'application/json'\r\n                        }})\r\n                        .then(res => {\r\n                            if (res.status !== 200 && res.status !== 201)\r\n                                throw new Error ('Failed')\r\n                            return res.json()\r\n                        })\r\n                        .then(data => {\r\n                        \r\n                            requestBody = {\r\n                                    query: `\r\n                                        mutation {\r\n                                            createPlaylist (username : \"${this.props.username}\", name : \"${name}\", user_id: \"${data.data.getUserByUsername.user._id}\") {\r\n                                                _id \r\n                                            }\r\n                                        }\r\n                                    `\r\n                                }\r\n                            \r\n                                // Create the playlist \r\n                            fetch('https://easytunes.herokuapp.com/graphql', {\r\n                                        method: 'POST',\r\n                                        body: JSON.stringify(requestBody),\r\n                                        headers: {\r\n                                            'content-type': 'application/json'\r\n                                        }\r\n                                        })\r\n                                    .then(res => {\r\n                                        // if (res.status !== 200 && res.status !== 201) \r\n                                        //     throw new Error('Failed');\r\n                                        return res.json()\r\n                                    })\r\n                                    .then(result => {\r\n                                        // Update the playlists on the UI \r\n                              \r\n                                        if (result.errors)\r\n                                            this.setState({error: result.errors[0].message})\r\n                                        else {\r\n                                            let artists = \"\"\r\n\r\n                                            artists += this.state.song.artists.map(artist => {\r\n                                                return \"\\n\" + artist.name\r\n                                            })\r\n                                            let songlength = this.millisToSeconds(this.state.song.duration_ms)\r\n                                            let requestBody = {\r\n                                                query: `\r\n                                                    mutation {\r\n                                                        addSong(songInput: {_id: \"${this.state.song.id}\", \r\n                                                            name: \"${this.state.song.name}\", \r\n                                                            artists: \"\"\"${artists}\"\"\", \r\n                                                            uploaded: false, \r\n                                                            duration: ${songlength}, \r\n                                                            img: \"${this.state.song.album.images[0].url}\" , \r\n                                                            uri: \"${this.state.song.uri}\"}, \r\n                                                            playlist_id: \"${result.data.createPlaylist._id}\"){\r\n\r\n                                                            _id\r\n                                                            name \r\n                                                            songs {\r\n                                                                name \r\n                                                                song_id\r\n                                                            }\r\n                                                        }\r\n                                                    }\r\n                                                `\r\n                                            }\r\n\r\n                                            fetch ('https://easytunes.herokuapp.com/graphql', {\r\n                                                method: 'POST',\r\n                                                body: JSON.stringify(requestBody),\r\n                                                headers: {\r\n                                                    'content-type': 'application/json'\r\n                                                }})\r\n                                                .then(res => {\r\n                                                    if (res.status !== 200 && res.status !== 201)\r\n                                                        throw new Error ('Failed')\r\n                                                    return res.json()\r\n                                                })\r\n                                                .then(data => {\r\n                                                    // Add playlistname \r\n                                                    console.log(data.data.addSong)\r\n                                                    let playlists = this.state.playlists \r\n                                                    playlists.push(data.data.addSong)\r\n                                                    this.setState({playlists: playlists, error: \"\", open:false, createNew:false})\r\n                                                    console.log(playlists)\r\n\r\n                                                })\r\n                                                .catch(error => {\r\n                                                    console.log(error)\r\n                                                })\r\n                                            }\r\n                                        })\r\n                                    .catch(err => {\r\n                                        console.log(err);\r\n                                    });\r\n                                })\r\n                        .catch(error => {\r\n                            console.log(error)\r\n                        })\r\n    }\r\n\r\n    handleClickOpen = () => {\r\n        this.setState({open:true})\r\n\r\n    };\r\n    \r\n    handleClose = () => {\r\n        this.setState({open:false, createNew:false})\r\n    }\r\n\r\n    openNew = () => {\r\n        this.setState({createNew : true})\r\n    }\r\n    closeNew = () =>{\r\n        this.setState({createNew : false })\r\n    }\r\n    render() { \r\n        if (this.state.loading)\r\n            return (<> </>)\r\n\r\n        const {classes} = this.props\r\n\r\n        return ( \r\n            <div>\r\n                <IconButton onClick={this.handleClickOpen} className = {classes.iconButton}> \r\n                    <AddCircleIcon  variant=\"outlined\" color=\"primary\"  fontSize=\"large\"/>\r\n                </IconButton>\r\n\r\n  \r\n\r\n      <Dialog\r\n        open={this.state.open}\r\n        keepMounted\r\n        onClose={this.handleClose}\r\n        aria-labelledby=\"alert-dialog-slide-title\"\r\n        aria-describedby=\"alert-dialog-slide-description\"\r\n        className = {classes.dialog}\r\n        fullWidth={true}\r\n        maxWidth = {'sm'}\r\n      >\r\n        \r\n        {!this.state.createNew ?\r\n            <>\r\n                <DialogTitle id=\"alert-dialog-slide-title\">{\"Add Song to Mixtape\"}</DialogTitle>\r\n                {\r\n                    this.state.playlists.map(playlist => {\r\n                        return (\r\n                            <DialogContent>\r\n                                <Button className = {classes.dialogButton} id={playlist._id} onClick = {this.handleAdd}>\r\n                                    {playlist.name}\r\n                                </Button>\r\n                            </DialogContent>\r\n                        )\r\n                    })\r\n                }\r\n        \r\n                <DialogActions>\r\n                    <Button  onClick={this.openNew} color=\"primary\">\r\n                        New Mixtape\r\n                    </Button>\r\n                    <Button onClick={this.handleClose} color=\"primary\">\r\n                        Cancel\r\n                    </Button>\r\n                </DialogActions>\r\n            \r\n            </>\r\n            :\r\n            <>\r\n                <DialogTitle id=\"alert-dialog-slide-title\">{\"Add Song to New Mixtape\"}</DialogTitle>\r\n                <DialogContent>\r\n                    {this.state.error ?\r\n                        <DialogContentText> {this.state.error} </DialogContentText> : null\r\n\r\n                    }\r\n                    <TextField\r\n                        autoFocus\r\n                        margin=\"dense\"\r\n                        id=\"name\"\r\n                        label=\"Playlist Name\"\r\n                        type=\"text\"\r\n                        fullWidth\r\n                        ref = {this.nameEl}\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button  onClick={this.createAndAdd} color=\"primary\" className = {classes.button}> \r\n                        Create and Add\r\n                    </Button>\r\n                    <Button onClick={this.closeNew} color=\"primary\" className = {classes.button}>\r\n                        Back\r\n                    </Button>\r\n                </DialogActions>\r\n            </>\r\n        }\r\n       </Dialog>\r\n    </div>\r\n\r\n        );\r\n    }\r\n}\r\n \r\nexport default withStyles(useStyles)(AddSong);\r\n","/** USER CARD\r\n * Component within Search List Card\r\n * Used to display a user in the search results \r\n */\r\n\r\nimport React, { Component } from 'react'\r\n// Received for Pending request from user. Shared for pending request to user ## RiUserUnfollowLine\r\nimport {RiUserFollowLine, RiUserAddLine,RiUserReceivedLine,RiUserSharedLine} from 'react-icons/ri'\r\n\r\nclass UserCard extends Component {\r\n    state = { \r\n        user: this.props.user,\r\n        sessionUserRequests: null,\r\n        sessionUserFollowers: null,\r\n        loading: true,\r\n        isHovered: false\r\n    }\r\n\r\n    // Get the user \r\n    componentDidMount = () => {\r\n        this.setState({loading: true})\r\n        let requestBody = {\r\n            query: `\r\n                query {\r\n                    getUserByUsername(username: \"${this.props.sessionUser}\"){\r\n                        user {\r\n                            _id\r\n                            follow_requests {\r\n                                user_id\r\n                                username\r\n                                profile_img\r\n                            }\r\n                            followers {\r\n                                user_id \r\n                                username\r\n                                profile_img\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            `\r\n        }\r\n\r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n                this.setState({\r\n                    sessionUserRequests : data.data.getUserByUsername.user.follow_requests,\r\n                    sessionUserFollowers : data.data.getUserByUsername.user.followers,\r\n                    loading: false \r\n                })\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    // If the session user has made a follow request \r\n    userRequestedFollow = () => {\r\n        const requests = this.state.user.user.follow_requests\r\n\r\n        let requested = false\r\n        requests.forEach(request => {\r\n            if (request.username === this.props.sessionUser)\r\n                requested = true \r\n          \r\n        })\r\n        return requested\r\n    }\r\n\r\n    // If the searched user has made a follow request \r\n    searchedRequestedFollow = () => {\r\n        let requested = false \r\n        this.state.sessionUserRequests.forEach(request => {\r\n            if (request.username === this.state.user.user.username)\r\n                requested = true\r\n        })\r\n        return requested\r\n    }\r\n\r\n    // If the searched user is following \r\n    searchedFollowing = () => {\r\n        let following = false \r\n        this.state.sessionUserFollowers.forEach(follower => {\r\n            if (follower.username === this.state.user.user.username)\r\n                following = true\r\n        })\r\n        return following \r\n    }\r\n\r\n    // If the session user is following searched user \r\n    userFollowing = () => {\r\n        let following = false \r\n        this.state.user.user.followers.forEach(follower => {\r\n            if (follower.username === this.props.sessionUser)\r\n                following = true\r\n        })\r\n        return following \r\n    }\r\n\r\n    // Send a follow request \r\n    sendRequest = () => {\r\n        console.log(this.state.user.user._id)\r\n        let requestBody = {\r\n            query: `\r\n                mutation {\r\n                    addRequest(id: \"${this.state.user.user._id}\", requested_username: \"${this.props.sessionUser}\", profile_img: \"${this.state.user.user.profile_img}\"){\r\n                            _id\r\n                            username\r\n                            profile_img\r\n                            followers {\r\n                                user_id\r\n                                username\r\n                                profile_img\r\n                            }\r\n                            follow_requests {\r\n                                user_id \r\n                                username\r\n                                profile_img\r\n                            }\r\n\r\n                    }\r\n                }\r\n            `\r\n        }\r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n            console.log(data)\r\n                let user = this.state.user \r\n                user.user = data.data.addRequest\r\n       \r\n               this.setState({user: user})\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n\r\n    }\r\n\r\n    // Go to the user's profile page \r\n    toUser = () => {\r\n        console.log(this.props)\r\n        this.props.history.push('/' +  this.state.user.user.username)\r\n    }\r\n    toggleHover = () => {\r\n        this.setState({isHovered: !this.state.isHovered})\r\n    }\r\n\r\n    handleUnfollow = () => {\r\n        let requestBody = {\r\n            query: `\r\n                mutation{\r\n                    unFollow(username: \"${this.props.sessionUser}\", following_id: \"${this.state.user.user._id}\"){\r\n                   \r\n                            _id\r\n                            following {\r\n                                user_id\r\n                                username\r\n                            }\r\n                        \r\n                    }\r\n                }\r\n            `\r\n        }\r\n        \r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n                console.log(data)\r\n                let profileFollowers = this.state.user.user.followers\r\n                profileFollowers.forEach((follower,i) => {\r\n                    if (follower.username === this.props.sessionUser){\r\n                        profileFollowers.splice(i, 1)\r\n                    }\r\n                })\r\n\r\n                this.setState({user: this.state.user})\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n    render() { \r\n        if (this.state.loading)\r\n            return (<> </>);\r\n        // Do not show in the search results if it's the user that's logged in \r\n        // if (this.props.sessionUser === this.state.user.user.username)\r\n        //     return (<> </>);\r\n        return(\r\n            <div>\r\n                <div className='card z-depth-0 text search_card'>\r\n                    <div className=\"col-2 s1\" onClick = {this.toUser}>\r\n                        <img alt = \"user_img\" src={this.state.user.user.profile_img} class=\"user_picture\"></img>\r\n                    </div>\r\n                    <div className='card-content col s3 user-button' onClick = {this.toUser}>\r\n                        <button><span className='card-title'>{this.state.user.user.username}</span> </button>\r\n                    </div>\r\n                    <div className='card-content col s3' onClick = {this.toUser}>\r\n                        <span className='card-title'>{this.state.user.user.followers.length}</span>\r\n                    </div>\r\n                    <div className='card-content col s3' onClick = {this.toUser}> \r\n                        <span className='card-title'>{this.state.user.playlists.length}</span>\r\n                    </div>\r\n\r\n                    <div className=' col-2 s3 user-following-info align-self-center'>\r\n                        {this.state.user.user.username !== this.props.sessionUser ?\r\n                                <>\r\n                                {this.userRequestedFollow() ?  \r\n                                    <button className =\"requested-btn align-self-center\"> Requested </button> \r\n                                    // <RiUserSharedLine size= {24}/> \r\n                                : \r\n                                    this.userFollowing() ? \r\n                                    <button className =\"following-btn align-self-center\" onMouseEnter={this.toggleHover} onMouseLeave={this.toggleHover} onClick = {this.handleUnfollow}> {this.state.isHovered ? \"Unfollow\" : \"Following\"}</button> \r\n                                // <RiUserFollowLine size= {24}/> \r\n                                : \r\n                                    this.searchedRequestedFollow() ? \r\n                                    <button className =\"requested-btn\"> Pending Request </button> \r\n                        //  <RiUserReceivedLine size= {24}/>\r\n                         :\r\n                                    <button className =\"request-btn align-self-center\" onClick={this.sendRequest}> Follow </button>\r\n                        }\r\n                                </>\r\n                                : null\r\n                        }\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default UserCard;","/** PLAYLIST CARD  \r\n * Component withing Search List Card \r\n * Used to display a playlist in the search results \r\n*/\r\n\r\nimport React, { Component } from 'react'\r\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder'\r\nimport FavoriteIcon from '@material-ui/icons/Favorite'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport BookmarkIcon from '@material-ui/icons/Bookmark'\r\nimport BookmarkBorderIcon from '@material-ui/icons/BookmarkBorder'\r\nclass PlaylistCard extends Component {\r\n    state = { \r\n        playlist: this.props.playlist,\r\n        loading: true,\r\n        favorited: false,\r\n     }\r\n    \r\n     componentDidMount = () => {\r\n         let requestBody = {\r\n             query: `\r\n                query {\r\n                    getUserByUsername(username: \"${this.props.sessionUser}\"){\r\n                        user {\r\n                            saved_playlists {\r\n                                playlist_id\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n             `\r\n         }\r\n\r\n         fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n            'content-type': 'application/json'\r\n            }})\r\n        .then(res => {\r\n            if (res.status !== 200 && res.status !== 201) \r\n                throw new Error('Failed');\r\n            return res.json()\r\n        })\r\n        .then(result => {\r\n            const saved = result.data.getUserByUsername.user.saved_playlists\r\n            let favorite = false \r\n            saved.forEach(playlist => {\r\n                if (playlist.playlist_id === this.state.playlist._id)\r\n                   favorite = true \r\n            })\r\n\r\n            this.setState({favorited : favorite, loading: false })\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n     }\r\n    render() { \r\n        if (this.state.loading)\r\n            return (<> </>)\r\n        return (\r\n            <div>\r\n                <div className='card z-depth-0 text search_card'  >\r\n                    <div className=\"card-content col s1\" onClick={this.toPlaylist}>\r\n                        <img alt = \"playlist_img\" src={this.state.playlist.playlist_img} class=\"song_picture\"></img>\r\n                    </div>\r\n                    <div className='card-content col s3 playlist-button' onClick={this.toPlaylist}>\r\n                        <button><span className='card-title'>{this.state.playlist.name}</span></button>\r\n                        </div>\r\n                    <div className='card-content col s3' onClick={this.toPlaylist}> \r\n                        <span className='card-title'>{this.state.playlist.username}</span>\r\n                    </div>\r\n                    <div className='card-content col s1' onClick={this.toPlaylist}>\r\n                        <span className='card-title'>{this.state.playlist.likes}</span>\r\n                    </div>\r\n                    <div className='card-content col s3'>\r\n                        <span className='card-title'>\r\n                            {this.state.playlist.songs.length} {this.state.playlist.songs.length === 1 ? \"Song\" : \"Songs\"}\r\n                        </span>\r\n                        <span className='card-title'>\r\n                            {this.state.playlist.total_duration < 3600 ? \"0 hr \" + (this.state.playlist.total_duration < 600 ? \"0\" + Math.floor(this.state.playlist.total_duration/60) + \" min\": Math.floor(this.state.playlist.total_duration/60) + \" min\") :\r\n                            (Math.floor(this.state.playlist.total_duration/3600) + \" hr \" + (this.state.playlist.total_duration%3600 < 600 ? \"0\" + Math.floor(this.state.playlist.total_duration/60) + \" min\": Math.floor(this.state.playlist.total_duration/60) + \" min\"))}\r\n                        </span>\r\n                    </div>\r\n                    \r\n                {\r\n                    this.props.sessionUser !== this.state.playlist.username ? \r\n                    <>\r\n                    {!this.state.favorited?\r\n                        <div className='card-content col s2 '>\r\n                            <IconButton onClick = {this.handleFavorite}>\r\n                                <BookmarkBorderIcon fontSize=\"large\" />\r\n                            </IconButton>\r\n                        </div>\r\n                        : \r\n                        <div className='card-content col s2 '>\r\n                            <IconButton >\r\n                                <BookmarkIcon fontSize=\"large\" />\r\n                            </IconButton>\r\n                        </div>\r\n\r\n                    }\r\n                        </>\r\n                    : <div className='card-content col s3 '>\r\n                        \r\n                        </div>\r\n                }\r\n                    \r\n                  \r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Go to the playlist \r\n    toPlaylist = () => {\r\n        this.props.history.push('/' +  this.state.playlist.username + \"/mixtape=\" + this.state.playlist._id)\r\n    }\r\n\r\n    // Add the playlist into the user's saved playlist \r\n    handleFavorite = () => {\r\n        let requestBody = {\r\n            query: `\r\n                mutation { \r\n                    addSavedPlaylist(username: \"${this.props.sessionUser}\", playlist_id: \"${this.state.playlist._id}\", name: \"${this.state.playlist.name}\"){\r\n                            _id\r\n                            name\r\n                            username\r\n                            songs {\r\n                                song_id\r\n                                name\r\n                            }\r\n                    }\r\n                }\r\n            `\r\n        }\r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n            console.log(data)\r\n                this.setState({favorited:true})\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n\r\n    }\r\n}\r\n \r\nexport default PlaylistCard;","import React, { Component } from 'react'\r\nimport { BsChevronDown } from 'react-icons/bs'\r\nimport SearchListCard from './SearchListCard'\r\n\r\nclass ArtistCard extends Component {\r\n    state = {  \r\n        loading: true,\r\n        songs: null,\r\n        showSongs:false\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        let requestBody = { artist: this.props.item.name}\r\n        fetch(\"https://easytunes.herokuapp.com/v1/artist-tracks/\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }})\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n\r\n                this.setState({loading: false, songs: data.tracks})\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n    handleClick = () => {\r\n\r\n        this.setState({showSongs : !this.state.showSongs}, function() {console.log(this.state)})\r\n    }\r\n    render() { \r\n       \r\n        return (  \r\n            <div>\r\n            <div className='card z-depth-0 text search_card' onClick = {this.handleClick}>\r\n                <div className='card-content col s3'>\r\n                    {this.props.item.images[0] ? <img alt = \"\" src={this.props.item.images[0].url} class=\"artist_picture\"></img> : <img alt = \"\" src='https://cdn3.iconfinder.com/data/icons/social-media-circle-flat-1/1024/itunes-01-01-512.png' class=\"artist_picture\"></img>}\r\n                </div>\r\n                <div className='card-content col s3'>\r\n                    <span className='card-title'>{this.props.item.name}</span>\r\n                </div>\r\n                \r\n                <div className='card-content col s3'>\r\n                    <BsChevronDown  size={24}/>\r\n                </div>\r\n                \r\n            </div>\r\n            {this.state.showSongs ? \r\n                <div style={{marginLeft: \"30px\"}}>\r\n                    {\r\n                    this.state.songs.items.map(song => {\r\n                        return <SearchListCard  key = {song.id} item={song} type=\"track\"  username={this.props.username} history = {this.props.history} />\r\n                    })\r\n                }\r\n                </div>\r\n                : \r\n                null\r\n            }\r\n        </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default ArtistCard;","import React, { Component } from 'react'\r\nimport {withStyles} from '@material-ui/core/styles'\r\nimport AddSong from './AddSongs'\r\nimport {FaRegPlayCircle, FaRegPauseCircle} from 'react-icons/fa'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nconst useStyle = theme => ({\r\n    \r\n    playButton : {\r\n        '&:hover' :{\r\n            outline: \"none\"\r\n        },\r\n        '&:focus': {\r\n            outline: \"none\"\r\n        }\r\n    }\r\n})\r\nclass SongCard extends Component {\r\n    state = {\r\n        item : this.props.item\r\n    }\r\n        // Converts length og song into minutes \r\n        millisToSeconds(millis) {\r\n            const seconds = Math.floor(millis/1000);\r\n            return seconds\r\n        }\r\n        handleSongPlay = async () => {\r\n            if (this.play){\r\n                this.props.onPlaylistChange(false)\r\n            }\r\n            else{\r\n                console.log(\"Change playlist\")\r\n                console.log(this.props)\r\n                let song = this.state.item \r\n                song[\"song_id\"] = song._id\r\n                this.props.onPlaylistChange(null, song)\r\n            }\r\n                \r\n                \r\n        }\r\n        \r\n    render() { \r\n        const {classes} = this.props\r\n        const artists = this.state.item.artists\r\n\r\n        let artistNames = \"\"\r\n        artists.forEach(artist => {\r\n            artistNames = artistNames + artist.name + \" \"\r\n\r\n        })\r\n       // console.log(this.props)\r\n        const songLength = this.millisToSeconds(this.state.item.duration_ms)\r\n        return (  \r\n            <div>\r\n                <div className='row card z-depth-0 text search_card'>\r\n                <div className='card-content col s1'>\r\n                        {this.state.item.album.images[0] ? <img alt = \"song_image\" src={this.state.item.album.images[0].url} class=\"song_picture\"></img> : <img alt = \"song_image\" src='https://cdn3.iconfinder.com/data/icons/social-media-circle-flat-1/1024/itunes-01-01-512.png' class=\"song_picture\"></img>}\r\n                    </div>\r\n                    <div className='card-content col s5'>\r\n                        <span className='card-title'>{this.state.item.name}</span>\r\n                    </div>\r\n                    <div className='card-content col s4'>\r\n                        <span className='card-title'>{artistNames}</span>\r\n                    </div>\r\n                    <div className='card-content col s1'>\r\n                        <span className='card-title'>{songLength < 60 ? \"0:\" + (songLength < 10 ? \"0\" + songLength: songLength) :\r\n                (Math.floor(songLength/60) + \":\" + (songLength%60 < 10 ? \"0\" + songLength%60 : songLength%60))}</span>\r\n                    </div>\r\n                    <div className=\"card-content col s1\">\r\n                        <IconButton className = {classes.playButton}>\r\n                        {this.props.current_song && this.props.current_song.song_id === this.state.item._id && this.props.play?\r\n                            <FaRegPauseCircle size = {28} onClick = {this.handleSongPlay} /> : \r\n                            <FaRegPlayCircle size = {28} onClick = {this.handleSongPlay}/>\r\n                        }\r\n                        </IconButton>\r\n                    </div>\r\n                    <div className='card-content col s1 '>\r\n                        {/* <button className=\"btn-floating red button\" onClick={this.handleFavorite}><i className='material-icons'>favorite</i></button> */}\r\n                        <AddSong username ={this.props.username} song = {this.state.item}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default withStyles(useStyle)(SongCard);","/** SEARCH LIST CARD \r\n * Component withing Search List \r\n * Handles displaying one search result \r\n**/\r\n\r\nimport React, { Component } from 'react'\r\nimport './Search.css'\r\nimport AddSong from './AddSongs'\r\nimport UserCard from './UserCard'\r\nimport PlaylistCard from './PlaylistCard'\r\nimport ArtistCard from './ArtistCard'\r\n\r\nimport {withStyles} from '@material-ui/core/styles'\r\nimport SongCard from './SongCard'\r\n\r\nconst useStyle = theme => ({\r\n\r\n})\r\nclass SearchListCard extends Component {\r\n    state = {\r\n        item : this.props.item,\r\n        type : this.props.type,\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <>\r\n            {this.state.type === \"track\" ? \r\n            <SongCard \r\n            item = {this.state.item}  \r\n            username={this.props.username} \r\n            history = {this.props.history}\r\n            play = {this.props.play} \r\n            onPlayChange = {this.props.onPlayChange} \r\n            onPlaylistChange = {this.props.onPlaylistChange}\r\n            onSongChange = {this.props.onSongChange}\r\n            onShuffleChange = {this.onShuffleChange}\r\n            playlist = {this.props.uris}\r\n            current_song = {this.props.current_song}\r\n            access_token = {this.props.access_token}\r\n            offset = {this.props.offset}\r\n            shuffle= {this.props.shuffle}\r\n            shufflePlaylist = {this.props.shufflePlaylist}\r\n            needsUpdate = {this.props.needsUpdate}\r\n            updated = {this.props.updated}\r\n            canUpdate = {this.props.canUpdate}\r\n        />\r\n            : \r\n            this.state.type === \"artist\" ? \r\n                <ArtistCard \r\n                item = {this.state.item}  \r\n                username={this.props.username} \r\n                history = {this.props.history}\r\n                play = {this.props.play} \r\n                onPlayChange = {this.props.onPlayChange} \r\n                onPlaylistChange = {this.props.onPlaylistChange}\r\n                onSongChange = {this.props.onSongChange}\r\n                onShuffleChange = {this.onShuffleChange}\r\n                playlist = {this.props.uris}\r\n                current_song = {this.props.current_song}\r\n                access_token = {this.props.access_token}\r\n                offset = {this.props.offset}\r\n                shuffle= {this.props.shuffle}\r\n                shufflePlaylist = {this.props.shufflePlaylist}\r\n                needsUpdate = {this.props.needsUpdate}\r\n                updated = {this.props.updated}\r\n                canUpdate = {this.props.canUpdate}\r\n            />\r\n            : \r\n            this.state.type === \"playlist\" ? <PlaylistCard playlist = {this.state.item} sessionUser = {this.props.username} history = {this.props.history}/>:\r\n            <UserCard user = {this.state.item} sessionUser = {this.props.username} history = {this.props.history}/>}\r\n            </>\r\n        )\r\n    }\r\n\r\n    handleSongPlay = () => {\r\n        console.log(this.props)\r\n    }\r\n\r\n \r\n\r\n}\r\n    \r\nexport default withStyles(useStyle)(SearchListCard);","/** SEARCH LIST \r\n * Component used within Search Screen \r\n * Used to handle display the list of search results \r\n */\r\n\r\nimport React, { Component } from 'react'\r\nimport SearchListCard from './SearchListCard.js'\r\n\r\n\r\nclass SearchList extends Component {\r\n\r\n    \r\n    render() {\r\n\r\n        const items = this.props.searchList;\r\n        const tracks = items.songs\r\n        const artists = items.artists\r\n        const users = items.users\r\n        const playlists = items.playlists\r\n        \r\n        return (\r\n            <div className='section'>\r\n                {/* Display the tracks */}\r\n                {tracks ? \r\n                    <>\r\n                    <div className=\"row\">\r\n                        <h3 className=\"col s1\">Songs</h3>\r\n                    </div>\r\n                    <div className='row'>\r\n                        <div className='col s3'></div>\r\n                        <div className='col s3'>Song</div>\r\n                        <div className='col s3'>Artist</div>\r\n                        <div className='col s3'>Duration</div>\r\n                        <div className='col s3'></div>\r\n                    </div>\r\n                    {tracks && tracks.map(function(item) {\r\n                        return (\r\n                            <SearchListCard key = {item.id} item={item} type=\"track\" username = {this.props.username} history = {this.props.history}\r\n                            play = {this.props.play} \r\n                            onPlayChange = {this.props.onPlayChange} \r\n                            onPlaylistChange = {this.props.onPlaylistChange}\r\n                            onSongChange = {this.props.onSongChange}\r\n                            onShuffleChange = {this.props.onShuffleChange}\r\n                            playlist = {this.props.uris}\r\n                            current_song = {this.props.current_song}\r\n                            access_token = {this.props.access_token}\r\n                            offset = {this.props.offset}\r\n                            shuffle= {this.props.shuffle}\r\n                            shufflePlaylist = {this.props.shufflePlaylist}\r\n                            needsUpdate = {this.props.needsUpdate}\r\n                            updated = {this.props.updated}\r\n                            canUpdate = {this.props.canUpdate}/>\r\n                        );}, this)\r\n                    }\r\n                    </>\r\n                    : null\r\n                }\r\n\r\n                {/* Display the artists */}\r\n                {artists ? \r\n                <>\r\n                <div className='row'>\r\n                        <div className='col s3'>Artists</div>\r\n                    </div>\r\n                    {artists && artists.map(function(item) {\r\n                    return (\r\n                        <SearchListCard key = {item.id} item={item} type=\"artist\" username = {this.props.username} history = {this.props.history}\r\n                        play = {this.props.play} \r\n                            onPlayChange = {this.props.onPlayChange} \r\n                            onPlaylistChange = {this.props.onPlaylistChange}\r\n                            onSongChange = {this.props.onSongChange}\r\n                            onShuffleChange = {this.props.onShuffleChange}\r\n                            playlist = {this.props.uris}\r\n                            current_song = {this.props.current_song}\r\n                            access_token = {this.props.access_token}\r\n                            offset = {this.props.offset}\r\n                            shuffle= {this.props.shuffle}\r\n                            shufflePlaylist = {this.props.shufflePlaylist}\r\n                            needsUpdate = {this.props.needsUpdate}\r\n                            updated = {this.props.updated}\r\n                            canUpdate = {this.props.canUpdate}/>\r\n                    );} ,this)\r\n                     }\r\n                \r\n                </>\r\n                :\r\n                null\r\n                }\r\n\r\n                {/* Display the playlists */}\r\n                {\r\n                    playlists ? \r\n                    <>\r\n                    <div className=\"row\">\r\n                        <h3 className=\"col s1\">Mixtapes</h3>\r\n                    </div>\r\n                    <div className='row'>\r\n                        <div className='col s1'></div>\r\n                        <div className='col s3'>Name</div>\r\n                        <div className='col s3'>Username</div>\r\n                        <div className='col s1'>Likes</div>\r\n                        <div className='col s3'>Songs</div>\r\n                        <div className='col s3'></div>\r\n                    </div>\r\n                    {playlists && playlists.map(function(item) {\r\n                        console.log(item)\r\n                    return (\r\n                        <SearchListCard key = {item._id} item={item} type=\"playlist\" username = {this.props.username} history = {this.props.history}\r\n                        play = {this.props.play} \r\n                            onPlayChange = {this.props.onPlayChange} \r\n                            onPlaylistChange = {this.props.onPlaylistChange}\r\n                            onSongChange = {this.props.onSongChange}\r\n                            onShuffleChange = {this.props.onShuffleChange}\r\n                            playlist = {this.props.uris}\r\n                            current_song = {this.props.current_song}\r\n                            access_token = {this.props.access_token}\r\n                            offset = {this.props.offset}\r\n                            shuffle= {this.props.shuffle}\r\n                            shufflePlaylist = {this.props.shufflePlaylist}\r\n                            needsUpdate = {this.props.needsUpdate}\r\n                            updated = {this.props.updated}\r\n                            canUpdate = {this.props.canUpdate}/>\r\n                    );},this)\r\n                    }\r\n                    </> : \r\n                    null\r\n                }\r\n\r\n                {/* Display the Users */}\r\n                {users ? \r\n                <>\r\n                <div className=\"row\">\r\n                        <h3 className=\"col s1\">Users</h3>\r\n                    </div>\r\n                    <div className='row'>\r\n                        <div className='col s3'></div>\r\n                        <div className='col s3'>User</div>\r\n                        <div className='col s3'>Followers</div>\r\n                        <div className='col s3'>Playlists</div>\r\n                        <div className='col s3'></div>\r\n                    </div>\r\n                    {users && users.map(function(item) {\r\n                    return (\r\n                        <SearchListCard \r\n                            key = {item.user._id} \r\n                            item={item} \r\n                            type=\"user\" \r\n                            username = {this.props.username} \r\n                            history = {this.props.history}\r\n                            play = {this.props.play} \r\n                            onPlayChange = {this.props.onPlayChange} \r\n                            onPlaylistChange = {this.props.onPlaylistChange}\r\n                            onSongChange = {this.props.onSongChange}\r\n                            onShuffleChange = {this.props.onShuffleChange}\r\n                            playlist = {this.props.uris}\r\n                            current_song = {this.props.current_song}\r\n                            access_token = {this.props.access_token}\r\n                            offset = {this.props.offset}\r\n                            shuffle= {this.props.shuffle}\r\n                            shufflePlaylist = {this.props.shufflePlaylist}\r\n                            needsUpdate = {this.props.needsUpdate}\r\n                            updated = {this.props.updated}\r\n                            canUpdate = {this.props.canUpdate}\r\n                        />\r\n                    );},this)\r\n                    }\r\n                </>\r\n                :\r\n                null\r\n                }\r\n\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n// const mapStateToProps = (state, ownProps) => {\r\n//     const searchList = ownProps.searchList;\r\n//     return {\r\n\r\n//     };\r\n// }\r\nexport default SearchList;","/** SEARCH SCREEN \r\n * Handles retrieving and getting search results   \r\n **/\r\n\r\nimport React, { Component } from 'react'\r\nimport SearchList from './SearchList.js'\r\nclass SearchScreen extends Component {\r\n\r\n    state = {\r\n        searchQuery : this.props.match.params.query,\r\n        searchResults : {},\r\n        searchType : this.props.match.params.type,\r\n        username: this.props.username,\r\n        loading : false,\r\n    }\r\n\r\n    // Fetch Search Results from database \r\n    fetchData = (requestBody, type, url, last) => {\r\n        fetch(url, {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }})\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n                console.log(data)\r\n                let searchRes = this.state.searchResults \r\n                if (type === 'artists')\r\n                    searchRes[type] = data.artists.items \r\n                else if (type === 'songs')\r\n                    searchRes[type] = data.tracks.items \r\n                else if (type === 'users')\r\n                    searchRes[type] = data.data.searchUsers\r\n                else if (type === 'playlists')\r\n                    searchRes[type] = data.data.searchPlaylists\r\n                this.setState({searchResults : searchRes})\r\n\r\n                if (last)\r\n                    this.setState({loading: false})\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    // Handle getting search results for players \r\n    fetchPlaylists = (last, query) => {\r\n        const requestBody = {\r\n            query: `\r\n                query {\r\n                    searchPlaylists(name :\"${query}\"){\r\n                        _id \r\n                        name \r\n                        username\r\n                        likes\r\n                        total_duration \r\n                        playlist_img\r\n                        songs {\r\n                            song_id \r\n                            name\r\n                        }\r\n                    }\r\n                }\r\n            `\r\n        }\r\n        this.fetchData(requestBody, 'playlists', 'https://easytunes.herokuapp.com/graphql', last)\r\n    }\r\n\r\n    // Handle getting search results for users \r\n    fetchUsers = (last, query) => {\r\n        console.log(query)\r\n        let requestBody = {\r\n            query: `\r\n                query {\r\n                    searchUsers(username: \"${query}\"){\r\n                        user {\r\n                            _id\r\n                            username\r\n                            profile_img\r\n                            followers {\r\n                                user_id\r\n                                username\r\n                            }\r\n                            follow_requests {\r\n                                user_id \r\n                                username\r\n                                profile_img\r\n                            }\r\n                        }\r\n                        playlists {\r\n                            _id\r\n                            name\r\n                        }\r\n                    }\r\n                }\r\n                `\r\n            }\r\n        this.fetchData(requestBody, 'users', 'https://easytunes.herokuapp.com/graphql', last)\r\n    }\r\n\r\n    // Handle getting songs and artists search results \r\n    fetchSpotify = (type, query, last) => {\r\n   \r\n        let requestBody;\r\n        if (type === 'artists')\r\n            requestBody = { artist: query}\r\n        else \r\n            requestBody = { track: query}\r\n            \r\n        this.fetchData(requestBody, type, 'https://easytunes.herokuapp.com/v1/search?', last)\r\n    }\r\n\r\n    // Updates the search page if the user searches for something else \r\n    componentDidUpdate = () => {   \r\n        // Update if there is a change in search \r\n        if (this.state.searchType !== this.props.match.params.type || this.state.searchQuery !== this.props.match.params.query){\r\n            this.setState({\r\n                searchType : this.props.match.params.type,\r\n                searchQuery : this.props.match.params.query,\r\n                loading: true,\r\n                searchResults: {}\r\n            }, () => {\r\n                const type = this.state.searchType;\r\n                const query = this.state.searchQuery;\r\n                // console.log(type, query, this.state.loading, this.props.match.params.type, this.props.match.params.query)\r\n                if (type === 'artists' || type === 'songs')\r\n                this.fetchSpotify(type,query, true)    \r\n                else if (type === 'users')\r\n                    this.fetchUsers(true, query)\r\n                else if (type === 'mixtapes')\r\n                    this.fetchPlaylists(true, query)\r\n                else if (type === 'all' ){\r\n                    this.fetchSpotify('artists',query, false) \r\n                    this.fetchSpotify('songs',query, false)\r\n                    this.fetchUsers(false, query)\r\n                    this.fetchPlaylists(true, query)   \r\n                }\r\n            })\r\n\r\n            \r\n        }\r\n    }\r\n\r\n    // Handles the search page when the user first enters \r\n    componentDidMount = () => {\r\n\r\n        if (!this.props.username)\r\n            this.props.history.push('/login')\r\n        if (!this.state.loading){\r\n           \r\n            this.setState({loading: true})\r\n            const type = this.state.searchType;\r\n            const query = this.state.searchQuery;\r\n            console.log(type)\r\n            if (type === 'artists' || type === 'songs')\r\n            this.fetchSpotify(type, query, true)    \r\n            else if (type === 'users')\r\n                this.fetchUsers(true, query)\r\n            else if (type === 'mixtapes')\r\n                this.fetchPlaylists(true, query)\r\n            else if (type === 'all' ){\r\n                this.fetchSpotify('artists', query, false) \r\n                this.fetchSpotify('songs', query, false)\r\n                this.fetchUsers(false, query)\r\n                this.fetchPlaylists(true, query)   \r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    render() {\r\n        \r\n          \r\n        if (this.state.loading)\r\n            return (<> </>)\r\n\r\n        return (\r\n            <>\r\n\r\n            <div className=\"container navy search-results-container\" style={{paddingBotton: \"50px\"}}>\r\n                <div className=\"row\">\r\n                    <h2 className=\"col s1\">Results</h2>\r\n                </div>\r\n                <SearchList \r\n                    searchList={this.state.searchResults} \r\n                    username={this.state.username} \r\n                    history = {this.props.history}\r\n                    play = {this.props.play} \r\n                    onPlayChange = {this.props.onPlayChange} \r\n                    onPlaylistChange = {this.props.onPlaylistChange}\r\n                    onSongChange = {this.props.onSongChange}\r\n                    onShuffleChange = {this.onShuffleChange}\r\n                    playlist = {this.props.uris}\r\n                    current_song = {this.props.current_song}\r\n                    access_token = {this.props.access_token}\r\n                    offset = {this.props.offset}\r\n                    shuffle= {this.props.shuffle}\r\n                    shufflePlaylist = {this.props.shufflePlaylist}\r\n                    needsUpdate = {this.props.needsUpdate}\r\n                    updated = {this.props.updated}\r\n                    canUpdate = {this.props.canUpdate}\r\n                />\r\n                <div className = \"row blank-space\"> </div>\r\n            </div> \r\n            {/* <PlaylistNavbar/> */}\r\n            </>\r\n        );\r\n    }\r\n}\r\n// const mapStateToProps = (state, ownProps) => {\r\n//     const searchList = ownProps.searchList;\r\n//     return {\r\n\r\n//     };\r\n//}\r\nexport default SearchScreen;","/** FOLLOWER\r\n * Handles displaing one follower\r\n */\r\n\r\nimport React, { Component } from 'react'\r\nimport {RiUserUnfollowLine} from 'react-icons/ri'\r\nclass Follower extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.updateFollowers= this.props.updateFollowers\r\n    }\r\n    state = { follower : this.props.follower, username : this.props.username , history: this.props.history}\r\n    render() { \r\n        if (this.state.loading)\r\n        return (<> </>)\r\n    function User ({username, history}){\r\n\r\n        function toUser(){\r\n            history.push('/' + username)\r\n        }\r\n        \r\n        return (\r\n            <button className = \"user-btn\" onClick = {toUser}>{username}</button>\r\n        )\r\n    }\r\n        return (  \r\n            <div className=\"follower-row\">\r\n                    <div className=\"col\">\r\n                        <img alt=\"\" src={this.state.follower.profile_img} class=\"user_icon\"></img>\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        {/* <button onClick = {toUser}>{follower.username}</button> */}\r\n                        <User username = {this.state.follower.username} history = {this.state.history}/>\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <button className=\"unfollow-btn\" onClick = {this.removeFollower}>Remove<RiUserUnfollowLine/></button>\r\n                    </div>\r\n                    \r\n            </div>\r\n        );\r\n    }\r\n\r\n    removeFollower = () =>{\r\n        console.log(this.state.followers)\r\n        let requestBody = {\r\n            query: `\r\n                mutation{\r\n                    removeFollower(username: \"${this.state.username}\", follower_id: \"${this.state.follower.user_id}\"){\r\n                   \r\n                            _id\r\n                            followers {\r\n                                user_id\r\n                                username\r\n                            }\r\n                        \r\n                    }\r\n                }\r\n            `\r\n        }\r\n        \r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n                console.log(data)\r\n                this.updateFollowers(data.data.removeFollower.followers)\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n}\r\n \r\nexport default Follower;","/** FOLLOWERS \r\n * Handles displaying the list of followers \r\n */\r\n\r\nimport React, { Component } from 'react'\r\n\r\nimport Follower from './Follower'\r\nclass Followers extends Component {\r\n    state = { \r\n        followers: null,\r\n        username: this.props.username,\r\n        loading: true\r\n     }\r\n     getFollowers = () => {\r\n        this.setState({loading: true})\r\n        let requestBody = {\r\n            query: `\r\n                query {\r\n                    getUserByUsername(username: \"${this.state.username}\"){\r\n                        user {\r\n                            _id\r\n                            followers {\r\n                                user_id\r\n                                username\r\n                                profile_img\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            `\r\n        }\r\n\r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n\r\n                this.setState({\r\n                    followers: data.data.getUserByUsername.user.followers,\r\n                    loading: false\r\n                })\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    componentDidMount = () => {\r\n       this.getFollowers()\r\n    }\r\n\r\n    render() { \r\n        if (this.state.loading)\r\n            return (<> </>)\r\n        let followers = this.state.followers.map(function(follower) {\r\n            return (\r\n                <Follower key = {follower.user_id} follower= {follower} username = {this.state.username} history = {this.props.history} updateFollowers = {this.updateFollowers}/>\r\n            )\r\n        }, this)\r\n\r\n        return (\r\n            <>\r\n            {followers}\r\n            </>\r\n        );\r\n    }\r\n\r\n    updateFollowers = (followers) => {\r\n        this.setState({followers : followers})\r\n    }\r\n}\r\n \r\nexport default Followers;","/** FOLLOWING USER\r\n * Handles displaying one user that's being followed\r\n*/\r\nimport React, { Component } from 'react'\r\nimport {RiUserUnfollowLine} from 'react-icons/ri'\r\nclass FollowingUser extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.updateFollowing= this.props.updateFollowing\r\n    }\r\n    state = { following : this.props.following, username : this.props.username , history: this.props.history}\r\n    render() { \r\n        function User ({username, history}){\r\n\r\n            function toUser(){\r\n                history.push('/' + username)\r\n            }\r\n            \r\n            return (\r\n                <button className = \"user-btn\" onClick = {toUser}>{username}</button>\r\n            )\r\n        }\r\n        return (  \r\n            <div className=\"follower-row\">\r\n                    <div className=\"col\">\r\n                        <img alt=\"\" src={this.state.following.profile_img} class=\"user_icon\"></img>\r\n                    </div>\r\n                    <div className=\"col\">\r\n                      <User username = {this.state.following.username} history ={this.props.history} />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <button className=\"unfollow-btn\" onClick = {this.unFollow}> Unfollow </button>\r\n                    </div>\r\n                    \r\n                </div>\r\n        );\r\n    }\r\n\r\n    unFollow = () =>{\r\n        console.log(this.state.following)\r\n        let requestBody = {\r\n            query: `\r\n                mutation{\r\n                    unFollow(username: \"${this.state.username}\", following_id: \"${this.state.following.user_id}\"){\r\n                   \r\n                            _id\r\n                            following {\r\n                                user_id\r\n                                username\r\n                            }\r\n                        \r\n                    }\r\n                }\r\n            `\r\n        }\r\n        \r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n                console.log(data)\r\n                this.updateFollowing(data.data.unFollow.following)\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n}\r\n \r\nexport default FollowingUser;","/** FOLLOWING\r\n * Handles displaying the list of following \r\n */\r\n\r\nimport React, { Component } from 'react'\r\n\r\n// import {RiUserUnfollowLine} from 'react-icons/ri'\r\nimport FollowingUser from './FollowingUser'\r\nclass Following extends Component {\r\n    state = { \r\n        following: null,\r\n        username: this.props.username,\r\n        loading: true\r\n     }\r\n     getFollowing = () => {\r\n\r\n        this.setState({loading: true})\r\n        let requestBody = {\r\n            query: `\r\n                query {\r\n                    getUserByUsername(username: \"${this.state.username}\"){\r\n                        user {\r\n                            _id\r\n                            following {\r\n                                user_id\r\n                                username\r\n                                profile_img\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            `\r\n        }\r\n\r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n                this.setState({\r\n                    following: data.data.getUserByUsername.user.following,\r\n                    loading: false\r\n                })\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    componentDidMount = () => {\r\n       this.getFollowing()\r\n    }\r\n    render() { \r\n        if (this.state.loading)\r\n            return (<> </>)\r\n\r\n        let followings = this.state.following.map(function(following) {\r\n            return (\r\n                <FollowingUser key = {following.user_id} following= {following} username = {this.state.username} history = {this.props.history} updateFollowing = {this.updateFollowing}/>\r\n            )\r\n        }, this)\r\n\r\n        return (\r\n            <>\r\n            {followings}\r\n            </>\r\n        );\r\n    }\r\n\r\n    updateFollowing = (following)=>{\r\n        this.setState({following: following})\r\n    }\r\n}\r\n \r\nexport default Following;","/** REQUEST\r\n * Handles one user request\r\n */\r\nimport React, { Component } from 'react'\r\nimport {RiUserAddLine} from 'react-icons/ri'\r\n\r\nclass Request extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.updateRequests = this.props.updateRequests\r\n    }\r\n    state = { request : this.props.request, username : this.props.username , history: this.props.history}\r\n    render() { \r\n\r\n        function User ({username, history}){\r\n\r\n            function toUser(){\r\n                console.log(history)\r\n                history.push('/' + username)\r\n            }\r\n            \r\n            return (\r\n                <button className = \"user-btn\" onClick = {toUser}> {username}</button>\r\n            )\r\n        }\r\n        console.log(this.props)\r\n        return (  \r\n            <div className=\"follower-row\">\r\n                <div className=\"col\">\r\n                    <img alt=\"\" src={this.state.request.profile_img} class=\"user_icon\"></img>\r\n                </div>\r\n                <div className=\"col\">\r\n                <User username = {this.state.request.username} history = {this.state.history}/>\r\n                </div>\r\n                <div className=\"col\">\r\n                    <button className=\"unfollow-btn\" onClick = {this.acceptRequest}> Accept </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    acceptRequest = () =>{\r\n        console.log(this.state.request)\r\n        let requestBody = {\r\n            query: `\r\n                mutation{\r\n                    addFollower(username: \"${this.state.username}\", request_id: \"${this.state.request.user_id}\", profile_img: \"${this.state.request.profile_img}\"){\r\n                            _id\r\n                            follow_requests {\r\n                                user_id\r\n                                username\r\n                                profile_img\r\n                            }\r\n                        \r\n                    }\r\n                }\r\n            `\r\n        }\r\n        \r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n                console.log(data)\r\n                this.updateRequests(data.data.addFollower.follow_requests)\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n}\r\n \r\nexport default Request;","/** REQUESTS\r\n * Handles displaing list of requests\r\n */\r\n\r\nimport React, { Component } from 'react'\r\nimport Request from './Request'\r\n\r\nclass Requests extends Component {\r\n    state = { \r\n        requests: null,\r\n        username: this.props.username,\r\n        loading: true\r\n     }\r\n\r\n     getRequests = () => {\r\n        this.setState({loading: true})\r\n        let requestBody = {\r\n            query: `\r\n                query {\r\n                    getUserByUsername(username: \"${this.state.username}\"){\r\n                        user {\r\n                            _id\r\n                            follow_requests {\r\n                                user_id\r\n                                username\r\n                                profile_img\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            `\r\n        }\r\n\r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n                this.setState({\r\n                    requests: data.data.getUserByUsername.user.follow_requests,\r\n                    loading: false\r\n                })\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    componentDidMount = () => {\r\n       this.getRequests()\r\n    }\r\n\r\n    render() { \r\n        if(this.state.loading)\r\n            return(<> </>)\r\n        let requests= this.state.requests.map(function(request) {\r\n            return (\r\n                <Request key = {request.user_id} request= {request} username = {this.state.username} history = {this.props.history} updateRequests = {this.updateRequests}/>\r\n            )\r\n        }, this)\r\n\r\n        return (\r\n            <>\r\n            {requests}\r\n            </>\r\n        );\r\n    }\r\n\r\n    updateRequests = (requests) => {\r\n        this.setState({requests: requests})\r\n    }\r\n}\r\n \r\nexport default Requests;","/** FOLLOWNG PAGE\r\n * Handles displaying Followers, Following, and Requests \r\n */\r\n\r\nimport React, { Component } from 'react'\r\nimport Followers from './Followers'\r\nimport Following from './Following'\r\nimport Requests from './Requests'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Container from '@material-ui/core/Container'\r\nimport Button from '@material-ui/core/Button'\r\nimport {withStyles} from '@material-ui/core/styles'\r\nimport './Follows.css'\r\n\r\nconst useStyle = theme => ({\r\n    buttonFocus : {\r\n        borderRadius: \"0\",\r\n        width: \"100%\",\r\n        strokeLinecap: \"round\",\r\n        border: \"none\",\r\n        '&:focus' :{\r\n            outline: \"none\"\r\n        },\r\n        borderBottom : \"2px solid #004CB2\",\r\n        fontWeight: \"bold\"\r\n    },\r\n    buttonNotFocus :{\r\n        width: \"100%\",\r\n        border: \"none\",\r\n        '&:focus' :{\r\n            outline: \"none\"\r\n        },\r\n    },\r\n    container: {\r\n        padding : theme.spacing(0,0,0,0)\r\n    }\r\n})\r\nclass FollowingPage extends Component {\r\n\r\n    state = {  \r\n        showFollowers: true,\r\n        showFollowing: false,\r\n        showRequests: false,\r\n        user: null,\r\n        loading: true\r\n    }\r\n\r\n    // Gets the user \r\n    componentDidMount =() => {\r\n        if (!this.props.username)\r\n            this.props.history.push('/login')\r\n            \r\n        this.setState({loading: true})\r\n        let requestBody = {\r\n            query: `\r\n                query {\r\n                    getUserByUsername(username: \"${this.props.username}\"){\r\n                        user {\r\n                            _id\r\n                            username\r\n                            profile_img\r\n                            joined\r\n                        }\r\n                    }\r\n                }\r\n            `\r\n        }\r\n\r\n        fetch(\"https://easytunes.herokuapp.com/graphql\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201)\r\n                    throw new Error ('Failed')\r\n                return res.json()\r\n            })\r\n            .then(data => {\r\n                const location = this.props.history.location.pathname.split('/')[2]\r\n                const followers = location === \"followers\" \r\n                const following = location === \"following\" \r\n                const requests = location === \"requests\" \r\n                console.log(followers, following, requests)\r\n                this.setState({\r\n                    user : data.data.getUserByUsername.user,\r\n                    showFollowers: followers,\r\n                    showFollowing: following,\r\n                    showRequests: requests,\r\n                    loading: false ,\r\n                })\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    // Handle rendering followers, following, or requests \r\n    changeView = (event) => {\r\n        console.log(event.target)\r\n        if (event.currentTarget.id === 'followers-btn'){\r\n            this.setState({showFollowers : true, showFollowing:false, showRequests:false})\r\n            this.props.history.push('/' + this.state.user.username+ \"/followers\")\r\n        }\r\n        else if (event.currentTarget.id === 'following-btn'){\r\n            this.setState({showFollowers : false, showFollowing:true, showRequests:false})\r\n            this.props.history.push('/' + this.state.user.username + \"/following\")\r\n        }\r\n        else {\r\n            this.setState({showFollowers : false, showFollowing:false, showRequests:true})\r\n            this.props.history.push('/' + this.state.user.username + \"/requests\")\r\n        }       \r\n    }\r\n\r\n    // Get the user's account creation date \r\n    getAccountCreationDate = () => {\r\n        const user = this.state.user\r\n        const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n        const date = new Date(parseInt(user.joined))\r\n        return  months[date.getMonth()] + \" \" + date.getDate() + \", \" + date.getFullYear()\r\n\r\n    }\r\n    \r\n    render() { \r\n        if (this.state.loading)\r\n            return (<> </>)\r\n        const {classes} = this.props\r\n        return (  \r\n            <>\r\n                <div className=\"container-fluid followers-container\">\r\n                    {/* Home Button, Username, Account Icon */}\r\n\r\n                    <div className=\"container-fluid follow-data-container\">\r\n                        {/* Information Bar about the user */}\r\n\r\n                        <div className=\"information-row\">\r\n                            \r\n                            <div className=\"col text-center\">\r\n                                <div className=\"col\">\r\n                                    <img alt=\"\" src={this.state.user.profile_img} className=\"user_icon\"></img>\r\n                                </div>\r\n                                <h2>{this.state.user.username}                            \r\n                            \r\n\r\n                                </h2>\r\n                                    <h5> User Since: {this.getAccountCreationDate()}</h5>\r\n                            </div>\r\n                        </div>\r\n                     \r\n                        <div className=\"navigation-row\">\r\n                            <Container className = {classes.container}> \r\n                                <Grid container>\r\n                                    <Grid xs item align=\"center\">\r\n                                        <Button id = \"followers-btn\" onClick = {this.changeView} className = {this.state.showFollowers ? classes.buttonFocus : classes.buttonNotFocus}> \r\n                                            Followers\r\n                                        </Button>\r\n                                    </Grid>\r\n                                    <Grid xs item align=\"center\">\r\n                                        <Button id = \"following-btn\" onClick = {this.changeView} className = {this.state.showFollowing? classes.buttonFocus : classes.buttonNotFocus}> \r\n                                            Following\r\n                                        </Button>\r\n                                    </Grid>\r\n                                    <Grid xs item align=\"center\">\r\n                                        <Button id = \"requests-btn\" onClick = {this.changeView} className = {this.state.showRequests ? classes.buttonFocus : classes.buttonNotFocus}> \r\n                                            Requests\r\n                                        </Button>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </Container>\r\n                            {/* <div className=\"col\">\r\n                            <button id = \"followers-btn\" className = \"followers-btn\" onClick = {this.changeView} style = {{borderBottom : \"3px solid #faed26\", fontWeight : \"bold\"}}>  Followers </button>\r\n                            </div>\r\n\r\n                            <div className=\"col\">\r\n                                <button id = \"following-btn\" className = \"following-btn\" onClick = {this.changeView}> Following </button>\r\n                            </div>\r\n                            \r\n                            <div className=\"col\">\r\n                            <button id = \"requests-btn\" className = \"requests-btn\" onClick = {this.changeView}> Requests </button>\r\n                            </div> */}\r\n                        </div>\r\n\r\n                        {this.state.showFollowers ? <Followers username = {this.state.user.username} history = {this.props.history}/>: null}\r\n                        {this.state.showFollowing ? <Following username = {this.state.user.username} history = {this.props.history}/> : null}\r\n                        {this.state.showRequests ?  <Requests username = {this.state.user.username} history = {this.props.history}/> : null}\r\n                    </div>\r\n                    \r\n\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n \r\nexport default withStyles(useStyle)(FollowingPage);","/** UPDATE \r\n * Component within Account Setting \r\n * Used to handle updating email and username \r\n**/\r\n\r\nimport React, { Component } from 'react'\r\nimport {AiOutlineCheckCircle, AiOutlineCloseCircle} from 'react-icons/ai'\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport TextField from '@material-ui/core/TextField'\r\nclass Update extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.onChange = this.props.onChange\r\n        this.valueEl = React.createRef()\r\n    }\r\n    state = { \r\n        visible: false, \r\n        original: this.props.original,\r\n        new : this.props.original,\r\n        text: this.props.text,\r\n        error: \"\"\r\n     }\r\n\r\n    // Handle setting update box visible \r\n    setVisible = () => {\r\n        this.setState({visible : true})\r\n    }\r\n\r\n    // Handle setting update box invisible \r\n    setInvisible = () => {\r\n        this.setState({visible : false})\r\n    };\r\n\r\n    handleChange = (event) =>{\r\n        this.setState({new : event.target.value})\r\n    }\r\n    handleUpdate = () => {\r\n        let requestBody = \"\"\r\n        const value = this.valueEl.current.children[1].children[0].value.trim()\r\n        if (this.state.text === \"Update Email\"){\r\n            requestBody = {\r\n                query: `\r\n                    mutation{\r\n                        updateEmail(email: \"${this.state.original}\", new_email:\"${value}\"){\r\n                        _id\r\n                        email\r\n                        }\r\n                    }\r\n                `\r\n            }\r\n        }\r\n        else {\r\n            requestBody = {\r\n                query: `\r\n                    mutation{\r\n                        changeUsername(username: \"${this.state.original}\", new_username:\"${value}\"){\r\n                        _id\r\n                        email\r\n                        }\r\n                    }\r\n                `\r\n            }\r\n        }\r\n\r\n        fetch ('https://easytunes.herokuapp.com/graphql', {\r\n                method: 'POST',\r\n                body: JSON.stringify(requestBody),\r\n                headers: {\r\n                    'content-type': 'application/json'\r\n                }})\r\n                .then(res => {\r\n                   \r\n                    if (res.status !== 200 && res.status !== 201)\r\n                        throw new Error (res.body)\r\n                    else \r\n                        return res.json()\r\n                })\r\n                .then(data => {\r\n                    console.log(data)\r\n                    if (data.errors)\r\n                        throw new Error (data.errors[0].message)\r\n                   this.setInvisible()\r\n                   this.onChange(this.state.text, value)\r\n                   this.setState({original: value})\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                    this.setState({error: error.message})\r\n                })\r\n        \r\n    }\r\n\r\n    render() { \r\n        return (  \r\n            <>\r\n            <button className = \"user-settings-content-btn\" onClick = {this.setVisible}>{this.state.text}</button>   \r\n\r\n            {\r\n                this.state.visible ? \r\n                <Dialog\r\n                open={this.state.visible}\r\n                keepMounted\r\n                onClose={this.setInvisible}\r\n                aria-labelledby=\"alert-dialog-slide-title\"\r\n                aria-describedby=\"alert-dialog-slide-description\"\r\n   \r\n                fullWidth={true}\r\n                maxWidth = {'sm'}\r\n              >\r\n                        <DialogTitle id=\"alert-dialog-slide-title\">{this.state.text}</DialogTitle>\r\n                        <DialogContent>\r\n                            {this.state.error ?\r\n                                <DialogContentText> {this.state.error} </DialogContentText> : null\r\n        \r\n                            }\r\n                            <TextField\r\n                                autoFocus\r\n                                margin=\"dense\"\r\n                                id=\"name\"\r\n                                label=\"New Username\"\r\n                                type=\"text\"\r\n                                placeholder = {this.state.original}\r\n                                fullWidth\r\n                                ref = {this.valueEl}\r\n                            />\r\n\r\n                        </DialogContent>\r\n                        <DialogActions>\r\n                            <Button  onClick={this.handleUpdate} color=\"primary\" >\r\n                                Update\r\n                            </Button>\r\n                            <Button onClick={this.setInvisible} color=\"primary\"> \r\n                                Cancel\r\n                            </Button>\r\n                        </DialogActions>\r\n                        </Dialog>\r\n\r\n                :\r\n                null\r\n            }    \r\n        </>\r\n        );\r\n    }\r\n}\r\n \r\nexport default Update;","/** UPDATE PASSWORD\r\n * Component within Account Setting \r\n * Used to handle changing password\r\n **/\r\n\r\nimport React, { Component } from 'react'\r\nimport {AiOutlineCheckCircle, AiOutlineCloseCircle} from 'react-icons/ai'\r\nimport {withStyles} from '@material-ui/core/styles'\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport TextField from '@material-ui/core/TextField'\r\nconst useStyle = theme => ({\r\n    dialog :{\r\n        minWidth: \"300px\"\r\n    },\r\n})\r\nclass UpdatePassword extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.passwordEl = React.createRef()\r\n        this.confirmEl = React.createRef()\r\n    }\r\n    state = { \r\n        visible: false,\r\n        password: \"\",\r\n        confirm: \"\",\r\n        error : \"\"    \r\n    }\r\n\r\n    setVisible = () => {\r\n        this.setState({visible : true, password: \"\", confirm: \"\"})\r\n    }\r\n\r\n    setInvisible = () => {\r\n        this.setState({visible : false})\r\n    };\r\n\r\n    handlePassChange = (event) => {\r\n        this.setState({password: event.target.value})\r\n    }\r\n\r\n    handleConfChange = (event) => {\r\n        this.setState({confirm: event.target.value})\r\n    }\r\n\r\n    handleUpdate = () => {\r\n      console.log(this.props.username)\r\n      const password =  this.passwordEl.current.children[1].children[0].value.trim()\r\n      const confirm =  this.confirmEl.current.children[1].children[0].value.trim()\r\n        if (password !==confirm ){\r\n            this.setState({error: \"Passwords do not match\"})\r\n        }\r\n        else if (password === \"\")\r\n        this.setState({error: \"Enter a password\"})\r\n        else {\r\n            let requestBody = {\r\n                    query: `\r\n                        mutation{\r\n                            changePassword(username: \"${this.props.username}\", new_password:\"${password}\"){\r\n                            _id\r\n    \r\n                            }\r\n                        }\r\n                    `\r\n                }\r\n    \r\n            fetch ('https://easytunes.herokuapp.com/graphql', {\r\n                    method: 'POST',\r\n                    body: JSON.stringify(requestBody),\r\n                    headers: {\r\n                        'content-type': 'application/json'\r\n                    }})\r\n                    .then(res => {\r\n                    \r\n                        if (res.status !== 200 && res.status !== 201)\r\n                            throw new Error (res.body)\r\n                        else \r\n                            return res.json()\r\n                    })\r\n                    .then(data => {\r\n                        console.log(data)\r\n                        this.setState({visible: false})\r\n                    })\r\n                    .catch(error => {\r\n                        console.log(error)\r\n                        this.setState({error: error.message})\r\n                    })\r\n            }\r\n        \r\n    }\r\n    render() { \r\n        const {classes} = this.props\r\n        return (  \r\n            <>\r\n            <button className = \"user-settings-content-btn\" onClick = {this.setVisible}> Update Password </button>\r\n            {this.state.visible ? \r\n                <Dialog\r\n        open={this.state.visible}\r\n        keepMounted\r\n        onClose={this.setInvisible}\r\n        aria-labelledby=\"alert-dialog-slide-title\"\r\n        aria-describedby=\"alert-dialog-slide-description\"\r\n        className = {classes.dialog}\r\n        fullWidth={true}\r\n        maxWidth = {'sm'}\r\n      >\r\n                <DialogTitle id=\"alert-dialog-slide-title\">{\"Change Password\"}</DialogTitle>\r\n                <DialogContent>\r\n                    {this.state.error ?\r\n                        <DialogContentText> {this.state.error} </DialogContentText> : null\r\n\r\n                    }\r\n                    <TextField\r\n                        autoFocus\r\n                        margin=\"dense\"\r\n                        id=\"name\"\r\n                        label=\"New Password\"\r\n                        type=\"password\"\r\n                        fullWidth\r\n                        ref = {this.passwordEl}\r\n                    />\r\n                    <TextField\r\n                        autoFocus\r\n                        margin=\"dense\"\r\n                        id=\"name\"\r\n                        label=\"Confirm Password\"\r\n                        type=\"password\"\r\n                        fullWidth\r\n                        ref = {this.confirmEl}\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button  onClick={this.handleUpdate} color=\"primary\" className = {classes.button}> \r\n                        Update\r\n                    </Button>\r\n                    <Button onClick={this.setInvisible} color=\"primary\" className = {classes.button}>\r\n                        Cancel\r\n                    </Button>\r\n                </DialogActions>\r\n                </Dialog>\r\n\r\n            : null}\r\n        </>\r\n        );\r\n    }\r\n}\r\n \r\nexport default withStyles(useStyle)(UpdatePassword);","/** ACCOUNT SETTING \r\n * Component within Settings Page\r\n */\r\n\r\n\r\nimport React, { Component } from 'react'\r\nimport Update from '../AccountSetting/Update'\r\nimport UpdatePassword from './UpdatePassword'\r\n\r\nclass AccountSetting extends Component {\r\n    state = { user: this.props.user }\r\n    \r\n    onChange = (type, value) => {\r\n        let user = this.state.user \r\n        if (type === \"Update Email\")\r\n            user.email = value \r\n        else if (type === \"Update Username\") {\r\n            user.username = value \r\n            localStorage.setItem(\"username\", value);\r\n            \r\n            this.props.onUsernameChange(value)\r\n           this.props.history.push(\"/\" + value + \"/settings\")\r\n        }\r\n        this.setState({user : user})\r\n    }\r\n\r\n    Post = (e) => {\r\n        e.preventDefault();\r\n        const file = document.getElementById(\"photo-input\").files;\r\n        const formData = new FormData();\r\n\r\n        formData.append(\"img\", file[0]);\r\n        console.log(file)\r\n        console.log(formData.getAll())\r\n        fetch(\"https://easytunes.herokuapp.com/\", {\r\n            method: \"POST\",\r\n            body: formData\r\n            }).then(r => {\r\n            console.log(r);\r\n        });\r\n        let user = this.state.user\r\n        user.profile_img = `https://easytunes.herokuapp.com/image_file/${file[0].name}`\r\n        this.setState({user : user})\r\n        console.log(file[0]);\r\n    }\r\n\r\n    updateProfileImg = () => {\r\n        let user = this.state.user\r\n        let requestBody = {\r\n            query: `\r\n                mutation {\r\n                    changeProfileImg(username: \"${user.username}\", img: \"${user.profile_img}\"){\r\n                        _id\r\n                    }\r\n                }\r\n            `\r\n        }\r\n\r\n        this.fetch(requestBody)\r\n    }\r\n\r\n    fetch = (requestBody) => {\r\n        fetch('https://easytunes.herokuapp.com/graphql', {\r\n            method: 'POST',\r\n            body: JSON.stringify(requestBody),\r\n            headers: {\r\n                'content-type': 'application/json'\r\n            }\r\n            })\r\n            .then(res => {\r\n                if (res.status !== 200 && res.status !== 201) \r\n                    throw new Error('User not found');\r\n                return res.json()\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n\r\n    }\r\n\r\n    render() { \r\n        console.log(this.props.user)\r\n        return (  \r\n            <div className=\"user-settings-container\">\r\n            <div className=\"settings-header\">Account</div>\r\n            <div className=\"user-settings-content\">\r\n                <h5>Profile Picture</h5>\r\n                <h6>This is the picture associated with your profile.</h6>\r\n                <div className='user-setting-info'>\r\n                    <div className='photo_input'>\r\n                        Upload Profile Picture\r\n                        <div className=\"\">\r\n                            <div className=\"custom-file\">\r\n                                <input\r\n                                    type=\"file\"\r\n                                    id=\"photo-input\"\r\n                                    accept=\"image/*\"\r\n                                />\r\n                            </div>    \r\n                        </div>\r\n                        <button type=\"button\" className=\"btn btn-primary\" onClick={this.Post}>\r\n                            Upload\r\n                        </button>\r\n                        <img\r\n                            id=\"img\"\r\n                            style={{\r\n                                display: \"block\",\r\n                                height: \"10%\",\r\n                                width: \"10%\",\r\n                                \"margin-top\": \"5px\",\r\n                            }}\r\n                            src={this.state.user.profile_img}\r\n                        >\r\n                        </img>\r\n                    </div>\r\n                </div>\r\n                <button className = \"user-settings-content-btn\" onClick={this.updateProfileImg}>Update Image</button>\r\n            </div>\r\n            <div className=\"user-settings-content\">\r\n                <h5>Email</h5>\r\n                <h6> This is the email associated with your account</h6>\r\n                <div className=\"user-setting-info\">\r\n                    {this.state.user.email}\r\n                </div>\r\n                \r\n                <Update text = {\"Update Email\"} original = {this.state.user.email} onChange = {this.onChange} />\r\n            </div>\r\n\r\n            <div className=\"user-settings-content\">\r\n                <h5>Username</h5>\r\n                <h6>This is how you will appear to everyone else</h6>\r\n                <div className=\"user-setting-info\">\r\n                    {this.state.user.username}\r\n                </div>\r\n                <Update text = {\"Update Username\"} original = {this.state.user.username} onChange = {this.onChange}/>\r\n            </div>\r\n\r\n            <div className=\"user-settings-content\"> \r\n                <h5>Change Password</h5>\r\n                <UpdatePassword username = {this.state.user.username}/>\r\n            </div>\r\n        </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default AccountSetting;","/** ADVANCED SETTING \r\n * Component within Settings Page\r\n */\r\n\r\n\r\nimport React, { Component } from 'react'\r\n\r\nclass AdvancedSetting extends Component {\r\n    state = { user: this.props.user }\r\n\r\n    render() { \r\n        return (  \r\n            <div className=\"user-settings-container\">\r\n            <div className=\"settings-header\">Advanced Settings</div>\r\n\r\n            <div className=\"user-settings-content\">\r\n                <h5>User ID</h5>\r\n                <h6> This is the ID associated with your account</h6>\r\n                <p> {this.state.user._id}</p>\r\n            </div>\r\n\r\n            <div className=\"user-settings-content\">\r\n                <h5>User URL</h5>\r\n                <h6> This is the URL associated with your account </h6>\r\n                <p> {this.state.user.url}</p>\r\n            </div>\r\n        </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default AdvancedSetting;\r\n","import React, { Component } from 'react'\r\nimport Switch from 'react-input-switch';\r\nclass PrivacyToggles extends Component {\r\n    state = {  \r\n        // saved_privacy : this.props.default_public_saved_playlist ? 0 : 1\r\n        playlist_privacy : this.props.default_public_playlist ? 0 : 1,\r\n        verify_request : this.props.verify_requests ? 0 : 1\r\n    }\r\n\r\n    fetch(requestBody){\r\n        fetch ('https://easytunes.herokuapp.com/graphql', {\r\n        method: 'POST',\r\n        body: JSON.stringify(requestBody),\r\n        headers: {\r\n            'content-type': 'application/json'\r\n        }})\r\n        .then(res => {\r\n            // console.log(res)\r\n            if (res.status !== 200 && res.status !== 201)\r\n                throw new Error ('Failed')\r\n            return res.json()\r\n        })\r\n        .then(data => {console.log(data)})\r\n        .catch(error => {\r\n            console.log(error)\r\n        })\r\n    }\r\n\r\n    updatePlaylist = () => {\r\n        let requestBody = \"\"\r\n        if (this.state.playlist_privacy === 0){\r\n            this.setState({playlist_privacy: 1})\r\n            requestBody = {\r\n                query: `\r\n                    mutation {\r\n                        changePlaylistPrivacyDef(_id: \"${this.props._id}\", def:${false}){\r\n                            _id\r\n                            default_public_playlist\r\n                        }\r\n                    }\r\n                `\r\n            }\r\n            this.props.onPrivacyChange(\"playlist\", false)\r\n            // this.props.default_public_playlist = false \r\n        }\r\n        else {\r\n            this.setState({playlist_privacy: 0})\r\n            requestBody = {\r\n                query: `\r\n                    mutation {\r\n                        changePlaylistPrivacyDef(_id: \"${this.props._id}\", def:${true}){\r\n                            _id\r\n                        }\r\n                    }\r\n                `\r\n            }\r\n            this.props.onPrivacyChange(\"playlist\", true)\r\n            // this.props.default_public_playlist = true\r\n    }\r\n        this.fetch(requestBody)\r\n    }\r\n\r\n\r\n    updateVerify = () => {\r\n        let requestBody = \"\"\r\n        if (this.state.verify_request === 1){\r\n            this.setState({verify_request: 0})\r\n            requestBody = {\r\n                query: `\r\n                    mutation {\r\n                        changeVerifyFollowDef(_id: \"${this.props._id}\", def:${true}){\r\n                            _id\r\n                        }\r\n                    }\r\n                `\r\n            }\r\n            this.props.onPrivacyChange(\"verify\", true)\r\n            // this.props.verify_requests = true\r\n        }\r\n        else {\r\n            this.setState({verify_request: 1})\r\n            requestBody = {\r\n                query: `\r\n                    mutation {\r\n                        changeVerifyFollowDef(_id: \"${this.props._id}\", def:${false}){\r\n                            _id\r\n                        }\r\n                    }\r\n                `\r\n            }\r\n            this.props.onPrivacyChange(\"verify\", false)\r\n            // this.props.verify_request = false\r\n    }\r\n        this.fetch(requestBody)\r\n    }\r\n    render() { \r\n        return (  \r\n            <>\r\n            <div className=\"user-settings-content\">\r\n                <h5>Default Mixtape Settings</h5>\r\n\r\n                {/* <h6> <Switch value={saved_privacy} onChange={updateSaved}/> Keep saved playlists private</h6> */}\r\n                <h6> <Switch value={this.state.playlist_privacy} onChange={this.updatePlaylist}/> Keep my mixtapes private</h6>\r\n            </div>\r\n\r\n            <div className=\"user-settings-content\">\r\n                <h5>Verify Follow Requests</h5>\r\n                <h6> <Switch value={this.state.verify_request} onChange={this.updateVerify}/> Automatically allow others to follow me</h6>\r\n            </div>\r\n        </>\r\n        );\r\n    }\r\n\r\n    // SAVED PLAYLIST PRIVACY FUNCTIONALITY \r\n    // updateSaved = () => {\r\n    //     let requestBody = \"\"\r\n    //     if (this.state.saved_privacy === 0){\r\n    //         this.setState({saved_value : 1})\r\n    //         requestBody = {\r\n    //             query: `\r\n    //                 mutation {\r\n    //                     changeSavedPlaylistPrivacyDef(_id: \"${this.props._id}\", def:${false}){\r\n    //                         _id\r\n    //                     }\r\n    //                 }\r\n    //             `\r\n    //         }\r\n    //         this.props.default_public_saved_playlist = false \r\n    //     }\r\n    //     else {\r\n    //         this.setState({saved_value : 0})\r\n    //         requestBody = {\r\n    //             query: `\r\n    //                 mutation {\r\n    //                     changeSavedPlaylistPrivacyDef(_id: \"${this.props._id}\", def:${true}){\r\n    //                         _id\r\n    //                     }\r\n    //                 }\r\n    //             `\r\n    //         }\r\n    //         this.props.default_public_saved_playlist = true\r\n    // }\r\n    //     this.fetch(requestBody)\r\n    // }\r\n}\r\n \r\nexport default PrivacyToggles;","/** PRIVACY SETTING \r\n * Component within Settings Page\r\n */\r\n\r\nimport React, { Component } from 'react'\r\nimport PrivacyToggles from './PrivacyToggles'\r\n\r\nclass PrivacySetting extends Component {\r\n    render() { \r\n\r\n        return (  \r\n            <div className=\"user-settings-container\">\r\n            <div className=\"settings-header\">Privacy Settings</div>\r\n\r\n            <PrivacyToggles \r\n                default_public_playlist = {this.props.user.default_public_playlist} \r\n                verify_requests = {this.props.user.verify_requests}\r\n                _id = {this.props.user._id}\r\n                onPrivacyChange = {this.props.onPrivacyChange}/>\r\n        </div>\r\n        );\r\n    }\r\n}\r\n \r\nexport default PrivacySetting;","/** SETTINGS PAGE  **/\r\n\r\nimport React, { Component } from 'react'\r\nimport AccountSetting from './AccountSetting/AccountSetting'\r\nimport AdvancedSetting from './AdvancedSetting/AdvancedSetting'\r\nimport PrivacySetting from './PrivacySetting/PrivacySetting'\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport PlayCircleFilledRoundedIcon from '@material-ui/icons/PlayCircleFilledRounded'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport './Setting.css'\r\n\r\nconst useStyles= theme => ({\r\n    toolbar: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'flex-end',\r\n        padding: theme.spacing(0, 1),\r\n        marginLeft: \"0px\",\r\n        marginTop: \"10px\",\r\n        // necessary for content to be below app bar\r\n        ...theme.mixins.toolbar,\r\n      },\r\n      col : {\r\n          border: \"1px solid\",\r\n          background: \"#f0f0f0\",\r\n          color: \"#fff\",\r\n          paddingTop: \"50px\"\r\n      },\r\n     sidebarHeader : {\r\n        paddingTop: \"10px\",\r\n        marginBottom : \"20px\"\r\n     },\r\n      content: {\r\n        flexGrow: 1,\r\n        padding: theme.spacing(0),\r\n      },\r\n    wrapper: {\r\n        // padding: theme.spacing(2),\r\n        marginTop: theme.spacing(1),\r\n        borderBottom: \"2px solid lightgray\"\r\n    },\r\n    settingsOptionsButton: {    \r\n        width: \"100%\",\r\n        minHeight: \"50px\",\r\n        border: \"none\",\r\n        outline: \"none\",\r\n        textAlign: \"left\",\r\n        paddingLeft: \"20px\",\r\n        background: \"transparent\"\r\n    },\r\n    settingsConent: {\r\n        padding : 0\r\n    }\r\n})\r\nclass Setting extends Component {\r\n    state = { \r\n        showAccount: true,\r\n        showPrivacy: false,\r\n        showAdvanced: false,\r\n        user: null,\r\n        loading: true\r\n    }\r\n\r\n    // Get the User \r\n    componentDidMount = () => {\r\n        if (!this.props.username)\r\n            this.props.history.push('/login')\r\n        this.setState({loading: true})\r\n\r\n        if (this.props.username === this.props.match.params.username){\r\n            let requestBody = {\r\n                query: `\r\n                    query{\r\n                        getUserByUsername(username : \"${this.props.username}\") {\r\n                            user {\r\n                                _id\r\n                            username \r\n                            profile_img\r\n                            default_public_saved_playlist\r\n                            default_public_playlist\r\n                            verify_requests\r\n                            email\r\n                            url\r\n                            }\r\n                        }\r\n                    }\r\n                `\r\n            }\r\n    \r\n            fetch ('https://easytunes.herokuapp.com/graphql', {\r\n                method: 'POST',\r\n                body: JSON.stringify(requestBody),\r\n                headers: {\r\n                    'content-type': 'application/json'\r\n                }})\r\n                .then(res => {\r\n                    // console.log(res)\r\n                    if (res.status !== 200 && res.status !== 201)\r\n                        throw new Error ('Failed')\r\n                    return res.json()\r\n                })\r\n                .then(data => {\r\n                   this.setState({\r\n                       user: data.data.getUserByUsername.user,\r\n                       loading:false\r\n                   })\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                })\r\n        }\r\n        \r\n        \r\n    }\r\n\r\n\r\n    // Render the Settings Page \r\n    render() { \r\n        \r\n            \r\n        // If the data is still loading, do not attempt to render any information \r\n        if (this.state.loading)\r\n            return(<> </>)\r\n        const {classes} = this.props\r\n        return (  \r\n            <main className={classes.content}>\r\n                <div className={classes.toolbar} />\r\n                <Container classname = {classes.wrapper}>\r\n                    <Grid container>\r\n                        <Grid item xs={2} className = {classes.col}>\r\n                            \r\n                        <div className=\"sidebar-header text-left\">\r\n                            <h3 style={{color : \"black\"}}>Settings</h3>\r\n                        </div>\r\n                     <ul >\r\n                         <li>\r\n                            <button className = {classes.settingsOptionsButton} id = \"settings-account-btn\" style = {{background: \"lightgray\"}} onClick={this.changeView}>Account</button>          \r\n                     </li>\r\n                         <li>\r\n                             <button className = {classes.settingsOptionsButton} id = \"settings-privacy-btn\" onClick={this.changeView}>Privacy</button>\r\n                            \r\n                         </li>\r\n                         <li>\r\n                             <button className = {classes.settingsOptionsButton} id = \"settings-advanced-btn\" onClick={this.changeView}>Advanced Settings</button>\r\n                \r\n                         </li>\r\n                     </ul>\r\n                     \r\n                        </Grid>\r\n                        <Grid item xs className ={classes.settingsContent}>\r\n                            {this.state.showAccount ? <AccountSetting user = {this.state.user} onUsernameChange ={this.onUsernameChange} history = {this.props.history} />: null}\r\n                            {this.state.showPrivacy ? <PrivacySetting user ={this.state.user} onPrivacyChange = {this.onPrivacyChange}/> : null}\r\n                            {this.state.showAdvanced ? <AdvancedSetting user={this.state.user}/> : null}\r\n                        </Grid>\r\n                    </Grid>\r\n                </Container> \r\n            </main>\r\n        );\r\n    }\r\n\r\n    onUsernameChange = (username) => {\r\n        console.log(username)\r\n        let user = this.state.user \r\n        let url = user.url.split(\"/\")[0]\r\n        user.url = url + \"/\" + username\r\n        this.props.onUsernameChange(username)\r\n    }\r\n    onUserChange = (user) => {\r\n        this.setState({user : user})\r\n    }\r\n    onPrivacyChange = (type, value) => {\r\n        let user = this.state.user \r\n        if (type === \"playlist\")\r\n            user.default_public_playlist = value \r\n        else \r\n            user.verify_requests = value \r\n        this.setState({user:user})\r\n    }\r\n    // Handle button clicks to \"Account Setting\", \"Privacy Setting\", and \"Advanced Setting\"\r\n    changeView = (event) => {\r\n        let invisible = [];\r\n        const visible = event.target.id\r\n        \r\n        if (visible === \"settings-account-btn\"){\r\n            this.setState({\r\n                showAccount: true,\r\n                showPrivacy: false,\r\n                showAdvanced: false\r\n            })\r\n            invisible.push(\"settings-privacy-btn\")\r\n            invisible.push(\"settings-advanced-btn\")\r\n        }\r\n        else if (visible === \"settings-privacy-btn\"){\r\n            this.setState({\r\n                showAccount: false,\r\n                showPrivacy: true,\r\n                showAdvanced: false\r\n            })\r\n\r\n            invisible.push(\"settings-account-btn\")\r\n            invisible.push(\"settings-advanced-btn\")\r\n        }\r\n        else {\r\n            this.setState({\r\n                showAccount: false,\r\n                showPrivacy: false,\r\n                showAdvanced: true\r\n            })\r\n            invisible.push(\"settings-privacy-btn\")\r\n            invisible.push(\"settings-account-btn\")\r\n\r\n        }\r\n        document.getElementById(visible).style.background = \"lightgray\"\r\n        document.getElementById(invisible[0]).style.background = \"transparent\"\r\n        document.getElementById(invisible[1]).style.background = \"transparent\"\r\n     \r\n    }\r\n}\r\n \r\nexport default withStyles(useStyles)(Setting);","// /** HEADER NAVBAR\r\n//  * Contains home button, search bar, and settings icon \r\n//  */\r\n\r\nimport { fade, withStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MoreIcon from '@material-ui/icons/MoreVert';\r\nimport MusicNoteIcon from '@material-ui/icons/MusicNote';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport { Select, FormControl } from '@material-ui/core';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport clsx from 'clsx';\r\nimport React, { Component } from 'react'\r\nconst drawerWidth = 240;\r\nconst useStyles = theme => ({\r\n  paper: {\r\n    border: '1px solid #d3d4d5',\r\n  },\r\n  \r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n    display: 'none',\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'block',\r\n    },\r\n  },\r\n\r\n  search: {\r\n    position: 'relative',\r\n\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: fade(theme.palette.common.white, 0.15),\r\n    '&:hover': {\r\n      backgroundColor: fade(theme.palette.common.white, 0.25),\r\n    },\r\n    paddingTop: \"10px\",\r\n    marginRight: theme.spacing(2),\r\n    marginLeft: 0,\r\n    width: '100%',\r\n    [theme.breakpoints.up('sm')]: {\r\n      marginLeft: theme.spacing(3),\r\n      width: '500px',\r\n      height: '50px'\r\n    },\r\n  },\r\n  searchIcon: {\r\n    padding: theme.spacing(0, 2,2),\r\n    height: '100%',\r\n    position: 'absolute',\r\n    pointerEvents: 'none',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  inputRoot: {\r\n    color: 'inherit',\r\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n    \r\n    width: '410px',\r\n    height: '30px'\r\n  },\r\n  inputInput: {\r\n    padding: theme.spacing(1, 1, 1, 0),\r\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n    paddingRight:'50px',\r\n    transition: theme.transitions.create('width'),\r\n    width: '100%',\r\n    position: 'center',\r\n    [theme.breakpoints.up('md')]: {\r\n      width: '100%',\r\n    },\r\n  },\r\n  sectionMobile: {\r\n    display: 'flex',\r\n    [theme.breakpoints.up('md')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n  selectMenu: {\r\n      height: \"40px\"\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  appBarShift: {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  hide: {\r\n    display: 'none',\r\n  },\r\n  icon : {\r\n    '&:focus': {\r\n      outline: 'none',\r\n    }\r\n  }\r\n});\r\n\r\nclass HeaderNavbar extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.menuId = 'primary-search-account-menu'\r\n    this.mobileMenuId = 'primary-search-account-menu-mobile'\r\n    this.searchEl = React.createRef();\r\n\r\n  }\r\n  state = {  \r\n    value : \"All\",\r\n    anchorEl: null,\r\n    mobileMoreAnchorEl: null,\r\n  }\r\n\r\n  handleChange = (e) => {\r\n      console.log(e.target)\r\n     this.setState({value : e.target.value})\r\n  }\r\n\r\n  handleProfileMenuOpen = (event) => {\r\n    this.setState({anchorEl : event.target})\r\n  };\r\n\r\n  handleMobileMenuClose = () => {\r\n    this.setState({mobileMoreAnchorEl : null})\r\n\r\n  };\r\n\r\n  handleMenuClose = () => {\r\n    this.setState({anchorEl: null})\r\n    this.handleMobileMenuClose();\r\n  };\r\n\r\n  handleMobileMenuOpen = (event) => {\r\n      console.log(event.target)\r\n    this.setState({mobileMoreAnchorEl : event.target})\r\n  };\r\n\r\n  toPlaylists = () => {\r\n    console.log(\"To playlists\")\r\n    this.props.history.push(\"/\" + this.props.username)\r\n    this.handleMenuClose()\r\n  }\r\n\r\n  toFollowers = () => {\r\n    console.log(\"To followers \")\r\n    this.props.history.push(\"/\" + this.props.username + \"/followers\")\r\n    this.handleMenuClose()\r\n  }\r\n\r\n  toSettings = () => {\r\n    console.log(\"To Settings\")\r\n    this.props.history.push(\"/\" + this.props.username + \"/settings\")\r\n    this.handleMenuClose()\r\n  }\r\n\r\n  toLogOut = () => {\r\n    console.log(\"Log Out\")\r\n    localStorage.removeItem(\"username\")\r\n    this.props.onUsernameChange(\"\")\r\n    this.props.history.push(\"/\")\r\n    this.handleMenuClose()\r\n  }\r\n  renderMenu = () => {\r\n    return (\r\n      <Menu\r\n        anchorEl={this.state.anchorEl}\r\n        anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n        id={this.menuId}\r\n        keepMounted\r\n        transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n        open={Boolean(this.state.anchorEl)}\r\n        onClose={this.handleMenuClose}\r\n      >\r\n        <MenuItem onClick={this.toPlaylists}>Mixtapes</MenuItem>\r\n        <MenuItem onClick={this.toFollowers}>Followers</MenuItem>\r\n        <MenuItem onClick={this.toSettings}>Settings</MenuItem>\r\n        <MenuItem onClick={this.toLogOut}>Logout</MenuItem>\r\n      </Menu>\r\n    );\r\n  }\r\n  renderMobileMenu = () =>{\r\n    const {classes} = this.props\r\n    return (\r\n      <Menu\r\n        anchorEl={this.state.mobileMoreAnchorEl}\r\n        anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n        id={this.mobileMenuId}\r\n        keepMounted\r\n        transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n        open={Boolean(this.state.mobileMoreAnchorEl)}\r\n        onClose={this.handleMobileMenuClose}\r\n      >\r\n        <MenuItem onClick={this.handleProfileMenuOpen}>\r\n          <IconButton\r\n            aria-label=\"account of current user\"\r\n            aria-controls=\"primary-search-account-menu\"\r\n            aria-haspopup=\"true\"\r\n            color=\"inherit\"\r\n           \r\n          >\r\n            <AccountCircle />\r\n          </IconButton>\r\n          <p>Profile</p>\r\n        </MenuItem>\r\n      </Menu>\r\n    );\r\n  }\r\n\r\n  toHome = () => {\r\n    this.props.history.push('/home')\r\n  }\r\n\r\n  handleKeyPress = (event) => {\r\n    if (event.key === \"Enter\"){\r\n        const type = this.state.value \r\n        const query = this.searchEl.current.children[0].value\r\n        console.log(type)\r\n        if (query !== \"\"){\r\n            const url = '/searchq=' +  encodeURIComponent(query)+ \"/type=\" + type.toLowerCase()\r\n            const {history} = this.props;\r\n                            \r\n            history.push(url)\r\n        }\r\n    }\r\n  }\r\n\r\n  render() { \r\n    const {classes} = this.props\r\n\r\n    return (  \r\n        <div className={classes.grow}>\r\n            <AppBar \r\n              // position=\"fixed\"\r\n              // className={clsx(classes.appBar, {\r\n              //   [classes.appBarShift]: this.props.open,\r\n              // })}\r\n            \r\n            position=\"static\" \r\n            style={{ background: '#5472d3' }}>\r\n                <Toolbar>\r\n                <IconButton\r\n                  color=\"inherit\"\r\n                  aria-label=\"open drawer\"\r\n                  onClick={this.props.handleDrawerOpen}\r\n                  edge=\"start\"\r\n                  className={clsx(classes.menuButton, {\r\n                    [classes.hide]: this.props.open,\r\n                  }, classes.icon)}\r\n              >\r\n                <MenuIcon />\r\n              </IconButton>\r\n                    {/* <IconButton\r\n                        edge=\"start\"\r\n                        color=\"inherit\"\r\n                        className={classes.menuButton}\r\n                        aria-label=\"open drawer\"\r\n                    >\r\n                        <HomeIcon />\r\n                    </IconButton>  */}\r\n                    <IconButton\r\n                        edge=\"start\"\r\n                        color=\"inherit\"\r\n                        aria-label=\"open drawer\"\r\n                        onClick = {this.toHome}\r\n                        className = {classes.icon}\r\n                    >\r\n                        <MusicNoteIcon />\r\n                        <Typography className={classes.title} variant=\"h6\" noWrap>\r\n                            EasyTunes\r\n                        </Typography>\r\n                    </IconButton> \r\n                    <div className= {classes.search}>\r\n                        <div className={classes.searchIcon}>\r\n                        <SearchIcon />\r\n                    </div>\r\n                    \r\n                    <InputBase\r\n                        placeholder=\"Search\"\r\n                        classes={{\r\n                            root: classes.inputRoot,\r\n                            input: classes.inputInput,\r\n                        }}\r\n                        inputProps={{ 'aria-label': 'search' }}\r\n                        ref = {this.searchEl}\r\n                        onKeyPress={this.handleKeyPress}\r\n                        />\r\n                        <FormControl classes = {{div: this.selectMenu}}>\r\n                            <Select onChange= {this.handleChange}>\r\n                                <MenuItem value= {\"All\"}>All</MenuItem>\r\n                                <MenuItem value= {\"Artists\"}>Artists</MenuItem>\r\n                                <MenuItem value= {\"Songs\"}>Songs</MenuItem>\r\n                                <MenuItem value= {\"Mixtapes\"}>Mixtapes</MenuItem>\r\n                                <MenuItem value= {\"Users\"}>Users</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </div>\r\n                    <div className={classes.grow} />\r\n                    <div className={classes.sectionDesktop}>\r\n                        <IconButton\r\n                            edge=\"end\"\r\n                            aria-label=\"account of current user\"\r\n                            aria-controls={this.menuId}\r\n                            aria-haspopup=\"true\"\r\n                            onClick={this.handleProfileMenuOpen}\r\n                            color=\"inherit\"\r\n                            className = {classes.icon}\r\n                            >\r\n                            <AccountCircle />\r\n                            </IconButton>\r\n                    </div>  \r\n                    <div className={classes.sectionMobile}>\r\n                        <IconButton\r\n                        aria-label=\"show more\"\r\n                        aria-controls={this.mobileMenuId}\r\n                        aria-haspopup=\"true\"\r\n                        onClick={this.handleMobileMenuOpen}\r\n                        color=\"inherit\"\r\n                        className = {classes.icon}\r\n                        >\r\n                        <MoreIcon />\r\n                        </IconButton>\r\n                    </div>\r\n                    {this.renderMobileMenu()}\r\n                    {this.renderMenu()}   \r\n                </Toolbar>\r\n            </AppBar>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default withStyles(useStyles)(HeaderNavbar);","/** PLAYLIST NAVBAR\r\n * Bar at the bottom of the screen \r\n * Allows users to control the songs in the playlist they're listening to  \r\n */\r\n\r\nimport React, { Component } from 'react'\r\nimport './PlaylistNavbar.css'\r\nimport {withStyles} from '@material-ui/core/styles'\r\nimport SpotifyPlayer from 'react-spotify-web-playback';\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport './AudioPlayer.css'\r\n\r\nconst useStyle=theme => ({\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n})\r\nclass PlaylistNavbar extends Component {    \r\n    handleCallback = ({type, ...state}) => {\r\n\r\n      console.log(type)\r\n      console.log(state)\r\n \r\n      if (type === \"track_update\"){          \r\n        this.props.onSongChange(state.track.id)\r\n      }\r\n      if (type === \"player_update\"){\r\n        console.log(\"Player Update\")\r\n        console.log(this.props.needsUpdate)\r\n        if (this.props.needsUpdate){\r\n          this.props.canUpdate()\r\n        }\r\n      }\r\n     this.props.onPlayChange(state.isPlaying)\r\n    }\r\n\r\n    shuffle = () => {\r\n      this.props.onShuffleChange()\r\n    }\r\n\r\n    render() {     \r\n      console.log(this.props)\r\n      const {classes} = this.props\r\n        return ( \r\n            <>\r\n              <div className={classes.grow}>\r\n              <AppBar \r\n              // position=\"fixed\"\r\n              // className={clsx(classes.appBar, {\r\n              //   [classes.appBarShift]: this.props.open,\r\n              // })}\r\n              \r\n                position=\"static\" \r\n                >\r\n                  \r\n                      {this.props.access_token &&\r\n                              \r\n                            <SpotifyPlayer\r\n                              token= {this.props.access_token}\r\n                              callback = {this.handleCallback}\r\n                              uris={this.props.playlist}\r\n                              magnifySliderOnHover = {true}\r\n                              showSaveIcon = {false}\r\n                              play = {this.props.play}\r\n                              offset = {this.props.offset}\r\n                              styles={{\r\n                                activeColor: '#fff',\r\n                                bgColor: '#696969',\r\n                                color: '#fff',\r\n                                errorColor: 'fff',\r\n                                loaderColor: '#fff',\r\n                                sliderColor: '#1cb954',\r\n                                trackArtistColor: '#d9d9d9',\r\n                                trackNameColor: '#fff',\r\n                              }}\r\n                            />\r\n                            \r\n                          \r\n                      }\r\n                    {/* <button className=\"shuffle\" onClick = {this.shuffle}> Shuffle </button>  */}\r\n                 \r\n              </AppBar>\r\n              </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n \r\nexport default withStyles(useStyle)(PlaylistNavbar);","import React, { Component } from 'react'\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport List from '@material-ui/core/List';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport SubscriptionsIcon from '@material-ui/icons/Subscriptions';\r\nimport GroupIcon from \"@material-ui/icons/Group\"\r\nimport SettingsIcon from '@material-ui/icons/Settings'\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp'\r\nimport HeaderNavbar from '../HeaderNavbar/HeaderNavbar'\r\nimport { palette } from '@material-ui/system';\r\nimport PlaylistNavbar from '../PlaylistNavbar/PlaylistNavbar'\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    \r\n  },\r\n  appBarShift: {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    \r\n  },\r\n  menuButton: {\r\n    marginRight: 36,\r\n  },\r\n  hide: {\r\n    display: 'none',\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n    whiteSpace: 'nowrap',\r\n    \r\n  },\r\n  drawerOpen: {\r\n    width: drawerWidth,\r\n    background: '#5472d3',\r\n    transition: theme.transitions.create('width', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,   \r\n    }),\r\n  },\r\n  drawerClose: {\r\n    background: '#5472d3',\r\n    transition: theme.transitions.create('width', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    overflowX: 'hidden',\r\n    width: theme.spacing(7) + 1,\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: theme.spacing(9) + 1,\r\n    },\r\n  },\r\n  toolbar: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    padding: theme.spacing(0, 1),\r\n    // necessary for content to be below app bar\r\n    ...theme.mixins.toolbar,\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n  },\r\n  bottomAppBar: {\r\n    top: 'auto',\r\n    bottom: 0,\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  listItemText: {\r\n    color: \"white\"\r\n  },\r\n  listItemIcon : {\r\n    color: \"white\"\r\n  }\r\n});\r\n\r\nclass Menu extends Component {\r\n  state = {  \r\n    open: false\r\n  }\r\n\r\n  toMyPlaylists = () => {\r\n    this.props.history.push(\"/\" + this.props.username)\r\n  }\r\n\r\n  toSavedPlaylists = () => {\r\n    this.props.history.push('/' + this.props.username)\r\n  }\r\n\r\n  toFollowers = () => {\r\n    this.props.history.push('/' + this.props.username + \"/followers\" )\r\n  }\r\n\r\n  toFollowing = () => {\r\n    this.props.history.push(\"/\" + this.props.username + '/following')\r\n  }\r\n\r\n  toRequests = () => {\r\n    this.props.history.push(\"/\" + this.props.username + '/requests')\r\n  }\r\n\r\n  toSetting = () => {\r\n    this.props.history.push(\"/\" + this.props.username + '/settings')\r\n  }\r\n\r\n  handleDrawerClose = () => {\r\n    this.setState({open: false})\r\n  }\r\n\r\n  handleDrawerOpen = () => {\r\n    this.setState({open: true})\r\n  }\r\n  toPlaylists = () => {\r\n    console.log(\"To playlists\")\r\n    this.props.history.push(\"/\" + this.props.username)\r\n    // this.handleMenuClose()\r\n  }\r\n\r\n  toFollowers = () => {\r\n    console.log(\"To followers \")\r\n    this.props.history.push(\"/\" + this.props.username + \"/followers\")\r\n    // this.handleMenuClose()\r\n  }\r\n\r\n  toSettings = () => {\r\n    console.log(\"To Settings\")\r\n    this.props.history.push(\"/\" + this.props.username + \"/settings\")\r\n    // this.handleMenuClose()\r\n  }\r\n\r\n  toLogOut = () => {\r\n    console.log(\"Log Out\")\r\n    localStorage.removeItem(\"username\")\r\n    this.props.onUsernameChange(\"\")\r\n    this.props.history.push(\"/\")\r\n    // this.handleMenuClose()\r\n  }\r\n  render() { \r\n    console.log(this.props.needsUpdate)\r\n    const {classes} = this.props\r\n    return (  \r\n      <>\r\n      <CssBaseline />\r\n      <AppBar\r\n        position=\"fixed\" \r\n        className={clsx(classes.appBar, {\r\n          [classes.appBarShift]: this.state.open,\r\n        })}\r\n      >\r\n        <HeaderNavbar username= {this.props.username} onUsernameChange = {this.props.onUsernameChange} handleDrawerOpen = {this.handleDrawerOpen} open = {this.state.open} history = {this.props.history}/> \r\n      \r\n      </AppBar>\r\n      <Drawer\r\n        variant=\"permanent\"\r\n        className={clsx(classes.drawer, {\r\n          [classes.drawerOpen]: this.state.open,\r\n          [classes.drawerClose]: !this.state.open,\r\n        })}\r\n        classes={{\r\n          paper: clsx({\r\n            [classes.drawerOpen]: this.state.open,\r\n            [classes.drawerClose]: !this.state.open,\r\n          }),\r\n        }}\r\n      >\r\n        <div className={classes.toolbar}>\r\n          <IconButton onClick={this.handleDrawerClose}  className = {classes.icon}>\r\n            {this.state.open ?\r\n                <ChevronLeftIcon className = {classes.listItemIcon}/> :\r\n                <ChevronRightIcon className = {classes.listItemIcon}/> \r\n            }\r\n           \r\n          </IconButton>\r\n        </div>\r\n        <Divider />\r\n        <List>\r\n            <ListItem button key={\"Playlists\"} onClick = {this.toPlaylists}>\r\n              <ListItemIcon> <SubscriptionsIcon className = {classes.listItemIcon}/></ListItemIcon>\r\n              <ListItemText className = {classes.listItemText} primary={\"Mixtapes\"} />\r\n            </ListItem>\r\n\r\n            <ListItem button key={\"Followers\"} onClick = {this.toFollowers}>\r\n              <ListItemIcon><GroupIcon className = {classes.listItemIcon}/></ListItemIcon>\r\n              <ListItemText className = {classes.listItemText} primary={\"Followers\"} />\r\n            </ListItem>\r\n\r\n        </List>\r\n        <Divider />\r\n        <List>\r\n          <ListItem button key={\"Settings\"} onClick = {this.toSettings}>\r\n            <ListItemIcon> <SettingsIcon className = {classes.listItemIcon}/></ListItemIcon>\r\n            <ListItemText className = {classes.listItemText} primary={\"Settings\"} />\r\n          </ListItem>\r\n          <ListItem button key={\"Log Out\"} onClick = {this.toLogOut}>\r\n            <ListItemIcon> <ExitToAppIcon className = {classes.listItemIcon}/></ListItemIcon>\r\n            <ListItemText className = {classes.listItemText} primary={\"Log Out\"} />\r\n          </ListItem>\r\n\r\n        </List>\r\n      </Drawer>\r\n\r\n      <AppBar \r\n        position = \"fixed\" \r\n        className={clsx(classes.bottomAppBar, {\r\n          [classes.appBarShift]: this.state.open,\r\n        })}\r\n      >\r\n        <PlaylistNavbar \r\n                            username= {this.props.username} \r\n                              play = {this.props.play} \r\n                              onPlayChange = {this.props.onPlayChange} \r\n                              onPlaylistChange = {this.props.onPlaylistChange}\r\n                              onSongChange = {this.props.onSongChange}\r\n                              onShuffleChange = {this.props.onShuffleChange}\r\n                              playlist = {this.props.playlist}\r\n                              current_song = {this.props.current_song}\r\n                              access_token = {this.props.access_token}\r\n                              offset = {this.props.offset}\r\n                              shuffle= {this.props.shuffle}\r\n                              shufflePlaylist = {this.props.shufflePlaylist}\r\n                              needsUpdate = {this.props.needsUpdate}\r\n                              updated = {this.props.updated}\r\n                              canUpdate = {this.props.canUpdate}\r\n\r\n        />   \r\n      </AppBar>\r\n      \r\n      </>\r\n    );\r\n  }\r\n}\r\n \r\nexport default withStyles(useStyles)(Menu);","\r\n\r\nimport React, { Component } from 'react';\r\nimport { BrowserRouter, Switch, Route,} from 'react-router-dom';\r\nimport './App.css';\r\n\r\nimport LoginScreen from './components/login_screen/LoginScreen.js';\r\nimport ResetPasswordScreen from './components/reset_password_screen/ResetPasswordScreen.js'\r\nimport Profile from './components/Profile/Profile'\r\nimport Playlist from './components/Playlist/Playlist'\r\nimport Home from \"./components/HomePage/Home\";\r\nimport HomeScreen from \"./components/home_screen/HomeScreen\"\r\nimport SearchScreen from \"./components/search_screen/SearchScreen.js\"\r\nimport FollowingPage from './components/Following/FollowingPage'\r\nimport Setting from './components/Setting/Setting'\r\nimport HeaderNavbar from './components/HeaderNavbar/HeaderNavbar'\r\nimport PlaylistNavbar from './components/PlaylistNavbar/PlaylistNavbar'\r\nimport Menu from './components/Menu/Menu'\r\nimport { withStyles } from '@material-ui/core/styles';\r\n// import Navbar from './components/Navbar/Navbar'\r\n\r\n\r\nconst useStyles = theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n})\r\n\r\nclass App extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      username: localStorage.getItem(\"username\"),\r\n      results: null,\r\n      play: false,\r\n      current_playlist: null,\r\n      current_song: null,\r\n      access_token: null,\r\n      uris: [],\r\n      offset: 0,\r\n      shuffle: false,\r\n      needsUpdate: true\r\n    }\r\n\r\n  }\r\n\r\n  componentDidMount = async () => {\r\n    this.getAccesstoken()    \r\n  }\r\n\r\n  getAccesstoken = async () => {\r\n    console.log(localStorage.getItem(\"access-token\") == null || localStorage.getItem(\"access-token\") == \"null\")\r\n    if (localStorage.getItem(\"access-token\") == null || localStorage.getItem(\"access-token\") == \"null\"){\r\n\r\n      console.log(\"HERE\")\r\n      return await fetch('https://easytunes.herokuapp.com/access-token', {\r\n                      method: 'POST',\r\n                      headers: {\r\n                      'content-type': 'application/json'\r\n                      }})\r\n                  .then(res => {\r\n                      if (res.status !== 200 && res.status !== 201) \r\n                          throw new Error('Failed');\r\n                      return res.json()\r\n                  })\r\n                  .then(result => {\r\n                    console.log(result == null)\r\n                    if (result == null){\r\n                      fetch('https://easytunes.herokuapp.com/authorization', {\r\n                                        method: 'POST',\r\n                        \r\n                                        headers: {\r\n                                            'content-type': 'application/json'\r\n                                        }\r\n                                        })\r\n                                        .then(res => {\r\n                                            if (res.status !== 200 && res.status !== 201) \r\n                                                throw new Error('Authorization Failed');\r\n                                            return res.json()\r\n                                        })\r\n                                        .then(data => {\r\n                                            console.log(data)\r\n                                            window.location.replace(data)\r\n                                        })\r\n                                        .catch(err => {\r\n                                            console.log(err);\r\n                                        });\r\n                    }\r\n                    localStorage.setItem(\"access-token\", result)\r\n                    this.setState({access_token : result}, function() {console.log(this.state.access_token)})\r\n                  })\r\n                  .catch(err => {\r\n                      console.log(err);\r\n                  });\r\n                }\r\n    else {\r\n      this.setState({access_token : localStorage.getItem('access-token')})\r\n    }\r\n  }\r\n\r\n  onPlayChange = (play) => {\r\n    this.setState({play: play}, function() {console.log(this.state)})\r\n  }\r\n\r\n  updated = () => {\r\n    this.setState({needsUpdate: false})\r\n  }\r\n\r\n  searchSongChange = (song) => {\r\n    \r\n  }\r\n  onSongChange = (song_id) => {\r\n    let s = null\r\n    let offset = 0\r\n \r\n      this.state.current_playlist.songs.forEach((song,i) => {\r\n        if (song.song_id === song_id){\r\n          s = song\r\n          offset = i\r\n        }\r\n          \r\n      })\r\n    console.log(\"SONG CHANGE APP.JS\")\r\n    \r\n    if (!this.state.current_playlist)\r\n      this.setState({current_song: s, play: true, offset:offset, needsUpdate: false}, function() {console.log(this.state)})\r\n    else if (!this.state.play)\r\n      this.setState({play: true, needsUpdate: true, stored: {playlist: this.state.current_playlist, uris: this.state.uris, song: s, offset: offset}})\r\n    else \r\n      this.setState({current_song: s, play: true, offset:offset, needsUpdate: false}, function() {console.log(this.state)})\r\n  }\r\n\r\n  shufflePlaylist = (uris, playlist) => {\r\n    var currentIndex = uris.length, temporaryValue, randomIndex;\r\n    let song = null\r\n\r\n      while (currentIndex > 0) {\r\n        randomIndex = Math.floor(Math.random() * currentIndex);\r\n        currentIndex -= 1;\r\n\r\n        temporaryValue = uris[currentIndex];\r\n        uris[currentIndex] = uris[randomIndex];\r\n        uris[randomIndex] = temporaryValue;\r\n      }\r\n      console.log(uris[0])\r\n      playlist.songs.forEach(s => {\r\n        console.log(s.song_uri)\r\n        if (s.song_uri === uris[0])\r\n          song = s\r\n      })\r\n    console.log([uris, song])\r\n    return [uris, song]\r\n  }\r\n\r\n  onPlaylistChange = (playlist, s) => {\r\n    let uris = []\r\n    let result = [uris]\r\n    let offset = 0\r\n    if (playlist){\r\n      uris = playlist.songs.map((song,i) => {\r\n        if (song.song_uri === s.song_uri)  \r\n          offset = i\r\n        return song.song_uri\r\n      })\r\n      result[0] = uris\r\n      result.push(playlist.songs[offset])\r\n    if (this.state.shuffle){\r\n      result = this.shufflePlaylist(uris, playlist)\r\n    }\r\n    \r\n  }\r\n  else {\r\n    result[0] = [s.uri]\r\n    result.push(s)\r\n  }\r\n\r\n  console.log(\"PLAYLIST CHANGE APP.JS\")\r\n  \r\n  console.log(this.state.current_playlist === null)\r\n    if (!this.state.current_playlist){\r\n      this.setState({current_playlist : playlist, play : true, uris: result[0], current_song: result[1], offset: offset, needsUpdate:false}, function() {console.log(this.state)})\r\n    }\r\n    else if (!this.state.play){\r\n      this.setState({play: true, needsUpdate: true, stored: {playlist: playlist, uris: result[0], song: result[1], offset: offset}})\r\n    }\r\n    else \r\n      this.setState({current_playlist : playlist, play : true, uris: result[0], current_song: result[1], offset: offset, needsUpdate:false}, function() {console.log(this.state)})\r\n  }\r\n\r\n  onShuffleChange = () => {\r\n    let uris = this.state.uris \r\n    if (this.state.shuffle){\r\n      uris = this.state.current_playlist.songs.map (song => {return song.song_uri})\r\n    }\r\n    this.setState({shuffle: !this.state.shuffle, uris: uris})\r\n  }\r\n\r\n  onUsernameChange = (username) => {\r\n    this.setState({username: username})\r\n  }\r\n\r\n  onSearchResults = (results) => {\r\n    this.setState({results: results})\r\n  }\r\n\r\n  atHome = () => {\r\n    this.setState({atHome : true})\r\n  }\r\n\r\n  notAtHome = () => {\r\n    this.setState({atHome : false})\r\n  }\r\n\r\n  canUpdate = () => {\r\n    const stored = this.state.stored\r\n    console.log(\"HERE\")\r\n    this.setState({current_playlist : stored.playlist, uris: stored.uris, current_song: stored.song, offset: stored.offset, needsUpdate:false})\r\n  }\r\n  \r\n  render() {\r\n    const {classes} = this.props\r\n    return (\r\n      <BrowserRouter>\r\n        <div className=\"App\"> \r\n        <div className={this.state.username ? classes.root : null}>\r\n            {this.state.username ? \r\n            <Route render = {(props) => \r\n              <Menu {...props} \r\n                username = {this.state.username} \r\n                onUsernameChange = {this.onUsernameChange}\r\n                play = {this.state.play} \r\n                onPlayChange = {this.onPlayChange} \r\n                onPlaylistChange = {this.onPlaylistChange}\r\n                onSongChange = {this.onSongChange}\r\n                onShuffleChange = {this.onShuffleChange}\r\n                playlist = {this.state.uris}\r\n                current_song = {this.state.current_song}\r\n                access_token = {this.state.access_token}\r\n                offset = {this.state.offset}\r\n                shuffle= {this.state.shuffle}\r\n                shufflePlaylist = {this.shufflePlaylist}\r\n                needsUpdate = {this.state.needsUpdate}\r\n                updated = {this.updated}\r\n                canUpdate = {this.canUpdate}\r\n              />\r\n              // <HeaderNavbar {...props} username= {this.state.username} onUsernameChange = {this.onUsernameChange}/> \r\n            }/>\r\n            :  null}\r\n\r\n            \r\n\r\n            <Switch>\r\n              <Route exact path='/' \r\n                render = {(props) => (\r\n                  <Home {...props} username = {this.state.username} />\r\n                )}\r\n                /> \r\n              {/* <Route exact path='/' component = {Home}/> */}\r\n\r\n              <Route exact path='/login' \r\n                render = {(props) => (\r\n                  <LoginScreen {...props} username = {this.state.username} login = {true} onUsernameChange={this.onUsernameChange} />\r\n                )}\r\n                /> \r\n\r\n              <Route exact path='/register' \r\n                render = {(props) => (\r\n                  <LoginScreen {...props} username = {this.state.username} login = {false} onUsernameChange={this.onUsernameChange} />\r\n                )}\r\n              />\r\n\r\n              <Route exact path='/forgotpassword' component={ResetPasswordScreen}/>\r\n\r\n              <Route exact path='/home' \r\n                render = {(props) => (\r\n                  <HomeScreen {...props} \r\n                    username = {this.state.username} \r\n                    access_token = {this.state.access_token}\r\n                    current_playlist = {this.state.current_playlist}\r\n                    current_song = {this.state.current_song}/>\r\n                )}\r\n              />\r\n\r\n              <Route exact path='/searchq=:query/type=:type' \r\n                render = {(props) => (\r\n                <SearchScreen {...props} \r\n                  username = {this.state.username} \r\n                  results = {this.state.results}\r\n                  play = {this.state.play} \r\n                  onPlayChange = {this.onPlayChange} \r\n                  onPlaylistChange = {this.onPlaylistChange}\r\n                  onSongChange = {this.onSongChange}\r\n                  onShuffleChange = {this.onShuffleChange}\r\n                  playlist = {this.state.uris}\r\n                  current_song = {this.state.current_song}\r\n                  access_token = {this.state.access_token}\r\n                  offset = {this.state.offset}\r\n                  shuffle= {this.state.shuffle}\r\n                  shufflePlaylist = {this.shufflePlaylist}\r\n                  needsUpdate = {this.state.needsUpdate}\r\n                  updated = {this.updated}\r\n                  canUpdate = {this.canUpdate}\r\n                /> \r\n              )}/>\r\n\r\n              <Route exact path='/:username/followers' \r\n                render = {(props => (\r\n                  <FollowingPage {...props} username = {this.state.username} state = \"followers\"/>\r\n                ))}\r\n              />\r\n\r\n              <Route exact path='/:username/following' \r\n                render = {(props => (\r\n                  <FollowingPage {...props} username = {this.state.username} state = \"following\" />\r\n                ))}\r\n              />\r\n\r\n              <Route exact path='/:username/requests' \r\n                render = {(props => (\r\n                  <FollowingPage {...props} username = {this.state.username} state = \"requests\" />\r\n                ))}\r\n              />\r\n\r\n              <Route exact path='/:username/mixtape=:playlistid'\r\n                render = {(props) => (\r\n                  <Playlist {...props} \r\n                    username = {this.state.username}\r\n                    play = {this.state.play}\r\n                    onPlayChange = {this.onPlayChange}\r\n                    onPlaylistChange = {this.onPlaylistChange}\r\n                    onSongChange = {this.onSongChange}\r\n                    current_playlist = {this.state.current_playlist}\r\n                    current_song = {this.state.current_song}\r\n                    shuffle= {this.shuffle}\r\n                  />\r\n                )}\r\n              /> \r\n\r\n              <Route exact path='/:username/settings'\r\n                render = {(props) => (\r\n                  <Setting {...props} username = {this.state.username} onUsernameChange = {this.onUsernameChange}/>\r\n                )}\r\n              />\r\n\r\n              <Route exact path='/:username'\r\n                render = {(props) => (\r\n                  <Profile {...props} \r\n                  username = {this.state.username} \r\n                  play = {this.state.play} \r\n                  onPlayChange = {this.onPlayChange} \r\n                  onPlaylistChange = {this.onPlaylistChange}\r\n                  current_playlist = {this.state.current_playlist}\r\n                  shuffle= {this.shuffle}\r\n                />\r\n                )}\r\n              />\r\n              \r\n              <Route exact path='/:username/saved-mixtapes'\r\n                render = {(props) => (\r\n                  <Profile {...props} \r\n                  username = {this.state.username} \r\n                  play = {this.state.play} \r\n                  onPlayChange = {this.onPlayChange} \r\n                  onPlaylistChange = {this.onPlaylistChange}\r\n                  current_playlist = {this.state.current_playlist}\r\n                  shuffle= {this.shuffle}\r\n                />\r\n                )}\r\n              />\r\n            </Switch>\r\n\r\n          </div>\r\n        </div>\r\n      </BrowserRouter>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(useStyles)(App)","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>, \r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}