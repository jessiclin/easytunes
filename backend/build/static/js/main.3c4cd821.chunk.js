(this.webpackJsonpeasytunes=this.webpackJsonpeasytunes||[]).push([[0],{157:function(e,t,n){e.exports=n(185)},162:function(e,t,n){},164:function(e,t,n){},165:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),o=n(15),r=n.n(o),l=(n(162),n(14)),i=n.n(l),c=n(25),u=n(5),p=n(6),m=n(8),h=n(7),d=n(54),g=n(19),f=(n(164),n(113),n(165),n(253)),y=n(233),E=n(228),b=n(251),v=n(235),w=n(234),_=n(74),C=n.n(_),S=n(62),k=n(9),N=n(225),O=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={error:null},a.setErrmess=function(e){a.setState({errorMess:e})},a.componentDidMount=function(){console.log(a.props),a.props.username&&a.props.toHome()},a.handleSignIn=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.emailEl.current.children[1].children[0].value.toLowerCase(),s=a.passwordEl.current.children[1].children[0].value,0!==n.trim().length&&0!==s.trim().length){e.next=5;break}return e.abrupt("return");case 5:o={query:'\n              query {\n                login(email: "'.concat(n,'", password: "').concat(s,'") {\n                  _id\n                  username\n                  token\n                  token_expiration\n                }\n              }\n            ')},fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Email and password do not match");return e.json()})).then((function(e){console.log(e.data.login.username),a.username=e.data.login.username,a.onUsernameChange(a.username),localStorage.setItem("username",a.username),fetch("https://easytunes.herokuapp.com/authorization",{method:"POST",headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Authorization Failed");return e.json()})).then((function(e){console.log(e),window.location.replace(e)})).catch((function(e){console.log(e)}))})).catch((function(e){a.setState({error:e.message}),console.log(e.message)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.emailEl=s.a.createRef(),a.passwordEl=s.a.createRef(),a.username="",a.onUsernameChange=a.props.onUsernameChange,a.toHome=a.props.toHome,a}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(N.a,{component:"main",maxWidth:"xs"},s.a.createElement(E.a,null),s.a.createElement("div",{className:e.paper},s.a.createElement(f.a,{className:e.avatar},s.a.createElement(C.a,null)),s.a.createElement(S.a,{component:"h1",variant:"h5"},"Sign in"),null!==this.state.error?s.a.createElement(S.a,null,this.state.error):null,s.a.createElement("form",{className:e.form,noValidate:!0},s.a.createElement(b.a,{InputProps:{className:e.input},variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,ref:this.emailEl}),s.a.createElement(b.a,{InputProps:{className:e.input},variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",ref:this.passwordEl}),s.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:this.handleSignIn},"Sign In"),s.a.createElement(w.a,{container:!0},s.a.createElement(w.a,{item:!0,xs:!0},s.a.createElement(v.a,{href:"/forgotpassword",variant:"body2"},"Forgot password?"))))))}}]),n}(a.Component),P=Object(k.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"blue"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),"&:hover":{backgroundColor:"#004CB2"},"&:focus":{backgroundColor:"#004CB2"}},input:{paddingLeft:"10px",paddingRight:"10px"}}}))(O),j=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={errorMess:null},a.componentDidMount=function(){a.props.username&&a.props.toHome()},a.setErrmess=function(e){a.setState({errorMess:e})},a.handleSignUp=function(){var e=Object(c.a)(i.a.mark((function e(t){var n,s,o,r,l,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.emailEl.current.children[1].children[0].value.toLowerCase(),s=a.passwordEl.current.children[1].children[0].value,o=a.usernameEl.current.children[1].children[0].value,r=a.confirmEl.current.children[1].children[0].value,l="easytunes.herokuapp.com"+o,console.log(n,s,o,r,l),0!==n.trim().length&&0!==s.trim().length&&0!==o.trim().length&&0!==r.trim().length){e.next=11;break}return console.log("Fill out all inputs"),a.setErrmess("Fill out all inputs"),e.abrupt("return");case 11:if(s===r){e.next=14;break}return a.setErrmess("Passwords do not match"),e.abrupt("return");case 14:if(c=/.*@.*\.com/i,console.log(c.test(n)),c.test(n)){e.next=19;break}return a.setErrmess("Input a valid email"),e.abrupt("return");case 19:return u={query:'\n                mutation{\n                    createUser(userInput: {email: "'.concat(n,'", password:"').concat(s,'", username:"').concat(o,'", url:"').concat(l,'" })  {\n                                      email\n                                      password\n                                      username\n                                      url\n                    }\n                  }\n                ')},e.next=22,fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(u),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(console.log(e),e.errors){if(/.*email.*/.test(e.errors[0].message))throw new Error("Email already in use");if(/.*username.*/.test(e.errors[0].message))throw new Error("Username already in use")}else a.state.username=e.data.createUser.username,console.log(e),a.onUsernameChange(a.state.username),localStorage.setItem("username",a.state.username),fetch("https://easytunes.herokuapp.com/authorization",{method:"POST",headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Playlist not found");return e.json()})).then((function(e){console.log(e),window.location.replace(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e),a.setErrmess(e.message)}));case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.emailEl=s.a.createRef(),a.passwordEl=s.a.createRef(),a.usernameEl=s.a.createRef(),a.confirmEl=s.a.createRef(),a.username="",a.onUsernameChange=a.props.onUsernameChange,a.toHome=a.props.toHome,a}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.classes;return console.log(this.state.errorMess),s.a.createElement(N.a,{component:"main",maxWidth:"xs"},s.a.createElement(E.a,null),s.a.createElement("div",{className:e.paper},s.a.createElement(f.a,{className:e.avatar},s.a.createElement(C.a,null)),s.a.createElement(S.a,{component:"h1",variant:"h5"},"Sign up"),null!==this.state.errorMess?s.a.createElement(S.a,null," ",this.state.errorMess):null,s.a.createElement("form",{className:e.form,noValidate:!0},s.a.createElement(w.a,{container:!0,spacing:2},s.a.createElement(w.a,{item:!0,xs:12},s.a.createElement(b.a,{InputProps:{className:e.input},variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",ref:this.emailEl})),s.a.createElement(w.a,{item:!0,xs:12},s.a.createElement(b.a,{InputProps:{className:e.input},variant:"outlined",required:!0,fullWidth:!0,id:"userName",label:"Username",name:"userName",ref:this.usernameEl,autoFocus:!0})),s.a.createElement(w.a,{item:!0,xs:12},s.a.createElement(b.a,{InputProps:{className:e.input},variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",ref:this.passwordEl})),s.a.createElement(w.a,{item:!0,xs:12},s.a.createElement(b.a,{InputProps:{className:e.input},variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Confirm Password",type:"password",id:"confirm-password",ref:this.confirmEl}))),s.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:this.handleSignUp},"Sign Up"))))}}]),n}(a.Component),U=Object(k.a)((function(e){return{paper:{marginTop:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2),"&:hover":{backgroundColor:"#004CB2"},"&:focus":{backgroundColor:"#004CB2"}},input:{paddingLeft:"10px",paddingRight:"10px"}}}))(j),x=n(248),F=n(236),q=n(237),I=n(84),M=n.n(I),V=n(238),B=Object(x.a)((function(e){return{root:{flexGrow:1},appbar:{background:"black"},icon:{fontSize:"large"},appbarWrapper:{width:"80%",margin:"0 auto"},title:{flexGrow:1}}}));var T=function(){var e=B();return s.a.createElement("div",{className:e.root},s.a.createElement(F.a,{className:e.appbar,elevation:0},s.a.createElement(q.a,{className:e.appbarWrapper},s.a.createElement(V.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},s.a.createElement(M.a,null)),s.a.createElement(S.a,{variant:"h6",className:e.title},"EasyTunes"),s.a.createElement(d.b,{to:"/register"},s.a.createElement(y.a,{color:"inherit",onClick:function(){console.log("onClick")}},"Sign Up")),s.a.createElement(d.b,{to:"/login"},s.a.createElement(y.a,{color:"inherit"},"Login")))))},A=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={loginVisible:e.props.login,signUpVisible:!e.props.login},e.componentDidMount=function(){e.props.username&&e.props.history.push("/home"),e.props.login?(document.getElementsByClassName("to-signin-btn")[0].style.borderBottom="none",document.getElementsByClassName("to-signup-btn")[0].style.borderBottom="1px solid lightgray",document.getElementsByClassName("to-signin-btn")[0].style.borderRight="1px solid lightgray"):(document.getElementsByClassName("to-signup-btn")[0].style.borderBottom="none",document.getElementsByClassName("to-signin-btn")[0].style.borderBottom="1px solid lightgray",document.getElementsByClassName("to-signin-btn")[0].style.borderRight="1px solid lightgray")},e.changeView=function(t){var n,a=t.target.className;"to-signin-btn"===a?(e.setState({loginVisible:!0,signUpVisible:!1}),n="to-signup-btn",e.props.history.push("/login")):(e.setState({loginVisible:!1,signUpVisible:!0}),n="to-signin-btn",e.props.history.push("/register")),document.getElementsByClassName(a)[0].style.borderBottom="none",document.getElementsByClassName(n)[0].style.borderBottom="1px solid lightgray"},e.element=function(e){return document.getElementById(e)},e.toHome=function(){e.props.history.push("/home")},e}return Object(p.a)(n,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"container"},s.a.createElement("h1",null,"EasyTunes")),s.a.createElement("div",{className:"container login-container"},s.a.createElement("div",{className:"row justify-content-center login-btns"},s.a.createElement("button",{className:"to-signin-btn",onClick:this.changeView},"Sign In"),s.a.createElement("button",{className:"to-signup-btn",onClick:this.changeView}," Sign Up")),this.state.loginVisible?s.a.createElement(P,{onUsernameChange:this.props.onUsernameChange,toHome:this.toHome,username:this.props.username}):null,this.state.signUpVisible?s.a.createElement(U,{onUsernameChange:this.props.onUsernameChange,toHome:this.toHome,username:this.props.username}):null))}}]),n}(a.Component),R=(n(172),function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).state={sent:!1,errorMess:null},e.element=function(e){return document.getElementById(e)},e.handleReset=function(){var t=e.emailR.current.children[1].children[0].value.toLowerCase();console.log(e.emailR.current.children[1].children[0].value.toLowerCase());var n=Math.floor(89999999*Math.random()+1e7);if(console.log(n),0!==t.trim().length){var a={query:'\n              mutation {\n                resetPassword(email: "'.concat(t,'", new_password: "').concat(n,'") {\n                  _id\n                }\n              }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(a),headers:{"content-type":"application/json"}}).then((function(t){if(200!==t.status&&201!==t.status)throw new Error("post error");return t.err,e.setState({errorMess:"Email has been sent"}),e.setState({sent:!0}),t.json()})).catch((function(t){e.setState({errorMess:t.message}),console.log(t)}))}},e.emailR=s.a.createRef(),e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("div",null,s.a.createElement("div",{className:"container"},s.a.createElement("h1",null,"EasyTunes")),s.a.createElement(N.a,{component:"main",maxWidth:"xs"},s.a.createElement(E.a,null),s.a.createElement("div",{className:e.paper},s.a.createElement(S.a,{component:"h1",variant:"h5"},"Reset Your Password"),s.a.createElement(S.a,{component:"h1",variant:"h5"},"Please enter your email"),null!==this.state.errorMess?s.a.createElement("div",null," ",this.state.errorMess):null,s.a.createElement("form",{className:e.form,noValidate:!0},s.a.createElement(b.a,{InputProps:{className:e.input},variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,ref:this.emailR}),s.a.createElement(y.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:this.handleReset},"Reset Password"),s.a.createElement(w.a,{container:!0},s.a.createElement(w.a,{item:!0,xs:!0},s.a.createElement(v.a,{href:"/login",variant:"body2"},"Back")))))))}}]),n}(a.Component)),D=Object(k.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"blue"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),"&:hover":{backgroundColor:"#004CB2"},"&:focus":{backgroundColor:"#004CB2"}},input:{paddingLeft:"10px",paddingRight:"10px"}}}))(R),J=n(17),z=n(28),L=n(85),H=n.n(L),W=n(239),G=n(240),Y=n(241),Q=n(75),K=n.n(Q),X=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={playlist:a.props.playlist,username:a.props.username,deleteConfirmVisible:!1,history:a.props.history},a.setVisible=function(){a.setState({deleteConfirmVisible:!0})},a.setInvisible=function(){a.setState({deleteConfirmVisible:!1})},a.toPlaylist=function(){a.state.history.push("/"+encodeURIComponent(a.state.playlist.username)+"/mixtape="+a.state.playlist._id)},a.deletePlaylist=function(){a.setInvisible();var e={query:'\n                mutation {\n                    deletePlaylist (id : "'.concat(a.state.playlist._id,'") {\n                        _id \n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){e={query:'\n                        query {\n                            getUserPlaylists(username: "'.concat(a.state.username,'"){\n                                _id\n                                name\n                                username\n                                likes \n                                public\n                                total_duration\n                                playlist_img\n                                songs {\n                                    song_id\n                                    song_uri\n                                    name\n                                    artists\n                                    song_img\n                                }\n                            }\n                        }\n                    ')},fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){a.setPlaylists(e.data.getUserPlaylists)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},a.handlePlay=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==a.props.current_playlist&&a.props.current_playlist._id===a.state.playlist._id?a.props.onPlayChange(!a.props.play):(console.log("Change playlist"),a.props.onPlaylistChange(a.state.playlist,a.state.playlist.songs[0]));case 1:case"end":return e.stop()}}),e)}))),a.setPlaylists=a.props.setPlaylists,a}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state.playlist,t=this.props.classes;return s.a.createElement("div",{className:"playlist-row"},s.a.createElement("div",{className:"col"},s.a.createElement("img",{alt:"playlist_img",src:e.playlist_img,class:"song_picture"})),s.a.createElement("div",{className:"col text-left"},e.name,this.state.username===e.username?s.a.createElement("span",null,"  ",e.public?s.a.createElement(J.a,null):s.a.createElement(J.b,null)," "):null),s.a.createElement("div",{className:"col text-left"},e.songs.length," ",1===e.songs.length?"Song":"Songs"," - ",e.total_duration<3600?"0 hr "+(e.total_duration<600?"0"+Math.floor(e.total_duration/60)+" min":Math.floor(e.total_duration/60)+" min"):Math.floor(e.total_duration/3600)+" hr "+(e.total_duration%3600<600?"0"+Math.floor(e.total_duration/60)+" min":Math.floor(e.total_duration/60)+" min")),s.a.createElement("div",{className:"col text-left"},this.state.username===e.username?s.a.createElement(s.a.Fragment,null,s.a.createElement(K.a,{id:e._id,size:24})," ",e.likes," "):s.a.createElement(s.a.Fragment,null,e.username)),s.a.createElement("button",{className:"playlist-btn",id:e.playlist_id,onClick:this.toPlaylist}),s.a.createElement("button",{className:"play-btn"},this.props.playlist.songs.length>0?s.a.createElement(s.a.Fragment,null,this.props.play&&this.props.current_playlist._id===this.state.playlist._id?s.a.createElement(z.a,{onClick:this.handlePlay,size:30}):s.a.createElement(z.b,{onClick:this.handlePlay,size:30})):s.a.createElement(z.b,{disabled:!0,style:{color:"gray"},size:30})),this.props.sessionUser===e.username?s.a.createElement(V.a,{className:t.deleteBtn,onClick:this.setVisible},s.a.createElement(H.a,{fontSize:"large"})):null,this.state.deleteConfirmVisible?s.a.createElement(s.a.Fragment,null,s.a.createElement(W.a,{open:this.state.deleteConfirmVisible,keepMounted:!0,onClose:this.setInvisible,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",fullWidth:!0,maxWidth:"xs"},s.a.createElement(G.a,{id:"alert-dialog-slide-title"},"Delete Playlist: "+this.state.playlist.name+"?"),s.a.createElement(Y.a,null,s.a.createElement(y.a,{onClick:this.deletePlaylist,color:"primary"},"Delete"),s.a.createElement(y.a,{onClick:this.setInvisible,color:"primary"},"Close")))):null)}}]),n}(a.Component),$=Object(k.a)((function(e){return{deleteBtn:{"&:focus":{outline:"none"}}}}))(X),Z=n(117),ee=n.n(Z),te=n(242),ne=n(243),ae=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={popupVisible:!1,username:a.props.username,user_id:a.props.user_id,error:""},a.setVisible=function(){a.setState({popupVisible:!0})},a.setInvisible=function(){a.setState({popupVisible:!1})},a.createNewPlaylist=function(){var e=a.nameEl.current.children[1].children[0].value.trim(),t={query:'\n                mutation {\n                    createPlaylist (username : "'.concat(a.state.username,'", name : "').concat(e,'", user_id: "').concat(a.state.user_id,'") {\n                        _id \n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){e.errors?a.setState({error:e.errors[0].message}):(t={query:'\n                            query {\n                                getUserPlaylists(username: "'.concat(a.state.username,'"){\n                                    _id\n                                    name\n                                    username\n                                    likes\n                                    total_duration \n                                    playlist_img\n                                    public\n                                    songs {\n                                        song_id\n                                        name\n                                    }\n                                }\n                            }\n                        ')},fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){console.log(e),a.nameEl="",a.setInvisible(),a.setPlaylists(e.data.getUserPlaylists)})).catch((function(e){console.log(e)})))})).catch((function(e){console.log(e)}))},a.setPlaylists=a.props.setPlaylists,a.nameEl=s.a.createRef(),a}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(V.a,{className:e.addButton,onClick:this.setVisible},s.a.createElement(ee.a,{fontSize:"large"})),s.a.createElement(W.a,{open:this.state.popupVisible,keepMounted:!0,onClose:this.setInvisible,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",className:e.dialog,fullWidth:!0,maxWidth:"sm"},s.a.createElement(G.a,{id:"alert-dialog-slide-title"},"Create New Playlist"),s.a.createElement(te.a,null,this.state.error?s.a.createElement(ne.a,null," ",this.state.error," "):null,s.a.createElement(b.a,{autoFocus:!0,margin:"dense",id:"name",label:"Playlist Name",type:"text",fullWidth:!0,ref:this.nameEl})),s.a.createElement(Y.a,null,s.a.createElement(y.a,{onClick:this.createNewPlaylist,color:"primary"},"Create"),s.a.createElement(y.a,{onClick:this.setInvisible,color:"primary"},"Close"))))}}]),n}(a.Component),se=Object(k.a)((function(e){return{dialog:{minWidth:"300px"},addButton:{"&:focus":{outline:"none"},float:"right"}}}))(ae),oe=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={playlists:e.props.playlists,sessionUser:e.props.sessionUser,user:e.props.user,history:e.props.history},e.setPlaylists=function(t){e.setState({playlists:t})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state.playlists.map((function(e){return s.a.createElement($,{playlist:e,key:e._id,username:this.state.user.username,setPlaylists:this.setPlaylists,sessionUser:this.state.sessionUser,editing:this.props.editing,history:this.props.history,play:this.props.play,onPlayChange:this.props.onPlayChange,onPlaylistChange:this.props.onPlaylistChange,current_playlist:this.props.current_playlist})}),this);return s.a.createElement(s.a.Fragment,null,e,this.state.sessionUser===this.state.user.username?s.a.createElement("div",{className:"add-new"},s.a.createElement(se,{text:"Playlist Name",username:this.state.user.username,user_id:this.state.user._id,setPlaylists:this.setPlaylists})):null)}}]),n}(a.Component),re=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={playlist:a.props.playlist,username:a.props.username,deleteConfirmVisible:!1,history:a.props.history,loading:!0},a.componentDidMount=function(){a.setState({loading:!0});var e={query:'\n                query{\n                    getPlaylistByID(id : "'.concat(a.props.playlist.playlist_id,'") {\n                        _id\n                        name\n                        username\n                        playlist_img\n                        likes \n                        songs {\n                            song_id\n                            name\n                            song_uri\n                            artists\n                            song_img\n                        }\n                            username\n                            likes\n                            total_duration\n                            playlist_img \n                            songs {\n                                song_id\n                                name\n                                song_uri\n                                artists\n                                song_img\n                            }\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){a.setState({playlist:e.data.getPlaylistByID,loading:!1})})).catch((function(e){console.log(e)}))},a.setVisible=function(){a.setState({deleteConfirmVisible:!0})},a.setInvisible=function(){a.setState({deleteConfirmVisible:!1})},a.toPlaylist=function(){a.state.history.push("/"+encodeURIComponent(a.state.playlist.username)+"/mixtape="+a.state.playlist._id)},a.deletePlaylist=function(){a.setInvisible();var e={query:'\n                mutation {\n                    deleteFavorite (username: "'.concat(a.props.sessionUser,'", playlist_id : "').concat(a.state.playlist._id,'") {\n                        _id \n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){e={query:'\n                        query {\n                            getUserByUsername(username: "'.concat(a.props.sessionUser,'"){\n                                user {\n                                    saved_playlists {\n                                    playlist_id\n                                    name\n                                }\n                            }\n                            }\n                        }\n                    ')},fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){a.setPlaylists(e.data.getUserByUsername.user.saved_playlists)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},a.handlePlay=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==a.props.current_playlist&&a.props.current_playlist._id===a.state.playlist._id?a.props.onPlayChange(!a.props.play):(console.log("Change playlist"),a.props.onPlaylistChange(a.state.playlist));case 1:case"end":return e.stop()}}),e)}))),a.setPlaylists=a.props.setPlaylists,a}return Object(p.a)(n,[{key:"render",value:function(){if(this.state.loading)return s.a.createElement(s.a.Fragment,null," ");var e=this.state.playlist;return null==e?s.a.createElement(s.a.Fragment,null," "):(console.log(e),console.log(this.props),s.a.createElement("div",{className:"playlist-row"},s.a.createElement("div",{className:"col"},s.a.createElement("img",{alt:"playlist_img",src:e.playlist_img,class:"song_picture"})),s.a.createElement("div",{className:"col text-left"},e.name,this.state.username===e.username?s.a.createElement("span",null,"  ",e.public?s.a.createElement(J.a,null):s.a.createElement(J.b,null)," "):null),s.a.createElement("div",{className:"col text-left"},s.a.createElement("div",{className:"col text-left"},e.songs.length," ",1===e.songs.length?"Song":"Songs"," - ",e.total_duration<3600?"0 hr "+(e.total_duration<600?"0"+Math.floor(e.total_duration/60)+" min":Math.floor(e.total_duration/60)+" min"):Math.floor(e.total_duration/3600)+" hr "+(e.total_duration%3600<600?"0"+Math.floor(e.total_duration/60)+" min":Math.floor(e.total_duration/60)+" min"))),s.a.createElement("div",{className:"col text-left"},this.state.username===e.username?s.a.createElement(s.a.Fragment,null,s.a.createElement(J.c,{id:e._id,size:24})," ",e.likes," "):s.a.createElement(s.a.Fragment,null,e.username)),s.a.createElement("button",{className:"playlist-btn",id:e.playlist_id,onClick:this.toPlaylist}),s.a.createElement("button",{className:"play-btn"},e.songs.length>0?s.a.createElement(s.a.Fragment,null,this.props.play&&this.props.current_playlist._id===e._id?s.a.createElement(z.a,{onClick:this.handlePlay,size:30}):s.a.createElement(z.b,{onClick:this.handlePlay,size:30})):null),this.props.sessionUser===this.state.username?s.a.createElement(V.a,{onClick:this.setVisible},s.a.createElement(H.a,{fontSize:"large"})):null,this.state.deleteConfirmVisible?s.a.createElement(W.a,{open:this.state.deleteConfirmVisible,keepMounted:!0,onClose:this.setInvisible,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",fullWidth:!0,maxWidth:"xs"},s.a.createElement(G.a,{id:"alert-dialog-slide-title"},"Delete Saved Mixtape: "+this.state.playlist.name+"?"),s.a.createElement(Y.a,null,s.a.createElement(y.a,{onClick:this.deletePlaylist,color:"primary"},"Delete"),s.a.createElement(y.a,{onClick:this.setInvisible,color:"primary"},"Close"))):null))}}]),n}(a.Component),le=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={playlists:e.props.playlists,sessionUser:e.props.sessionUser,user:e.props.user,history:e.props.history},e.setPlaylists=function(t){e.setState({playlists:t})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state.playlists.map((function(e){return s.a.createElement(re,{key:e.playlist_id,playlist:e,username:this.state.user.username,setPlaylists:this.setPlaylists,sessionUser:this.state.sessionUser,editing:this.props.editing,history:this.props.history,play:this.props.play,onPlayChange:this.props.onPlayChange,onPlaylistChange:this.props.onPlaylistChange,current_playlist:this.props.current_playlist})}),this);return s.a.createElement(s.a.Fragment,null,e)}}]),n}(a.Component),ie=(n(173),function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={showSavedPlaylists:!1,showMyPlaylists:!0,showUploadedSongs:!1,profileUsername:e.props.match.params.username,profileUserInfo:null,profileAccountCreationDate:null,profileFollowers:null,profilePlaylists:null,profileSavedPlaylists:null,loading:!0,isHovered:!1},e.componentDidMount=function(){e.props.username||e.props.history.push("/login"),e.setState({loading:!0});var t=e.state.profileUsername,n={query:'\n                query {\n                    getUserByUsername(username: "'.concat(t,'"){\n                        user {\n                            _id\n                            username\n                            profile_img\n                            joined\n                            followers {\n                                user_id\n                                username\n                            }\n\n                            saved_playlists {\n                                playlist_id \n                                name\n                            }\n                        }\n                        playlists {\n                            _id\n                            name\n                            username\n                            public\n                            likes\n                            total_duration\n                            playlist_img \n                            songs {\n                                song_id\n                                song_uri\n                                name\n                                artists\n                                song_img\n                            }\n                        }\n\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(n),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){t=t.data.getUserByUsername;var n=new Date(parseInt(t.user.joined)),a=2===e.props.history.location.pathname.split("/").length;e.setState({profileUserInfo:t.user,profileFollowers:t.user.followers,profilePlaylists:t.playlists,profileSavedPlaylists:t.user.saved_playlists,profileAccountCreationDate:["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]+" "+n.getDate()+", "+n.getFullYear(),loading:!1,showMyPlaylists:a,showSavedPlaylists:!a})})).catch((function(e){console.log(e)}))},e.toggleHover=function(){e.setState({isHovered:!e.state.isHovered})},e.handleUnfollow=function(){console.log(e.state.following);var t={query:'\n                mutation{\n                    unFollow(username: "'.concat(e.props.username,'", following_id: "').concat(e.state.profileUserInfo._id,'"){\n                   \n                            _id\n                            following {\n                                user_id\n                                username\n                            }\n                        \n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){console.log(t);var n=e.state.profileFollowers;n.forEach((function(t,a){t.username===e.props.username&&n.splice(a,1)})),e.setState({profileFollowers:n})})).catch((function(e){console.log(e)}))},e.isFollowing=function(){var t=e.state.profileFollowers,n=!1;return t.forEach((function(t){t.username===e.props.username&&(n=!0)})),n},e.changeView=function(t){"playlists-btn"===t.currentTarget.id?(e.setState({showMyPlaylists:!0,showSavedPlaylists:!1}),e.props.history.push("/"+e.state.profileUsername)):(e.setState({showMyPlaylists:!1,showSavedPlaylists:!0}),e.props.history.push("/"+e.state.profileUsername+"/saved-mixtapes"))},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.classes;return this.state.loading?s.a.createElement(s.a.Fragment,null," "):s.a.createElement("div",{className:"container-fluid playlist-container"},s.a.createElement("div",{className:"container-fluid playlist-data-container"},s.a.createElement("div",{className:"information-row"},s.a.createElement("div",{className:"col text-center"},s.a.createElement("div",{className:""},s.a.createElement("img",{alt:"playlist_img",src:this.state.profileUserInfo.profile_img,class:"user_picture"})),s.a.createElement("h2",null,this.state.profileUsername,s.a.createElement("div",{className:"follow"},this.state.profileUsername!==this.props.username?this.isFollowing()?s.a.createElement("button",{className:"following-btn align-self-center",onMouseEnter:this.toggleHover,onMouseLeave:this.toggleHover,onClick:this.handleUnfollow},this.state.isHovered?"Unfollow":"Following"):s.a.createElement("button",{className:"following-btn align-self-center"},"Follow"):null)),s.a.createElement("h5",null," User Since: ",this.state.profileAccountCreationDate))),s.a.createElement("div",{className:"navigation-row"},s.a.createElement(N.a,{className:e.container},s.a.createElement(w.a,{container:!0},s.a.createElement(w.a,{xs:!0,item:!0,align:"center"},s.a.createElement(y.a,{id:"playlists-btn",onClick:this.changeView,className:this.state.showMyPlaylists?e.buttonFocus:e.buttonNotFocus},this.state.profileUsername===this.props.username?"My Mixtapes":"Mixtapes")),s.a.createElement(w.a,{xs:!0,item:!0,align:"center"},s.a.createElement(y.a,{id:"saved-playlists-btn",onClick:this.changeView,className:this.state.showSavedPlaylists?e.buttonFocus:e.buttonNotFocus}," Saved Mixtapes "))))),this.state.showSavedPlaylists?s.a.createElement(le,{playlists:this.state.profileSavedPlaylists,user:this.state.profileUserInfo,sessionUser:this.props.username,history:this.props.history,play:this.props.play,onPlayChange:this.props.onPlayChange,onPlaylistChange:this.props.onPlaylistChange,current_playlist:this.props.current_playlist}):null,this.state.showMyPlaylists?s.a.createElement(oe,{playlists:this.state.profilePlaylists,user:this.state.profileUserInfo,sessionUser:this.props.username,history:this.props.history,play:this.props.play,onPlayChange:this.props.onPlayChange,onPlaylistChange:this.props.onPlaylistChange,current_playlist:this.props.current_playlist}):null,s.a.createElement("div",{className:"row blank-space"}," ")))}}]),n}(a.Component)),ce=Object(k.a)((function(e){return{buttonFocus:{borderRadius:"0",width:"100%",strokeLinecap:"round",border:"none","&:focus":{outline:"none"},borderBottom:"2px solid #004CB2",fontWeight:"bold"},buttonNotFocus:{width:"100%",border:"none","&:focus":{outline:"none"}},container:{padding:e.spacing(0,0,0,0)}}}))(ie),ue=n(119),pe=(n(174),function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={song:a.props.song,editing:a.props.editing,deleteConfirmVisible:!1,playlistId:a.props.playlist_id},a.setVisible=function(){a.setState({deleteConfirmVisible:!0})},a.setInvisible=function(){a.setState({deleteConfirmVisible:!1})},a.handleDelete=function(){a.removeSong(a.state.song,a.props.index)},a.moveUp=function(){console.log("move up"),a.handleMoveUp(a.state.song,a.props.index)},a.moveDown=function(){console.log("move down"),a.handleMoveDown(a.state.song,a.props.index)},a.handlePlay=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.props.current_playlist&&a.props.current_song&&a.props.current_playlist._id===a.props.playlist_id?a.props.current_playlist._id===a.props.playlist_id&&a.props.current_song.song_id===a.state.song.song_id?a.props.onPlayChange(!a.props.play):(console.log("SONG ON SONG CHANGE"),a.props.onSongChange(a.state.song.song_id)):(console.log("Play Playlist"),t={query:'\n                    query {\n                        getPlaylistByID(id : "'.concat(a.state.playlistId,'") {\n                            likes \n                            name \n                            public \n                            songs {\n                                name \n                                song_id \n                                song_uri\n                                song_img\n                            }\n                            total_duration \n                            username \n                            _id \n                        }\n                    }\n                ')},fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Playlist not found");return e.json()})).then((function(e){console.log(e.data.getPlaylistByID),a.props.onPlaylistChange(e.data.getPlaylistByID,a.state.song)})).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)}))),a.removeSong=a.props.removeSong,a.handleMoveUp=a.props.handleMoveUp,a.handleMoveDown=a.props.handleMoveDown,a}return Object(p.a)(n,[{key:"render",value:function(){return console.log(this.props.current_song,this.props.current_playlist),s.a.createElement("div",{className:"row song-row"},s.a.createElement("div",{className:"col song-col text-left"},this.props.index+1),s.a.createElement("div",{className:"col song-col text-left"},s.a.createElement("button",{className:"play-btn",onClick:this.handlePlayClick},this.props.play&&this.props.current_playlist._id===this.state.playlistId&&this.props.current_song.song_id===this.state.song.song_id?s.a.createElement(z.a,{onClick:this.handlePlay,size:24}):s.a.createElement(z.b,{onClick:this.handlePlay,size:24}))),s.a.createElement("div",{className:"col song-col"},s.a.createElement("img",{alt:"",src:this.state.song.song_img,class:"song_picture"})),s.a.createElement("div",{className:"col song-col text-left"},this.state.song.name),s.a.createElement("div",{className:"col song-col text-left"},this.state.song.artists),s.a.createElement("div",{className:"col song-col text-center"},this.state.song.duration<60?"0:"+(this.state.song.duration<10?"0"+this.state.song.duration:this.state.song.duration):Math.floor(this.state.song.duration/60)+":"+(this.state.song.duration%60<10?"0"+this.state.song.duration%60:this.state.song.duration%60)),s.a.createElement("div",{className:"col song-col text-center"},this.state.editing?s.a.createElement("div",null,this.props.index>0?s.a.createElement(J.e,{size:34,className:"upbtn",onClick:this.moveUp}):s.a.createElement(J.e,{size:34,disabled:!0,color:"#cccccc"}),this.props.index===this.props.playlist_length-1?s.a.createElement(J.d,{size:34,disabled:!0,color:"#cccccc"}):s.a.createElement(J.d,{size:34,class:"downbtn",onClick:this.moveDown})):null),s.a.createElement("div",{className:"col song-col text-center"},this.state.editing?s.a.createElement("button",{className:"delete-btn",onClick:this.handleDelete}," ",s.a.createElement(J.f,{size:24})):null))}}]),n}(a.Component)),me=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={songs:e.props.songs,playlist_id:e.props.playlist_id,editing:e.props.editing},e.handlePlayClick=function(e){console.log(e)},e.removeSong=function(t,n){console.log(t,n);var a=e.state.songs;a.splice(n,1),e.setState({songs:a})},e.handleMoveUp=function(t,n){console.log(t,n);var a=e.state.songs,s=a[n];a[n]=a[n-1],a[n-1]=s,e.setState({songs:a})},e.handleMoveDown=function(t,n){console.log(t,n);var a=e.state.songs,s=a[n];a[n]=a[n+1],a[n+1]=s,e.setState({songs:a})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state.songs.map((function(e,t){return s.a.createElement(pe,{key:e.name+e.song_id,song:e,index:t,editing:this.state.editing,playlist_id:this.state.playlist_id,removeSong:this.removeSong,handleMoveUp:this.handleMoveUp,handleMoveDown:this.handleMoveDown,playlist_length:this.props.songs.length,play:this.props.play,onPlayChange:this.props.onPlayChange,onPlaylistChange:this.props.onPlaylistChange,onSongChange:this.props.onSongChange,current_playlist:this.props.current_playlist,current_song:this.props.current_song})}),this);return s.a.createElement(s.a.Fragment,null,e)}}]),n}(a.Component),he=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={buttonsVisible:!1},a.setVisible=function(){console.log("BUTTONS VISIBLE"),a.setState({buttonsVisible:!0})},a.handleBlur=function(){""===a.state.text&&a.setState({buttonsVisible:!1})},a.handleCancel=function(){document.getElementById("comment-input").value="",a.setState({text:"",buttonsVisible:!1})},a.handleSubmit=function(){console.log(a.commentEl.current.value);var e={query:'\n            mutation {\n                addComment(playlist_id: "'.concat(a.props.playlist_id,'", username : "').concat(a.props.username,'", comment: "').concat(a.commentEl.current.value,'"){\n                    comments {\n                        _id\n                        user_id\n                        message \n                        date\n                        replies {\n                            user_id\n                            message\n                        }\n                    }\n                }\n            }\n        ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){console.log(e),a.props.stateChange(e.data.addComment.comments),a.commentEl.current.value="",a.setState({buttonsVisible:!1},(function(){console.log(this.state)}))})).catch((function(e){console.log(e)}))},a.commentEl=s.a.createRef(),a}return Object(p.a)(n,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("textarea",{id:"comment-input",className:"comment-text",type:"text",ref:this.commentEl,placeholder:"Add a Comment",onFocus:this.setVisible,onBlur:this.handleBlur}),!0===this.state.buttonsVisible?s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"comment-button",onClick:this.handleSubmit}," COMMENT "),s.a.createElement("button",{className:"comment-button",onClick:this.handleCancel,style:{color:"black",backgroundColor:"white",border:"none"}}," CANCEL ")):null)}}]),n}(a.Component),de=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={visibility:!1,text:""},e.onChange=function(t){e.setState({text:t.target.value})},e.setVisible=function(){e.setState({visibility:!0})},e.setInvisible=function(){e.setState({visibility:!1})},e.handleCancel=function(){e.setInvisible(),document.getElementById("comment-input").value="",e.setState({text:""})},e.handleSubmit=function(){var t={query:'\n            mutation {\n                addReply(user_id:"'.concat(e.props.user_id,'", message: "').concat(e.state.text,'", playlist_id: "').concat(e.props.playlist_id,'", comment_index: ').concat(e.props.commentIndex,"){\n\n                    comments {\n                        _id\n                        user_id\n                        message \n                        date \n                        replies {\n                            _id\n                            user_id\n                            message\n                        }\n                    }\n                }\n\n            }\n        ")};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){e.setInvisible(),e.props.stateChange(t.data.addReply.comments)})).catch((function(e){console.log(e)}))},e}return Object(p.a)(n,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,this.state.visibility?s.a.createElement(s.a.Fragment,null,s.a.createElement("textarea",{id:"comment-input",className:"comment-text",type:"text",placeholder:"Add a Comment",onChange:this.onChange}),s.a.createElement("button",{className:"comment-button",onClick:this.handleSubmit}," REPLY "),s.a.createElement("button",{className:"comment-button",onClick:this.handleCancel,style:{color:"black",backgroundColor:"white",border:"none"}}," CANCEL ")):s.a.createElement("button",{className:"reply-button",onClick:this.setVisible}," REPLY "))}}]),n}(a.Component),ge=n(78),fe=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={loading:!0,username:null},e.componentDidMount=function(){var t={query:'\n                query {\n                    getUserById (user_id : "'.concat(e.props.user_id,'"){\n                        username\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Playlist not found");return e.json()})).then((function(t){console.log(t.data.getUserById),e.setState({username:t.data.getUserById.username,loading:!1})})).catch((function(e){console.log(e)}))},e}return Object(p.a)(n,[{key:"render",value:function(){return this.state.loading?s.a.createElement(s.a.Fragment,null," "):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"username-row"},this.state.username),s.a.createElement("div",{className:"comment-row"},this.props.message))}}]),n}(a.Component),ye=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={repliesVisible:!1},e.toggleVisibility=function(){e.setState({repliesVisible:!e.state.repliesVisible})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.replies.map((function(e,t){return s.a.createElement("li",{key:e.user_id+t},s.a.createElement(fe,{user_id:e.user_id,message:e.message}))}),this);return s.a.createElement("div",null,this.state.repliesVisible?s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"view-replies-btn",onClick:this.toggleVisibility},s.a.createElement(ge.c,null),"Hide Replies"),s.a.createElement("div",{className:"container replies-container"},s.a.createElement("ul",null,e))):s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"view-replies-btn",onClick:this.toggleVisibility},s.a.createElement(ge.b,null),"Show Replies")))}}]),n}(a.Component),Ee=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={editVisible:!1,text:e.props.message,username:null,loading:!0},e.componentDidMount=function(){var t={query:'\n                query {\n                    getUserById (user_id : "'.concat(e.props.user_id,'"){\n                        username\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Playlist not found");return e.json()})).then((function(t){console.log(t.data.getUserById),e.setState({username:t.data.getUserById.username,loading:!1})})).catch((function(e){console.log(e)}))},e.handleUpdate=function(t){e.setState({text:t.target.value,loading:!1})},e.handleEditVisibility=function(){console.log("HERE"),e.setState({editVisible:!e.state.editVisible})},e.handleDelete=function(){e.props.comments.splice(e.props.index,1);var t={query:'\n                mutation {\n                    deleteComment(playlist_id: "'.concat(e.props.playlist_id,'", user_id: "').concat(e.props.user_id,'", index: ').concat(e.props.index,") {\n                        comments {\n                            _id\n                            user_id\n                            message\n                            replies {\n                                message\n                            }\n                        }\n\n                    }\n                }\n                ")};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Playlist not found");return e.json()})).then((function(t){e.props.updateComments(t.data.deleteComment.comments),e.setState({editVisible:!1})})).catch((function(e){console.log(e)}))},e.handleEditSubmit=function(){console.log(e.state.text);var t={query:'\n            mutation {\n                editComment(user_id: "'.concat(e.props.user_id,'", message: "').concat(e.state.text,'", playlist_id: "').concat(e.props.playlist_id,'", comment_index : ').concat(e.props.index,"){\n                    comments {\n                        _id\n                        user_id\n                        message \n                        date\n                        replies {\n                            user_id\n                            message\n                        }\n                    }\n                }\n            }\n        ")};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error(e);return e.json()})).then((function(t){console.log(t),e.handleEditVisibility(),e.props.updateComments(t.data.editComment.comments)})).catch((function(e){console.log(e)}))},e}return Object(p.a)(n,[{key:"render",value:function(){return this.state.loading?s.a.createElement(s.a.Fragment,null," "):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"row username-row"},this.state.username,this.state.username===this.props.sessionUser?s.a.createElement("button",{onClick:this.handleEditVisibility,className:"delete-button"}," Edit "):null),s.a.createElement("div",{className:"row comment-row"},this.state.editVisible?s.a.createElement(s.a.Fragment,null,s.a.createElement("textarea",{id:"comment-input",className:"comment-text",type:"text",placeholder:this.props.message,onChange:this.handleUpdate}),s.a.createElement("button",{className:"comment-button",onClick:this.handleEditSubmit}," EDIT "),s.a.createElement("button",{className:"comment-button",onClick:this.handleEditVisibility,style:{color:"black",backgroundColor:"white",border:"none"}}," CANCEL "),s.a.createElement("button",{className:"comment-button",onClick:this.handleDelete}," DELETE ")):s.a.createElement(s.a.Fragment,null,this.props.message," ")),s.a.createElement("div",{className:"row replies-row"},s.a.createElement(de,{commentIndex:this.props.index,user_id:this.props.user_id,playlist_id:this.props.playlist_id,stateChange:this.props.stateChange})),s.a.createElement("div",{className:"row replies-row"},this.props.replies.length>0?s.a.createElement(ye,{replies:this.props.replies}):null))}}]),n}(a.Component),be=(n(175),function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={comments:e.props.comments,editCommentVisible:!1},e.stateChange=function(t){e.setState({comments:t},(function(){console.log(this.state.comments)}))},e.updateComments=function(t){e.setState({comments:t})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state.comments.map((function(e,t){return s.a.createElement("div",{key:e.user_id+" "+t.toString(),className:"container result-container"},s.a.createElement(Ee,{user_id:e.user_id,message:e.message,index:t,replies:e.replies,sessionUser:this.props.username,playlist_id:this.props.playlist_id,stateChange:this.stateChange,updateComments:this.updateComments,comments:this.state.comments}))}),this);return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"container comments-container"},s.a.createElement("div",{className:"row"},s.a.createElement(he,{playlist_id:this.props.playlist_id,username:this.props.username,stateChange:this.stateChange})),e))}}]),n}(a.Component)),ve=(n(176),function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={playlist:a.props.playlist,save:!1,edit:a.props.editing,public:a.props.playlist.public,playlist_img:a.props.playlist.playlist_img,deleteConfirmVisible:!1},a.handleEditClick=function(){a.setState({edit:!a.state.edit},(function(){a.onChange("edit-status",a.state.edit)}))},a.handleSave=function(){a.setState({edit:!a.state.edit},(function(){a.onChange("edit-status",a.state.edit),a.onChange("save",null)}))},a.handleCancel=function(){a.setState({edit:!a.state.edit},(function(){a.onChange("edit-status",a.state.edit),a.onChange("revert",null)}))},a.changePrivacy=function(){a.state.playlist.public=!a.state.public,a.setState({public:!a.state.public})},a.changeName=function(e){var t=a.state.playlist;t.name=e.target.value,a.setState({playlist:t})},a.confirmDelete=function(){a.setState({deleteConfirmVisible:!0})},a.deleteConfirmVisibleClose=function(){a.setState({deleteConfirmVisible:!1})},a.handleDelete=function(){var e={query:'\n                mutation {\n                    deletePlaylist (id : "'.concat(a.props.playlist_id,'") {\n                        _id \n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){a.props.history.push("/"+a.props.username)})).catch((function(e){console.log(e)}))},a.Post=function(e){e.preventDefault();var t=document.getElementById("photo-input").files,n=new FormData;n.append("img",t[0]),fetch("https://easytunes.herokuapp.com/",{method:"POST",body:n}).then((function(e){console.log(e)}));var s=a.state.playlist;s.playlist_img="https://easytunes.herokuapp.com/image_file/".concat(t[0].name),a.setState({playlist:s}),console.log(t[0])},a.onChange=a.props.onChange,a}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"settings-row"},this.state.edit?s.a.createElement(y.a,{onClick:this.changePrivacy,className:e.privacyButton}," ",this.state.public?"Public":"Private"," "):null),s.a.createElement("div",{className:"settings-row"},"Mixtape Name",s.a.createElement("input",{type:"text",disabled:!this.state.edit,defaultValue:this.state.playlist.name,required:!0,onChange:this.changeName})),this.state.edit?s.a.createElement("div",{className:"photo_input"},"Upload Mixtape Photo",s.a.createElement("div",{className:""},s.a.createElement("div",{className:"custom-file"},s.a.createElement("input",{type:"file",id:"photo-input",accept:"image/*"}))),s.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.Post},"Upload"),s.a.createElement("img",{id:"img",style:{display:"block",height:"200px",width:"200px","margin-top":"5px"},src:this.state.playlist.playlist_img})):null,s.a.createElement("div",{className:"settings-row"},this.state.edit?s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"save-btn",onClick:this.handleSave}," Save "),s.a.createElement("button",{className:"cancel-btn",onClick:this.handleCancel}," Cancel ")):s.a.createElement("button",{className:"save-btn",onClick:this.handleEditClick},"Edit "),s.a.createElement("button",{className:"delete-btn",onClick:this.confirmDelete},"Delete")),this.state.deleteConfirmVisible?s.a.createElement(W.a,{open:this.state.deleteConfirmVisible,keepMounted:!0,onClose:this.deleteConfirmVisibleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",fullWidth:!0,maxWidth:"sm"},s.a.createElement(G.a,{id:"alert-dialog-slide-title"},"Delete Mixtape: "+this.state.playlist.name+"?"),s.a.createElement(Y.a,null,s.a.createElement(y.a,{onClick:this.handleDelete,color:"primary"},"Delete"),s.a.createElement(y.a,{onClick:this.deleteConfirmVisibleClose,color:"primary"},"Close"))):null)}}]),n}(a.Component)),we=Object(k.a)((function(e){return{privacyButton:{background:"#696969","&:focus":{outline:"none"},backgroundColor:"#FFF",color:"#FFF","&:hover":{backgroundColor:"#696969"}},editSaveButton:{"&:focus":{outline:"none"},"&:hover":{backgroundColor:"#696969"}}}}))(ve),_e=n(118),Ce=n.n(_e),Se=(n(177),n(87)),ke=n.n(Se),Ne=n(86),Oe=n.n(Ne),Pe=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={songsVisible:!0,commentsVisible:!1,settingsVisible:!1,playlistInfo:null,playlistId:a.props.match.params.playlistid,username:a.props.match.params.username,loading:!0,editing:!1,forkPopupVisible:!1,error:"",liked:!1,favorited:null},a.getPlaylist=function(){a.setState({loading:!0}),console.log(a.state.playlistId);var e={query:'\n                query {\n                    getPlaylistByID (id : "'.concat(a.state.playlistId,'"){\n                        name \n                        username \n                        date_created\n                        total_duration \n                        playlist_img\n                        likes \n                        public \n                        comments {\n                            _id\n                            user_id\n                            date\n                            message\n                            replies {\n                                _id\n                                user_id\n                                date\n                                message\n                            }\n                        }\n                        songs {\n                            song_id \n                            song_uri\n                            name \n                            artists\n                            duration\n                            song_img\n                        }\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Playlist not found");return e.json()})).then((function(e){var t=e.data.getPlaylistByID;console.log(e);var n={query:'\n                        query {\n                            getUserByUsername (username : "'.concat(a.props.username,'") {\n                                user {\n                                    liked_playlists{ \n                                        playlist_id\n                                        name\n                                    }\n                                }\n                            }\n                        }\n                    ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(n),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){e=e.data.getUserByUsername.user,console.log(e.liked_playlists);var n=!1;e.liked_playlists.forEach((function(e){e.playlist_id===a.state.playlistId&&(n=!0)}));var s={query:'\n                                       query {\n                                           getUserByUsername(username: "'.concat(a.props.username,'"){\n                                               user {\n                                                   saved_playlists {\n                                                       playlist_id\n                                                   }\n                                               }\n                                           }\n                                       }\n                                    ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){var s=e.data.getUserByUsername.user.saved_playlists;console.log("HERE");var o=!1;s.forEach((function(e){e.playlist_id===a.state.playlistId&&(o=!0)})),console.log("HERE"),a.setState({playlistInfo:t,loading:!1,liked:n,favorited:o})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},a.componentDidMount=function(){a.props.username||a.props.history.push("/login"),a.getPlaylist()},a.forkPlaylist=function(){console.log(a.state.username);var e={query:'\n                query {\n                    getUserByUsername (username : "'.concat(a.state.username,'") {\n                        user {\n                            _id\n                        }\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){t=t.data.getUserByUsername.user._id;var n=[];a.state.playlistInfo.songs.forEach((function(e){n.push(JSON.stringify({song_id:e.song_id,name:e.name,uploaded:e.uploaded,artists:e.artists,duration:e.duration,song_img:e.song_img}))}));var s=a.nameEl.current.children[1].children[0].value.trim();e={query:'\n                        mutation {\n                            forkPlaylist (username : "'.concat(a.props.username,'", playlist_id : "').concat(a.state.playlistId,'", name: "').concat(s,'") {\n                                _id \n                            }\n                        }\n                    ')},console.log("requesting"),fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){console.log(e),e.errors?a.setState({error:e.errors[0].message}):a.setForkInvisible()})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},a.setForkVisible=function(){a.setState({forkPopupVisible:!0})},a.setForkInvisible=function(){a.setState({forkPopupVisible:!1})},a.handleLike=function(){var e={query:'\n                mutation {\n                    like_unlikePlaylist(username: "'.concat(a.props.username,'", playlist_id: "').concat(a.state.playlistId,'", playlist_name: "').concat(a.state.playlistInfo.name,'"){\n                        _id\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){var t=a.state.playlistInfo;a.state.liked?t.likes-=1:t.likes+=1,a.setState({liked:!a.state.liked,playlist:t})})).catch((function(e){console.log(e)}))},a.handleFavorite=function(){var e={query:'\n                mutation { \n                    addSavedPlaylist(username: "'.concat(a.props.username,'", playlist_id: "').concat(a.state.playlistId,'", name: "').concat(a.state.playlistInfo.name,'"){\n                            _id\n                            name\n                            username\n                            songs {\n                                song_id\n                                name\n                            }\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){console.log(e),a.setState({favorited:!0})})).catch((function(e){console.log(e)}))},a.handlePlay=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==a.props.current_playlist&&a.props.current_playlist._id===a.state.playlistId?a.props.onPlayChange(!a.props.play):(console.log("Change playlist"),(t=a.state.playlistInfo)._id=a.state.playlistId,a.props.onPlaylistChange(t,a.state.playlistInfo.songs[0]));case 1:case"end":return e.stop()}}),e)}))),a.onChange=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("playlist"!==t){e.next=4;break}a.setState({playlist:n}),e.next=27;break;case 4:if("revert"!==t){e.next=9;break}a.setState({songsVisible:!0,commentsVisible:!1,settingsVisible:!1}),a.getPlaylist(),e.next=27;break;case 9:if("save"!==t){e.next=26;break}return a.updatePrivacy(),a.updateName(),a.updateImg(),console.log(a.state.playlistId),e.next=16,a.removeSongs();case 16:console.log(a.state.playlistInfo.songs),s=0;case 18:if(!(s<a.state.playlistInfo.songs.length)){e.next=24;break}return e.next=21,a.addSong(a.state.playlistInfo.songs[s]);case 21:s++,e.next=18;break;case 24:e.next=27;break;case 26:a.setState({editing:n});case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.updatePrivacy=function(){var e=a.state.playlistInfo,t={query:'\n                    mutation {\n                        changePlaylistPrivacy(id: "'.concat(a.state.playlistId,'", privacy: ').concat(e.public,"){\n                            _id \n                        }\n                    }\n                ")};a.fetch(t)},a.updateName=function(){var e=a.state.playlistInfo,t={query:'\n                    mutation {\n                        changePlaylistName(id: "'.concat(a.state.playlistId,'", name: "').concat(e.name,'"){\n                            _id \n                        }\n                    }\n                ')};a.fetch(t)},a.updateImg=function(){var e=a.state.playlistInfo,t={query:'\n                    mutation {\n                        changePlaylistImg(id: "'.concat(a.state.playlistId,'", img: "').concat(e.playlist_img,'"){\n                            _id \n                        }\n                    }\n                ')};a.fetch(t)},a.removeSongs=function(){return new Promise((function(e,t){var n={query:'\n                        mutation {\n                            removeAllSongs(id: "'.concat(a.state.playlistId,'"){\n                                _id \n                            }\n                        }\n                    ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(n),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Playlist not found");return e.json()})).then((function(t){e(t)})).catch((function(e){console.log(e)}))}))},a.addSong=function(e){return new Promise((function(t,n){var s="";s+=e.artists.map((function(e){return"\n"+e}));var o={query:'\n                        mutation {\n                            addSong(songInput: {_id: "'.concat(e.song_id,'", name: "').concat(e.name,'", artists: """').concat(s,'""", uploaded: false, duration: ').concat(e.duration,', img: "').concat(e.song_img,'",uri: "').concat(e.song_uri,'"}, playlist_id: "').concat(a.state.playlistId,'"){\n                                _id\n                            }\n                        }\n                    ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(o),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Playlist not found");return e.json()})).then((function(e){t(e)})).catch((function(e){console.log(e)}))}))},a.fetch=function(e){fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Playlist not found");return e.json()})).catch((function(e){console.log(e)}))},a.changeView=function(e){console.log(e.target),"songs-btn"===e.currentTarget.id?a.setState({songsVisible:!0,commentsVisible:!1,settingsVisible:!1}):"comments-btn"===e.currentTarget.id?a.setState({songsVisible:!1,commentsVisible:!0,settingsVisible:!1}):a.setState({songsVisible:!1,commentsVisible:!1,settingsVisible:!0})},a.nameEl=s.a.createRef(),a}return Object(p.a)(n,[{key:"render",value:function(){if(this.state.loading)return s.a.createElement(s.a.Fragment,null," ");var e=this.props.classes;function t(e){var t=e.username,n=e.history;return s.a.createElement("button",{className:"user-btn",onClick:function(){n.history.push("/"+t)}}," ",t," ")}return console.log(this.state.favorited),s.a.createElement("div",{className:"container-fluid playlist-container playlist"},s.a.createElement("div",{className:"container-fluid playlist-data-container"},s.a.createElement("div",{className:"information-row"},s.a.createElement("div",{className:"col text-center align-self-center playlist-col"},s.a.createElement("div",{className:"likes"},this.state.liked?s.a.createElement(K.a,{fontSize:"large",onClick:this.handleLike}):s.a.createElement(Ce.a,{onClick:this.handleLike,fontSize:"large"}),this.state.playlistInfo.likes,this.props.username!==this.state.username?s.a.createElement(s.a.Fragment,null,this.state.favorited?s.a.createElement(V.a,null,s.a.createElement(ke.a,{fontSize:"large"})):s.a.createElement(V.a,{onClick:this.handleFavorite},s.a.createElement(Oe.a,{fontSize:"large"}))):null)),s.a.createElement("div",{className:"col text-center align-self-left playlist-col"},s.a.createElement("div",{className:"col"},s.a.createElement("img",{alt:"playlist_img",src:this.state.playlistInfo.playlist_img,class:"song_picture"})),s.a.createElement("h2",null,this.state.playlistInfo.name," ",this.state.playlistInfo.public?s.a.createElement(J.a,{size:24}):s.a.createElement(J.b,{size:24})),s.a.createElement("h5",null," Mixtape By: ",s.a.createElement(t,{username:this.state.playlistInfo.username,history:this.props})," "),s.a.createElement("div",null,this.state.playlistInfo.total_duration<3600?"0 hr "+(this.state.playlistInfo.total_duration<600?"0"+Math.floor(this.state.playlistInfo.total_duration/60)+" min":Math.floor(this.state.playlistInfo.total_duration/60)+" min"):Math.floor(this.state.playlistInfo.total_duration/3600)+" hr "+(this.state.playlistInfo.total_duration%3600<600?"0"+Math.floor(this.state.playlistInfo.total_duration/60)+" min":Math.floor(this.state.playlistInfo.total_duration/60)+" min"))),s.a.createElement("div",{className:"col text-center align-self-center playlist-col"},s.a.createElement("div",null,this.state.playlistInfo.songs.length>0?s.a.createElement(s.a.Fragment,null,this.props.play&&this.props.current_playlist.name===this.state.playlistInfo.name?s.a.createElement(z.a,{className:"playlist-play-btn text-center align-self-center",onClick:this.handlePlay,size:34}):s.a.createElement(z.b,{className:"playlist-play-btn text-center align-self-center",onClick:this.handlePlay,size:34})):null,s.a.createElement(z.c,{size:34,className:"share",onClick:function(){navigator.clipboard.writeText(window.location.href)}}),s.a.createElement(ue.a,{size:34,className:"fork",onClick:this.setForkVisible}))),this.state.forkPopupVisible?s.a.createElement(W.a,{open:this.state.forkPopupVisible,keepMounted:!0,onClose:this.setForkInvisible,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",fullWidth:!0,maxWidth:"sm"},s.a.createElement(G.a,{id:"alert-dialog-slide-title"},"Fork Mixtape: "+this.state.playlistInfo.name),s.a.createElement(te.a,null,this.state.error?s.a.createElement(ne.a,null," ",this.state.error," "):null,s.a.createElement(b.a,{autoFocus:!0,margin:"dense",id:"name",label:"Mixtape Name",type:"text",fullWidth:!0,ref:this.nameEl})),s.a.createElement(Y.a,null,s.a.createElement(y.a,{onClick:this.forkPlaylist,color:"primary"},"Fork"),s.a.createElement(y.a,{onClick:this.setForkInvisible,color:"primary"},"Close"))):null),this.state.playlistInfo.username===this.props.username?s.a.createElement("div",{className:"navigation-row"},s.a.createElement(N.a,{className:e.container},s.a.createElement(w.a,{container:!0},s.a.createElement(w.a,{xs:!0,item:!0,align:"center"},s.a.createElement(y.a,{id:"songs-btn",onClick:this.changeView,className:this.state.songsVisible?e.buttonFocus:e.buttonNotFocus},"Songs")),s.a.createElement(w.a,{xs:!0,item:!0,align:"center"},s.a.createElement(y.a,{id:"comments-btn",onClick:this.changeView,className:this.state.commentsVisible?e.buttonFocus:e.buttonNotFocus},"Comments")),s.a.createElement(w.a,{xs:!0,item:!0,align:"center"},s.a.createElement(y.a,{id:"settings-btn",onClick:this.changeView,className:this.state.settingsVisible?e.buttonFocus:e.buttonNotFocus},"Settings"))))):s.a.createElement("div",{className:"navigation-row"},s.a.createElement(N.a,{className:e.container},s.a.createElement(w.a,{container:!0},s.a.createElement(w.a,{xs:!0,item:!0,align:"center"},s.a.createElement(y.a,{id:"songs-btn",onClick:this.changeView,className:this.state.songsVisible?e.buttonFocus:e.buttonNotFocus},"Songs")),s.a.createElement(w.a,{xs:!0,item:!0,align:"center"},s.a.createElement(y.a,{id:"comments-btn",onClick:this.changeView,className:this.state.commentsVisible?e.buttonFocus:e.buttonNotFocus},"Comments"))))),this.state.songsVisible?s.a.createElement(me,{playlist_id:this.state.playlistId,songs:this.state.playlistInfo.songs,editing:this.state.editing,play:this.props.play,onPlayChange:this.props.onPlayChange,onPlaylistChange:this.props.onPlaylistChange,onSongChange:this.props.onSongChange,current_playlist:this.props.current_playlist,current_song:this.props.current_song}):null,this.state.commentsVisible?s.a.createElement(be,{comments:this.state.playlistInfo.comments,username:this.props.username,playlist_id:this.state.playlistId}):null,this.state.settingsVisible?s.a.createElement(we,{username:this.props.username,history:this.props.history,playlist_id:this.state.playlistId,playlist:this.state.playlistInfo,editing:this.state.editing,onChange:this.onChange}):null,s.a.createElement("div",{className:"row blank-space"}," ")))}}]),n}(a.Component),je=Object(k.a)((function(e){return{buttonFocus:{borderRadius:"0",width:"100%",strokeLinecap:"round",border:"none","&:focus":{outline:"none"},borderBottom:"2px solid #004CB2",fontWeight:"bold"},buttonNotFocus:{width:"100%",border:"none","&:focus":{outline:"none"}},container:{padding:e.spacing(0,0,0,0)}}}))(Pe),Ue=n(249),xe=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={},e.componentDidMount=function(){e.props.username&&e.props.history.push("/home")},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("div",{className:e.root},s.a.createElement(T,null),s.a.createElement(Ue.a,{className:e.hero},s.a.createElement(Ue.a,{textAlign:"center"},s.a.createElement(S.a,{className:e.title,color:"textSecondary",gutterBottom:!0},"Follow Music Mixtapes"),s.a.createElement(S.a,{className:e.title,color:"textSecondary"},"Join Conversations"),s.a.createElement(d.b,{to:"/register"},s.a.createElement(y.a,{variant:"contained",color:"secondary"},"Get Started")))))}}]),n}(a.Component),Fe=Object(k.a)((function(e){return{root:{minHeight:"100vh",backgroundImage:"url(".concat("../../assets/home.jpg",")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",flexGrow:1,justifyContent:"center"},hero:{height:"100vh",background:"none",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",color:"black",fontSize:"3rem"},title:{fontSize:"3rem",color:"black",display:"flex",justifyContent:"center",alignItems:"center"}}}))(xe),qe=(n(178),n(95),function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={playlist:a.props.playlist,history:a.props.history},a.toPlaylist=function(){a.state.history.push("/"+encodeURIComponent(a.state.playlist.username)+"/mixtape="+a.state.playlist._id)},a.setPlaylists=a.props.setPlaylists,a}return Object(p.a)(n,[{key:"render",value:function(){this.state.playlist,this.props.classes;return s.a.createElement("div",{className:"playlist-row playlist-button",onClick:this.toPlaylist},s.a.createElement("div",{className:"card-content col s1"},s.a.createElement("img",{alt:"playlist_img",src:this.state.playlist.playlist_img,class:"song_picture"})),s.a.createElement("div",{className:"card-content col s3",onClick:this.toPlaylist},s.a.createElement("button",null,s.a.createElement("span",{className:"card-title"},this.state.playlist.name))),s.a.createElement("div",{className:"card-content col s3",onClick:this.toPlaylist},s.a.createElement("span",{className:"card-title"},this.state.playlist.username)),s.a.createElement("div",{className:"card-content col s1",onClick:this.toPlaylist},s.a.createElement("span",{className:"card-title"},this.state.playlist.likes)),s.a.createElement("div",{className:"card-content col s3"},s.a.createElement("span",{className:"card-title"},this.state.playlist.songs.length," ",1===this.state.playlist.songs.length?"Song ":"Songs "),"- ",s.a.createElement("span",{className:"card-title"},this.state.playlist.total_duration<3600?"0 hr "+(this.state.playlist.total_duration<600?"0"+Math.floor(this.state.playlist.total_duration/60)+" min":Math.floor(this.state.playlist.total_duration/60)+" min"):Math.floor(this.state.playlist.total_duration/3600)+" hr "+(this.state.playlist.total_duration%3600<600?"0"+Math.floor(this.state.playlist.total_duration/60)+" min":Math.floor(this.state.playlist.total_duration/60)+" min"))))}}]),n}(a.Component)),Ie=Object(k.a)((function(e){return{deleteBtn:{"&:focus":{outline:"none"}}}}))(qe),Me=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={playlists:e.props.playlists},e.setPlaylists=function(t){e.setState({playlists:t})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state.playlists.map((function(e){return s.a.createElement(Ie,{playlist:e,key:e._id,history:this.props.history})}),this);return s.a.createElement(s.a.Fragment,null,e)}}]),n}(a.Component),Ve=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={loading:!0,current_playlist:null,current_song:null,index:-1,top_five:null},e.componentDidMount=function(){e.props.username||e.props.history.push("/login"),e.setState({loading:!0});var t=null,n={query:'\n                query {\n                  getUserByUsername(username: "'.concat(e.props.username,'"){\n                      user{\n                      current_song_id\n                      current_playlist_id\n                      }\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(n),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Playlist not found");return e.json()})).then((function(a){null==(a=a.data.getUserByUsername.user).current_playlist_id?e.setState({loading:!1}):(n={query:'\n                        query {\n                          getPlaylistByID(id : "'.concat(a.current_playlist_id,'"){\n                            _id\n                            name\n                            playlist_img\n                            total_duration\n                            songs {\n                              song_id\n                              name\n                              artists\n                              uploaded\n                              duration\n                              song_img\n                            }\n                            }\n                        }\n                    ')},t=a.current_song_id,fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(n),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Playlist not found");return e.json()})).then((function(n){n=n.data.getPlaylistByID;var a=-1;n.songs.forEach((function(e,n){e.song_id===t&&(a=n)})),e.setState({current_playlist:n,current_song:t,index:a,loading:!1})})).catch((function(e){console.log(e)})))})).catch((function(e){console.log(e)})),console.log("loading top five"),e.loadTopFive()},e.loadTopFive=function(){console.log("loading top five 2");fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify({query:"\n            query {\n              topFivePlaylists{\n                _id \n                name \n                username\n                likes\n                total_duration \n                playlist_img\n                songs {\n                  song_id\n                  song_uri\n                  name\n                  artists\n                  song_img\n                }\n              }\n            }\n        "}),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Playlist not found");return e.json()})).then((function(t){console.log("loading top five 3"),t=t.data.topFivePlaylists,console.log(t),e.setState({top_five:t})})).catch((function(e){console.log(e)}))},e.handleHome=function(){e.props.history.replace("/home")},e.getArtists=function(){var t="";return e.props.current_song.artists.forEach((function(e,n){t=0===n?e:t+", "+e})),console.log(t),t},e}return Object(p.a)(n,[{key:"render",value:function(){return this.state.loading?s.a.createElement(s.a.Fragment,null):(console.log(this.props.access_token),s.a.createElement("div",{className:"container-fluid  user-home-container",ref:this.container},s.a.createElement("div",{className:"container-child",style:{width:"50%","margin-left":"10px"}},s.a.createElement("div",{className:"row"},s.a.createElement("h3",{className:"current-playlist"},"Top Mixtapes")),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s1 current-playlist"}),s.a.createElement("div",{className:"col s3 current-playlist"},"Name"),s.a.createElement("div",{className:"col s3 current-playlist"},"Username"),s.a.createElement("div",{className:"col s1 current-playlist"},"Likes"),s.a.createElement("div",{className:"col s3 current-playlist"},"Songs"),s.a.createElement("div",{className:"col s3 current-playlist"})),this.state.top_five?s.a.createElement(Me,{playlists:this.state.top_five,history:this.props.history}):null),s.a.createElement("div",{className:"container-child",style:{width:"50%"}},s.a.createElement("div",{className:"container-fluid text-center"},s.a.createElement("div",{className:"current-playlist"},"CURRENT MIXTAPE"),s.a.createElement("div",{className:"current-playlist-name"},this.props.current_playlist?this.props.current_playlist.name:"N/A")),s.a.createElement("div",{className:"image-container"},s.a.createElement("img",{src:this.props.current_playlist?this.props.current_playlist.playlist_img:"https://community.spotify.com/t5/image/serverpage/image-id/25294i2836BD1C1A31BDF2?v=1.0",alt:"",class:"home_card"})),s.a.createElement("div",{className:"container-fluid text-center song-info-row"},s.a.createElement("div",{className:"song-name"},this.props.current_playlist?this.props.current_song.name:"Song Name"),s.a.createElement("div",{className:"song-artist"},this.props.current_playlist?this.getArtists():"Artist")))))}}]),n}(a.Component),Be=(n(179),n(120)),Te=n.n(Be),Ae=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={playlists:null,song:a.props.song,username:a.props.username,loading:!0,open:!1,createNew:!1,error:null},a.componentDidMount=function(){a.setState({loading:!0});var e={query:'\n                query {\n                    getUserByUsername(username: "'.concat(a.props.username,'"){\n                        playlists {\n                            _id\n                            name\n                            songs {\n                                song_id\n                                name\n                            }\n                        }\n\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){a.setState({playlists:e.data.getUserByUsername.playlists,loading:!1})})).catch((function(e){console.log(e)}))},a.changeVisible=function(){a.setState({visible:!a.state.visible})},a.handleAdd=function(e){var t="";t+=a.state.song.artists.map((function(e){return"\n"+e.name}));var n=a.millisToSeconds(a.state.song.duration_ms);console.log(e.currentTarget);var s={query:'\n                mutation {\n                    addSong(songInput: {_id: "'.concat(a.state.song.id,'", name: "').concat(a.state.song.name,'", artists: """').concat(t,'""", uploaded: false, duration: ').concat(n,', img: "').concat(a.state.song.album.images[0].url,'" , uri: "').concat(a.state.song.uri,'"}, playlist_id: "').concat(e.currentTarget.id,'"){\n                        _id\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){a.handleClose()})).catch((function(e){console.log(e)}))},a.createAndAdd=function(){console.log("HERE");var e=a.nameEl.current.children[1].children[0].value.trim(),t={query:'\n                query {\n                    getUserByUsername(username: "'.concat(a.props.username,'"){\n                        user{\n                            _id\n                        }\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(n){t={query:'\n                                        mutation {\n                                            createPlaylist (username : "'.concat(a.props.username,'", name : "').concat(e,'", user_id: "').concat(n.data.getUserByUsername.user._id,'") {\n                                                _id \n                                            }\n                                        }\n                                    ')},fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(e.errors)a.setState({error:e.errors[0].message});else{var t="";t+=a.state.song.artists.map((function(e){return"\n"+e.name}));var n=a.millisToSeconds(a.state.song.duration_ms),s={query:'\n                                                    mutation {\n                                                        addSong(songInput: {_id: "'.concat(a.state.song.id,'", \n                                                            name: "').concat(a.state.song.name,'", \n                                                            artists: """').concat(t,'""", \n                                                            uploaded: false, \n                                                            duration: ').concat(n,', \n                                                            img: "').concat(a.state.song.album.images[0].url,'" , \n                                                            uri: "').concat(a.state.song.uri,'"}, \n                                                            playlist_id: "').concat(e.data.createPlaylist._id,'"){\n\n                                                            _id\n                                                            name \n                                                            songs {\n                                                                name \n                                                                song_id\n                                                            }\n                                                        }\n                                                    }\n                                                ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(s),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){console.log(e.data.addSong);var t=a.state.playlists;t.push(e.data.addSong),a.setState({playlists:t,error:"",open:!1,createNew:!1}),console.log(t)})).catch((function(e){console.log(e)}))}})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1,createNew:!1})},a.openNew=function(){a.setState({createNew:!0})},a.closeNew=function(){a.setState({createNew:!1})},a.anchorEl=null,a.nameEl=s.a.createRef(),a}return Object(p.a)(n,[{key:"millisToSeconds",value:function(e){return Math.floor(e/1e3)}},{key:"render",value:function(){var e=this;if(this.state.loading)return s.a.createElement(s.a.Fragment,null," ");var t=this.props.classes;return s.a.createElement("div",null,s.a.createElement(V.a,{onClick:this.handleClickOpen,className:t.iconButton},s.a.createElement(Te.a,{variant:"outlined",color:"primary",fontSize:"large"})),s.a.createElement(W.a,{open:this.state.open,keepMounted:!0,onClose:this.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",className:t.dialog,fullWidth:!0,maxWidth:"sm"},this.state.createNew?s.a.createElement(s.a.Fragment,null,s.a.createElement(G.a,{id:"alert-dialog-slide-title"},"Add Song to New Mixtape"),s.a.createElement(te.a,null,this.state.error?s.a.createElement(ne.a,null," ",this.state.error," "):null,s.a.createElement(b.a,{autoFocus:!0,margin:"dense",id:"name",label:"Playlist Name",type:"text",fullWidth:!0,ref:this.nameEl})),s.a.createElement(Y.a,null,s.a.createElement(y.a,{onClick:this.createAndAdd,color:"primary",className:t.button},"Create and Add"),s.a.createElement(y.a,{onClick:this.closeNew,color:"primary",className:t.button},"Back"))):s.a.createElement(s.a.Fragment,null,s.a.createElement(G.a,{id:"alert-dialog-slide-title"},"Add Song to Mixtape"),this.state.playlists.map((function(n){return s.a.createElement(te.a,null,s.a.createElement(y.a,{className:t.dialogButton,id:n._id,onClick:e.handleAdd},n.name))})),s.a.createElement(Y.a,null,s.a.createElement(y.a,{onClick:this.openNew,color:"primary"},"New Mixtape"),s.a.createElement(y.a,{onClick:this.handleClose,color:"primary"},"Cancel")))))}}]),n}(a.Component),Re=Object(k.a)((function(e){return{dialog:{minWidth:"300px"},dialogButton:{width:"100%",background:"transparent","&:focus":{outline:"none"}},iconButton:{width:"100%",background:"transparent","&:focus":{outline:"none"}},button:{"&:focus":{outline:"none"}}}}))(Ae),De=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={user:e.props.user,sessionUserRequests:null,sessionUserFollowers:null,loading:!0,isHovered:!1},e.componentDidMount=function(){e.setState({loading:!0});var t={query:'\n                query {\n                    getUserByUsername(username: "'.concat(e.props.sessionUser,'"){\n                        user {\n                            _id\n                            follow_requests {\n                                user_id\n                                username\n                                profile_img\n                            }\n                            followers {\n                                user_id \n                                username\n                                profile_img\n                            }\n                        }\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){e.setState({sessionUserRequests:t.data.getUserByUsername.user.follow_requests,sessionUserFollowers:t.data.getUserByUsername.user.followers,loading:!1})})).catch((function(e){console.log(e)}))},e.userRequestedFollow=function(){var t=e.state.user.user.follow_requests,n=!1;return t.forEach((function(t){t.username===e.props.sessionUser&&(n=!0)})),n},e.searchedRequestedFollow=function(){var t=!1;return e.state.sessionUserRequests.forEach((function(n){n.username===e.state.user.user.username&&(t=!0)})),t},e.searchedFollowing=function(){var t=!1;return e.state.sessionUserFollowers.forEach((function(n){n.username===e.state.user.user.username&&(t=!0)})),t},e.userFollowing=function(){var t=!1;return e.state.user.user.followers.forEach((function(n){n.username===e.props.sessionUser&&(t=!0)})),t},e.sendRequest=function(){console.log(e.state.user.user._id);var t={query:'\n                mutation {\n                    addRequest(id: "'.concat(e.state.user.user._id,'", requested_username: "').concat(e.props.sessionUser,'", profile_img: "').concat(e.state.user.user.profile_img,'"){\n                            _id\n                            username\n                            profile_img\n                            followers {\n                                user_id\n                                username\n                                profile_img\n                            }\n                            follow_requests {\n                                user_id \n                                username\n                                profile_img\n                            }\n\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){console.log(t);var n=e.state.user;n.user=t.data.addRequest,e.setState({user:n})})).catch((function(e){console.log(e)}))},e.toUser=function(){console.log(e.props),e.props.history.push("/"+e.state.user.user.username)},e.toggleHover=function(){e.setState({isHovered:!e.state.isHovered})},e.handleUnfollow=function(){var t={query:'\n                mutation{\n                    unFollow(username: "'.concat(e.props.sessionUser,'", following_id: "').concat(e.state.user.user._id,'"){\n                   \n                            _id\n                            following {\n                                user_id\n                                username\n                            }\n                        \n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){console.log(t);var n=e.state.user.user.followers;n.forEach((function(t,a){t.username===e.props.sessionUser&&n.splice(a,1)})),e.setState({user:e.state.user})})).catch((function(e){console.log(e)}))},e}return Object(p.a)(n,[{key:"render",value:function(){return this.state.loading?s.a.createElement(s.a.Fragment,null," "):s.a.createElement("div",null,s.a.createElement("div",{className:"card z-depth-0 text search_card"},s.a.createElement("div",{className:"col-2 s1",onClick:this.toUser},s.a.createElement("img",{alt:"user_img",src:this.state.user.user.profile_img,class:"user_picture"})),s.a.createElement("div",{className:"card-content col s3 user-button",onClick:this.toUser},s.a.createElement("button",null,s.a.createElement("span",{className:"card-title"},this.state.user.user.username)," ")),s.a.createElement("div",{className:"card-content col s3",onClick:this.toUser},s.a.createElement("span",{className:"card-title"},this.state.user.user.followers.length)),s.a.createElement("div",{className:"card-content col s3",onClick:this.toUser},s.a.createElement("span",{className:"card-title"},this.state.user.playlists.length)),s.a.createElement("div",{className:" col-2 s3 user-following-info align-self-center"},this.state.user.user.username!==this.props.sessionUser?s.a.createElement(s.a.Fragment,null,this.userRequestedFollow()?s.a.createElement("button",{className:"requested-btn align-self-center"}," Requested "):this.userFollowing()?s.a.createElement("button",{className:"following-btn align-self-center",onMouseEnter:this.toggleHover,onMouseLeave:this.toggleHover,onClick:this.handleUnfollow}," ",this.state.isHovered?"Unfollow":"Following"):this.searchedRequestedFollow()?s.a.createElement("button",{className:"requested-btn"}," Pending Request "):s.a.createElement("button",{className:"request-btn align-self-center",onClick:this.sendRequest}," Follow ")):null)))}}]),n}(a.Component),Je=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={playlist:e.props.playlist,loading:!0,favorited:!1},e.componentDidMount=function(){var t={query:'\n                query {\n                    getUserByUsername(username: "'.concat(e.props.sessionUser,'"){\n                        user {\n                            saved_playlists {\n                                playlist_id\n                            }\n                        }\n                    }\n                }\n             ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){var n=t.data.getUserByUsername.user.saved_playlists,a=!1;n.forEach((function(t){t.playlist_id===e.state.playlist._id&&(a=!0)})),e.setState({favorited:a,loading:!1})})).catch((function(e){console.log(e)}))},e.toPlaylist=function(){e.props.history.push("/"+e.state.playlist.username+"/mixtape="+e.state.playlist._id)},e.handleFavorite=function(){var t={query:'\n                mutation { \n                    addSavedPlaylist(username: "'.concat(e.props.sessionUser,'", playlist_id: "').concat(e.state.playlist._id,'", name: "').concat(e.state.playlist.name,'"){\n                            _id\n                            name\n                            username\n                            songs {\n                                song_id\n                                name\n                            }\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){console.log(t),e.setState({favorited:!0})})).catch((function(e){console.log(e)}))},e}return Object(p.a)(n,[{key:"render",value:function(){return this.state.loading?s.a.createElement(s.a.Fragment,null," "):s.a.createElement("div",null,s.a.createElement("div",{className:"card z-depth-0 text search_card"},s.a.createElement("div",{className:"card-content col s1",onClick:this.toPlaylist},s.a.createElement("img",{alt:"playlist_img",src:this.state.playlist.playlist_img,class:"song_picture"})),s.a.createElement("div",{className:"card-content col s3 playlist-button",onClick:this.toPlaylist},s.a.createElement("button",null,s.a.createElement("span",{className:"card-title"},this.state.playlist.name))),s.a.createElement("div",{className:"card-content col s3",onClick:this.toPlaylist},s.a.createElement("span",{className:"card-title"},this.state.playlist.username)),s.a.createElement("div",{className:"card-content col s1",onClick:this.toPlaylist},s.a.createElement("span",{className:"card-title"},this.state.playlist.likes)),s.a.createElement("div",{className:"card-content col s3"},s.a.createElement("span",{className:"card-title"},this.state.playlist.songs.length," ",1===this.state.playlist.songs.length?"Song":"Songs"),s.a.createElement("span",{className:"card-title"},this.state.playlist.total_duration<3600?"0 hr "+(this.state.playlist.total_duration<600?"0"+Math.floor(this.state.playlist.total_duration/60)+" min":Math.floor(this.state.playlist.total_duration/60)+" min"):Math.floor(this.state.playlist.total_duration/3600)+" hr "+(this.state.playlist.total_duration%3600<600?"0"+Math.floor(this.state.playlist.total_duration/60)+" min":Math.floor(this.state.playlist.total_duration/60)+" min"))),this.props.sessionUser!==this.state.playlist.username?s.a.createElement(s.a.Fragment,null,this.state.favorited?s.a.createElement("div",{className:"card-content col s2 "},s.a.createElement(V.a,null,s.a.createElement(ke.a,{fontSize:"large"}))):s.a.createElement("div",{className:"card-content col s2 "},s.a.createElement(V.a,{onClick:this.handleFavorite},s.a.createElement(Oe.a,{fontSize:"large"})))):s.a.createElement("div",{className:"card-content col s3 "})))}}]),n}(a.Component),ze=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={loading:!0,songs:null,showSongs:!1},e.componentDidMount=function(){var t={artist:e.props.item.name};fetch("https://easytunes.herokuapp.com/v1/artist-tracks/",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){e.setState({loading:!1,songs:t.tracks})})).catch((function(e){console.log(e)}))},e.handleClick=function(){e.setState({showSongs:!e.state.showSongs},(function(){console.log(this.state)}))},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"card z-depth-0 text search_card",onClick:this.handleClick},s.a.createElement("div",{className:"card-content col s3"},this.props.item.images[0]?s.a.createElement("img",{alt:"",src:this.props.item.images[0].url,class:"artist_picture"}):s.a.createElement("img",{alt:"",src:"https://cdn3.iconfinder.com/data/icons/social-media-circle-flat-1/1024/itunes-01-01-512.png",class:"artist_picture"})),s.a.createElement("div",{className:"card-content col s3"},s.a.createElement("span",{className:"card-title"},this.props.item.name)),s.a.createElement("div",{className:"card-content col s3"},s.a.createElement(ge.a,{size:24}))),this.state.showSongs?s.a.createElement("div",{style:{marginLeft:"30px"}},this.state.songs.items.map((function(t){return s.a.createElement(Ge,{key:t.id,item:t,type:"track",username:e.props.username,history:e.props.history})}))):null)}}]),n}(a.Component),Le=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={item:e.props.item},e.handleSongPlay=Object(c.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.play?e.props.onPlaylistChange(!1):(console.log("Change playlist"),console.log(e.props),(n=e.state.item).song_id=n._id,e.props.onPlaylistChange(null,n));case 1:case"end":return t.stop()}}),t)}))),e}return Object(p.a)(n,[{key:"millisToSeconds",value:function(e){return Math.floor(e/1e3)}},{key:"render",value:function(){this.props.classes;var e=this.state.item.artists,t="";e.forEach((function(e){t=t+e.name+" "}));var n=this.millisToSeconds(this.state.item.duration_ms);return s.a.createElement("div",null,s.a.createElement("div",{className:"row card z-depth-0 text search_card"},s.a.createElement("div",{className:"card-content col s1"},this.state.item.album.images[0]?s.a.createElement("img",{alt:"song_image",src:this.state.item.album.images[0].url,class:"song_picture"}):s.a.createElement("img",{alt:"song_image",src:"https://cdn3.iconfinder.com/data/icons/social-media-circle-flat-1/1024/itunes-01-01-512.png",class:"song_picture"})),s.a.createElement("div",{className:"card-content col s5"},s.a.createElement("span",{className:"card-title"},this.state.item.name)),s.a.createElement("div",{className:"card-content col s4"},s.a.createElement("span",{className:"card-title"},t)),s.a.createElement("div",{className:"card-content col s1"},s.a.createElement("span",{className:"card-title"},n<60?"0:"+(n<10?"0"+n:n):Math.floor(n/60)+":"+(n%60<10?"0"+n%60:n%60))),s.a.createElement("div",{className:"card-content col s1 "},s.a.createElement(Re,{username:this.props.username,song:this.state.item}))))}}]),n}(a.Component),He=Object(k.a)((function(e){return{playButton:{"&:hover":{outline:"none"},"&:focus":{outline:"none"}}}}))(Le),We=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={item:e.props.item,type:e.props.type},e.handleSongPlay=function(){console.log(e.props)},e}return Object(p.a)(n,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,"track"===this.state.type?s.a.createElement(He,{item:this.state.item,username:this.props.username,history:this.props.history,play:this.props.play,onPlayChange:this.props.onPlayChange,onPlaylistChange:this.props.onPlaylistChange,onSongChange:this.props.onSongChange,onShuffleChange:this.onShuffleChange,playlist:this.props.uris,current_song:this.props.current_song,access_token:this.props.access_token,offset:this.props.offset,shuffle:this.props.shuffle,shufflePlaylist:this.props.shufflePlaylist,needsUpdate:this.props.needsUpdate,updated:this.props.updated,canUpdate:this.props.canUpdate}):"artist"===this.state.type?s.a.createElement(ze,{item:this.state.item,username:this.props.username,history:this.props.history,play:this.props.play,onPlayChange:this.props.onPlayChange,onPlaylistChange:this.props.onPlaylistChange,onSongChange:this.props.onSongChange,onShuffleChange:this.onShuffleChange,playlist:this.props.uris,current_song:this.props.current_song,access_token:this.props.access_token,offset:this.props.offset,shuffle:this.props.shuffle,shufflePlaylist:this.props.shufflePlaylist,needsUpdate:this.props.needsUpdate,updated:this.props.updated,canUpdate:this.props.canUpdate}):"playlist"===this.state.type?s.a.createElement(Je,{playlist:this.state.item,sessionUser:this.props.username,history:this.props.history}):s.a.createElement(De,{user:this.state.item,sessionUser:this.props.username,history:this.props.history}))}}]),n}(a.Component),Ge=Object(k.a)((function(e){return{}}))(We),Ye=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.searchList,t=e.songs,n=e.artists,a=e.users,o=e.playlists;return s.a.createElement("div",{className:"section"},t?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"row"},s.a.createElement("h3",{className:"col s1"},"Songs")),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s3"}),s.a.createElement("div",{className:"col s3"},"Song"),s.a.createElement("div",{className:"col s3"},"Artist"),s.a.createElement("div",{className:"col s3"},"Duration"),s.a.createElement("div",{className:"col s3"})),t&&t.map((function(e){return s.a.createElement(Ge,{key:e.id,item:e,type:"track",username:this.props.username,history:this.props.history,play:this.props.play,onPlayChange:this.props.onPlayChange,onPlaylistChange:this.props.onPlaylistChange,onSongChange:this.props.onSongChange,onShuffleChange:this.props.onShuffleChange,playlist:this.props.uris,current_song:this.props.current_song,access_token:this.props.access_token,offset:this.props.offset,shuffle:this.props.shuffle,shufflePlaylist:this.props.shufflePlaylist,needsUpdate:this.props.needsUpdate,updated:this.props.updated,canUpdate:this.props.canUpdate})}),this)):null,n?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s3"},"Artists")),n&&n.map((function(e){return s.a.createElement(Ge,{key:e.id,item:e,type:"artist",username:this.props.username,history:this.props.history,play:this.props.play,onPlayChange:this.props.onPlayChange,onPlaylistChange:this.props.onPlaylistChange,onSongChange:this.props.onSongChange,onShuffleChange:this.props.onShuffleChange,playlist:this.props.uris,current_song:this.props.current_song,access_token:this.props.access_token,offset:this.props.offset,shuffle:this.props.shuffle,shufflePlaylist:this.props.shufflePlaylist,needsUpdate:this.props.needsUpdate,updated:this.props.updated,canUpdate:this.props.canUpdate})}),this)):null,o?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"row"},s.a.createElement("h3",{className:"col s1"},"Mixtapes")),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s1"}),s.a.createElement("div",{className:"col s3"},"Name"),s.a.createElement("div",{className:"col s3"},"Username"),s.a.createElement("div",{className:"col s1"},"Likes"),s.a.createElement("div",{className:"col s3"},"Songs"),s.a.createElement("div",{className:"col s3"})),o&&o.map((function(e){return console.log(e),s.a.createElement(Ge,{key:e._id,item:e,type:"playlist",username:this.props.username,history:this.props.history,play:this.props.play,onPlayChange:this.props.onPlayChange,onPlaylistChange:this.props.onPlaylistChange,onSongChange:this.props.onSongChange,onShuffleChange:this.props.onShuffleChange,playlist:this.props.uris,current_song:this.props.current_song,access_token:this.props.access_token,offset:this.props.offset,shuffle:this.props.shuffle,shufflePlaylist:this.props.shufflePlaylist,needsUpdate:this.props.needsUpdate,updated:this.props.updated,canUpdate:this.props.canUpdate})}),this)):null,a?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"row"},s.a.createElement("h3",{className:"col s1"},"Users")),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s3"}),s.a.createElement("div",{className:"col s3"},"User"),s.a.createElement("div",{className:"col s3"},"Followers"),s.a.createElement("div",{className:"col s3"},"Playlists"),s.a.createElement("div",{className:"col s3"})),a&&a.map((function(e){return s.a.createElement(Ge,{key:e.user._id,item:e,type:"user",username:this.props.username,history:this.props.history,play:this.props.play,onPlayChange:this.props.onPlayChange,onPlaylistChange:this.props.onPlaylistChange,onSongChange:this.props.onSongChange,onShuffleChange:this.props.onShuffleChange,playlist:this.props.uris,current_song:this.props.current_song,access_token:this.props.access_token,offset:this.props.offset,shuffle:this.props.shuffle,shufflePlaylist:this.props.shufflePlaylist,needsUpdate:this.props.needsUpdate,updated:this.props.updated,canUpdate:this.props.canUpdate})}),this)):null)}}]),n}(a.Component),Qe=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={searchQuery:e.props.match.params.query,searchResults:{},searchType:e.props.match.params.type,username:e.props.username,loading:!1},e.fetchData=function(t,n,a,s){fetch(a,{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){console.log(t);var a=e.state.searchResults;"artists"===n?a[n]=t.artists.items:"songs"===n?a[n]=t.tracks.items:"users"===n?a[n]=t.data.searchUsers:"playlists"===n&&(a[n]=t.data.searchPlaylists),e.setState({searchResults:a}),s&&e.setState({loading:!1})})).catch((function(e){console.log(e)}))},e.fetchPlaylists=function(t,n){var a={query:'\n                query {\n                    searchPlaylists(name :"'.concat(n,'"){\n                        _id \n                        name \n                        username\n                        likes\n                        total_duration \n                        playlist_img\n                        songs {\n                            song_id \n                            name\n                        }\n                    }\n                }\n            ')};e.fetchData(a,"playlists","https://easytunes.herokuapp.com/graphql",t)},e.fetchUsers=function(t,n){console.log(n);var a={query:'\n                query {\n                    searchUsers(username: "'.concat(n,'"){\n                        user {\n                            _id\n                            username\n                            profile_img\n                            followers {\n                                user_id\n                                username\n                            }\n                            follow_requests {\n                                user_id \n                                username\n                                profile_img\n                            }\n                        }\n                        playlists {\n                            _id\n                            name\n                        }\n                    }\n                }\n                ')};e.fetchData(a,"users","https://easytunes.herokuapp.com/graphql",t)},e.fetchSpotify=function(t,n,a){var s;s="artists"===t?{artist:n}:{track:n},e.fetchData(s,t,"https://easytunes.herokuapp.com/v1/search?",a)},e.componentDidUpdate=function(){e.state.searchType===e.props.match.params.type&&e.state.searchQuery===e.props.match.params.query||e.setState({searchType:e.props.match.params.type,searchQuery:e.props.match.params.query,loading:!0,searchResults:{}},(function(){var t=e.state.searchType,n=e.state.searchQuery;"artists"===t||"songs"===t?e.fetchSpotify(t,n,!0):"users"===t?e.fetchUsers(!0,n):"mixtapes"===t?e.fetchPlaylists(!0,n):"all"===t&&(e.fetchSpotify("artists",n,!1),e.fetchSpotify("songs",n,!1),e.fetchUsers(!1,n),e.fetchPlaylists(!0,n))}))},e.componentDidMount=function(){if(e.props.username||e.props.history.push("/login"),!e.state.loading){e.setState({loading:!0});var t=e.state.searchType,n=e.state.searchQuery;console.log(t),"artists"===t||"songs"===t?e.fetchSpotify(t,n,!0):"users"===t?e.fetchUsers(!0,n):"mixtapes"===t?e.fetchPlaylists(!0,n):"all"===t&&(e.fetchSpotify("artists",n,!1),e.fetchSpotify("songs",n,!1),e.fetchUsers(!1,n),e.fetchPlaylists(!0,n))}},e}return Object(p.a)(n,[{key:"render",value:function(){return this.state.loading?s.a.createElement(s.a.Fragment,null," "):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"container navy search-results-container",style:{paddingBotton:"50px"}},s.a.createElement("div",{className:"row"},s.a.createElement("h2",{className:"col s1"},"Results")),s.a.createElement(Ye,{searchList:this.state.searchResults,username:this.state.username,history:this.props.history,play:this.props.play,onPlayChange:this.props.onPlayChange,onPlaylistChange:this.props.onPlaylistChange,onSongChange:this.props.onSongChange,onShuffleChange:this.onShuffleChange,playlist:this.props.uris,current_song:this.props.current_song,access_token:this.props.access_token,offset:this.props.offset,shuffle:this.props.shuffle,shufflePlaylist:this.props.shufflePlaylist,needsUpdate:this.props.needsUpdate,updated:this.props.updated,canUpdate:this.props.canUpdate}),s.a.createElement("div",{className:"row blank-space"}," ")))}}]),n}(a.Component),Ke=n(44),Xe=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={follower:a.props.follower,username:a.props.username,history:a.props.history},a.removeFollower=function(){console.log(a.state.followers);var e={query:'\n                mutation{\n                    removeFollower(username: "'.concat(a.state.username,'", follower_id: "').concat(a.state.follower.user_id,'"){\n                   \n                            _id\n                            followers {\n                                user_id\n                                username\n                            }\n                        \n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){console.log(e),a.updateFollowers(e.data.removeFollower.followers)})).catch((function(e){console.log(e)}))},a.updateFollowers=a.props.updateFollowers,a}return Object(p.a)(n,[{key:"render",value:function(){if(this.state.loading)return s.a.createElement(s.a.Fragment,null," ");function e(e){var t=e.username,n=e.history;return s.a.createElement("button",{className:"user-btn",onClick:function(){n.push("/"+t)}},t)}return s.a.createElement("div",{className:"follower-row"},s.a.createElement("div",{className:"col"},s.a.createElement("img",{alt:"",src:this.state.follower.profile_img,class:"user_icon"})),s.a.createElement("div",{className:"col"},s.a.createElement(e,{username:this.state.follower.username,history:this.state.history})),s.a.createElement("div",{className:"col"},s.a.createElement("button",{className:"unfollow-btn",onClick:this.removeFollower},"Remove",s.a.createElement(Ke.a,null))))}}]),n}(a.Component),$e=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={followers:null,username:e.props.username,loading:!0},e.getFollowers=function(){e.setState({loading:!0});var t={query:'\n                query {\n                    getUserByUsername(username: "'.concat(e.state.username,'"){\n                        user {\n                            _id\n                            followers {\n                                user_id\n                                username\n                                profile_img\n                            }\n                        }\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){e.setState({followers:t.data.getUserByUsername.user.followers,loading:!1})})).catch((function(e){console.log(e)}))},e.componentDidMount=function(){e.getFollowers()},e.updateFollowers=function(t){e.setState({followers:t})},e}return Object(p.a)(n,[{key:"render",value:function(){if(this.state.loading)return s.a.createElement(s.a.Fragment,null," ");var e=this.state.followers.map((function(e){return s.a.createElement(Xe,{key:e.user_id,follower:e,username:this.state.username,history:this.props.history,updateFollowers:this.updateFollowers})}),this);return s.a.createElement(s.a.Fragment,null,e)}}]),n}(a.Component),Ze=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={following:a.props.following,username:a.props.username,history:a.props.history},a.unFollow=function(){console.log(a.state.following);var e={query:'\n                mutation{\n                    unFollow(username: "'.concat(a.state.username,'", following_id: "').concat(a.state.following.user_id,'"){\n                   \n                            _id\n                            following {\n                                user_id\n                                username\n                            }\n                        \n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){console.log(e),a.updateFollowing(e.data.unFollow.following)})).catch((function(e){console.log(e)}))},a.updateFollowing=a.props.updateFollowing,a}return Object(p.a)(n,[{key:"render",value:function(){function e(e){var t=e.username,n=e.history;return s.a.createElement("button",{className:"user-btn",onClick:function(){n.push("/"+t)}},t)}return s.a.createElement("div",{className:"follower-row"},s.a.createElement("div",{className:"col"},s.a.createElement("img",{alt:"",src:this.state.following.profile_img,class:"user_icon"})),s.a.createElement("div",{className:"col"},s.a.createElement(e,{username:this.state.following.username,history:this.props.history})),s.a.createElement("div",{className:"col"},s.a.createElement("button",{className:"unfollow-btn",onClick:this.unFollow}," Unfollow ")))}}]),n}(a.Component),et=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={following:null,username:e.props.username,loading:!0},e.getFollowing=function(){e.setState({loading:!0});var t={query:'\n                query {\n                    getUserByUsername(username: "'.concat(e.state.username,'"){\n                        user {\n                            _id\n                            following {\n                                user_id\n                                username\n                                profile_img\n                            }\n                        }\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){e.setState({following:t.data.getUserByUsername.user.following,loading:!1})})).catch((function(e){console.log(e)}))},e.componentDidMount=function(){e.getFollowing()},e.updateFollowing=function(t){e.setState({following:t})},e}return Object(p.a)(n,[{key:"render",value:function(){if(this.state.loading)return s.a.createElement(s.a.Fragment,null," ");var e=this.state.following.map((function(e){return s.a.createElement(Ze,{key:e.user_id,following:e,username:this.state.username,history:this.props.history,updateFollowing:this.updateFollowing})}),this);return s.a.createElement(s.a.Fragment,null,e)}}]),n}(a.Component),tt=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={request:a.props.request,username:a.props.username,history:a.props.history},a.acceptRequest=function(){console.log(a.state.request);var e={query:'\n                mutation{\n                    addFollower(username: "'.concat(a.state.username,'", request_id: "').concat(a.state.request.user_id,'", profile_img: "').concat(a.state.request.profile_img,'"){\n                            _id\n                            follow_requests {\n                                user_id\n                                username\n                                profile_img\n                            }\n                        \n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){console.log(e),a.updateRequests(e.data.addFollower.follow_requests)})).catch((function(e){console.log(e)}))},a.updateRequests=a.props.updateRequests,a}return Object(p.a)(n,[{key:"render",value:function(){function e(e){var t=e.username,n=e.history;return s.a.createElement("button",{className:"user-btn",onClick:function(){console.log(n),n.push("/"+t)}}," ",t)}return console.log(this.props),s.a.createElement("div",{className:"follower-row"},s.a.createElement("div",{className:"col"},s.a.createElement("img",{alt:"",src:this.state.request.profile_img,class:"user_icon"})),s.a.createElement("div",{className:"col"},s.a.createElement(e,{username:this.state.request.username,history:this.state.history})),s.a.createElement("div",{className:"col"},s.a.createElement("button",{className:"unfollow-btn",onClick:this.acceptRequest}," Accept ")))}}]),n}(a.Component),nt=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={requests:null,username:e.props.username,loading:!0},e.getRequests=function(){e.setState({loading:!0});var t={query:'\n                query {\n                    getUserByUsername(username: "'.concat(e.state.username,'"){\n                        user {\n                            _id\n                            follow_requests {\n                                user_id\n                                username\n                                profile_img\n                            }\n                        }\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){e.setState({requests:t.data.getUserByUsername.user.follow_requests,loading:!1})})).catch((function(e){console.log(e)}))},e.componentDidMount=function(){e.getRequests()},e.updateRequests=function(t){e.setState({requests:t})},e}return Object(p.a)(n,[{key:"render",value:function(){if(this.state.loading)return s.a.createElement(s.a.Fragment,null," ");var e=this.state.requests.map((function(e){return s.a.createElement(tt,{key:e.user_id,request:e,username:this.state.username,history:this.props.history,updateRequests:this.updateRequests})}),this);return s.a.createElement(s.a.Fragment,null,e)}}]),n}(a.Component),at=(n(180),function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={showFollowers:!0,showFollowing:!1,showRequests:!1,user:null,loading:!0},e.componentDidMount=function(){e.props.username||e.props.history.push("/login"),e.setState({loading:!0});var t={query:'\n                query {\n                    getUserByUsername(username: "'.concat(e.props.username,'"){\n                        user {\n                            _id\n                            username\n                            profile_img\n                            joined\n                        }\n                    }\n                }\n            ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){var n=e.props.history.location.pathname.split("/")[2],a="followers"===n,s="following"===n,o="requests"===n;console.log(a,s,o),e.setState({user:t.data.getUserByUsername.user,showFollowers:a,showFollowing:s,showRequests:o,loading:!1})})).catch((function(e){console.log(e)}))},e.changeView=function(t){console.log(t.target),"followers-btn"===t.currentTarget.id?(e.setState({showFollowers:!0,showFollowing:!1,showRequests:!1}),e.props.history.push("/"+e.state.user.username+"/followers")):"following-btn"===t.currentTarget.id?(e.setState({showFollowers:!1,showFollowing:!0,showRequests:!1}),e.props.history.push("/"+e.state.user.username+"/following")):(e.setState({showFollowers:!1,showFollowing:!1,showRequests:!0}),e.props.history.push("/"+e.state.user.username+"/requests"))},e.getAccountCreationDate=function(){var t=e.state.user,n=new Date(parseInt(t.joined));return["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]+" "+n.getDate()+", "+n.getFullYear()},e}return Object(p.a)(n,[{key:"render",value:function(){if(this.state.loading)return s.a.createElement(s.a.Fragment,null," ");var e=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"container-fluid followers-container"},s.a.createElement("div",{className:"container-fluid follow-data-container"},s.a.createElement("div",{className:"information-row"},s.a.createElement("div",{className:"col text-center"},s.a.createElement("div",{className:"col"},s.a.createElement("img",{alt:"",src:this.state.user.profile_img,className:"user_icon"})),s.a.createElement("h2",null,this.state.user.username),s.a.createElement("h5",null," User Since: ",this.getAccountCreationDate()))),s.a.createElement("div",{className:"navigation-row"},s.a.createElement(N.a,{className:e.container},s.a.createElement(w.a,{container:!0},s.a.createElement(w.a,{xs:!0,item:!0,align:"center"},s.a.createElement(y.a,{id:"followers-btn",onClick:this.changeView,className:this.state.showFollowers?e.buttonFocus:e.buttonNotFocus},"Followers")),s.a.createElement(w.a,{xs:!0,item:!0,align:"center"},s.a.createElement(y.a,{id:"following-btn",onClick:this.changeView,className:this.state.showFollowing?e.buttonFocus:e.buttonNotFocus},"Following")),s.a.createElement(w.a,{xs:!0,item:!0,align:"center"},s.a.createElement(y.a,{id:"requests-btn",onClick:this.changeView,className:this.state.showRequests?e.buttonFocus:e.buttonNotFocus},"Requests"))))),this.state.showFollowers?s.a.createElement($e,{username:this.state.user.username,history:this.props.history}):null,this.state.showFollowing?s.a.createElement(et,{username:this.state.user.username,history:this.props.history}):null,this.state.showRequests?s.a.createElement(nt,{username:this.state.user.username,history:this.props.history}):null)))}}]),n}(a.Component)),st=Object(k.a)((function(e){return{buttonFocus:{borderRadius:"0",width:"100%",strokeLinecap:"round",border:"none","&:focus":{outline:"none"},borderBottom:"2px solid #004CB2",fontWeight:"bold"},buttonNotFocus:{width:"100%",border:"none","&:focus":{outline:"none"}},container:{padding:e.spacing(0,0,0,0)}}}))(at),ot=n(88),rt=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={visible:!1,original:a.props.original,new:a.props.original,text:a.props.text,error:""},a.setVisible=function(){a.setState({visible:!0})},a.setInvisible=function(){a.setState({visible:!1})},a.handleChange=function(e){a.setState({new:e.target.value})},a.handleUpdate=function(){var e="",t=a.valueEl.current.children[1].children[0].value.trim();e="Update Email"===a.state.text?{query:'\n                    mutation{\n                        updateEmail(email: "'.concat(a.state.original,'", new_email:"').concat(t,'"){\n                        _id\n                        email\n                        }\n                    }\n                ')}:{query:'\n                    mutation{\n                        changeUsername(username: "'.concat(a.state.original,'", new_username:"').concat(t,'"){\n                        _id\n                        email\n                        }\n                    }\n                ')},fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error(e.body);return e.json()})).then((function(e){if(console.log(e),e.errors)throw new Error(e.errors[0].message);a.setInvisible(),a.onChange(a.state.text,t),a.setState({original:t})})).catch((function(e){console.log(e),a.setState({error:e.message})}))},a.onChange=a.props.onChange,a.valueEl=s.a.createRef(),a}return Object(p.a)(n,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"user-settings-content-btn",onClick:this.setVisible},this.state.text),this.state.visible?s.a.createElement(W.a,{open:this.state.visible,keepMounted:!0,onClose:this.setInvisible,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",fullWidth:!0,maxWidth:"sm"},s.a.createElement(G.a,{id:"alert-dialog-slide-title"},this.state.text),s.a.createElement(te.a,null,this.state.error?s.a.createElement(ne.a,null," ",this.state.error," "):null,s.a.createElement(b.a,{autoFocus:!0,margin:"dense",id:"name",label:"New Username",type:"text",placeholder:this.state.original,fullWidth:!0,ref:this.valueEl})),s.a.createElement(Y.a,null,s.a.createElement(y.a,{onClick:this.handleUpdate,color:"primary"},"Update"),s.a.createElement(y.a,{onClick:this.setInvisible,color:"primary"},"Cancel"))):null)}}]),n}(a.Component),lt=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={visible:!1,password:"",confirm:"",error:""},a.setVisible=function(){a.setState({visible:!0,password:"",confirm:""})},a.setInvisible=function(){a.setState({visible:!1})},a.handlePassChange=function(e){a.setState({password:e.target.value})},a.handleConfChange=function(e){a.setState({confirm:e.target.value})},a.handleUpdate=function(){console.log(a.props.username);var e=a.passwordEl.current.children[1].children[0].value.trim();if(e!==a.confirmEl.current.children[1].children[0].value.trim())a.setState({error:"Passwords do not match"});else if(""===e)a.setState({error:"Enter a password"});else{var t={query:'\n                        mutation{\n                            changePassword(username: "'.concat(a.props.username,'", new_password:"').concat(e,'"){\n                            _id\n    \n                            }\n                        }\n                    ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error(e.body);return e.json()})).then((function(e){console.log(e),a.setState({visible:!1})})).catch((function(e){console.log(e),a.setState({error:e.message})}))}},a.passwordEl=s.a.createRef(),a.confirmEl=s.a.createRef(),a}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"user-settings-content-btn",onClick:this.setVisible}," Update Password "),this.state.visible?s.a.createElement(W.a,{open:this.state.visible,keepMounted:!0,onClose:this.setInvisible,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",className:e.dialog,fullWidth:!0,maxWidth:"sm"},s.a.createElement(G.a,{id:"alert-dialog-slide-title"},"Change Password"),s.a.createElement(te.a,null,this.state.error?s.a.createElement(ne.a,null," ",this.state.error," "):null,s.a.createElement(b.a,{autoFocus:!0,margin:"dense",id:"name",label:"New Password",type:"password",fullWidth:!0,ref:this.passwordEl}),s.a.createElement(b.a,{autoFocus:!0,margin:"dense",id:"name",label:"Confirm Password",type:"password",fullWidth:!0,ref:this.confirmEl})),s.a.createElement(Y.a,null,s.a.createElement(y.a,{onClick:this.handleUpdate,color:"primary",className:e.button},"Update"),s.a.createElement(y.a,{onClick:this.setInvisible,color:"primary",className:e.button},"Cancel"))):null)}}]),n}(a.Component),it=Object(k.a)((function(e){return{dialog:{minWidth:"300px"}}}))(lt),ct=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={user:e.props.user},e.onChange=function(t,n){var a=e.state.user;"Update Email"===t?a.email=n:"Update Username"===t&&(a.username=n,localStorage.setItem("username",n),e.props.onUsernameChange(n),e.props.history.push("/"+n+"/settings")),e.setState({user:a})},e.Post=function(t){t.preventDefault();var n=document.getElementById("photo-input").files,a=new FormData;a.append("img",n[0]),fetch("https://easytunes.herokuapp.com/",{method:"POST",body:a}).then((function(e){console.log(e)}));var s=e.state.user;s.profile_img="https://easytunes.herokuapp.com/image_file/".concat(n[0].name),e.setState({user:s}),console.log(n[0])},e.updateProfileImg=function(){var t=e.state.user,n={query:'\n                mutation {\n                    changeProfileImg(username: "'.concat(t.username,'", img: "').concat(t.profile_img,'"){\n                        _id\n                    }\n                }\n            ')};e.fetch(n)},e.fetch=function(e){fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("User not found");return e.json()})).catch((function(e){console.log(e)}))},e}return Object(p.a)(n,[{key:"render",value:function(){return console.log(this.props.user),s.a.createElement("div",{className:"user-settings-container"},s.a.createElement("div",{className:"settings-header"},"Account"),s.a.createElement("div",{className:"user-settings-content"},s.a.createElement("h5",null,"Profile Picture"),s.a.createElement("h6",null,"This is the picture associated with your profile."),s.a.createElement("div",{className:"user-setting-info"},s.a.createElement("div",{className:"photo_input"},"Upload Profile Picture",s.a.createElement("div",{className:"input-group mb-3"},s.a.createElement("div",{className:"custom-file"},s.a.createElement("input",{type:"file",className:"photo-input",id:"inputGroupFile01","aria-describedby":"inputGroupFileAddon01",accept:"image/*"}),s.a.createElement("label",{className:"custom-file-label",htmlFor:"inputGroupFile01"},"Choose file"))),s.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.Post},"Upload"),s.a.createElement("img",{id:"img",style:{display:"block",height:"200px",width:"200px","margin-top":"5px"},src:this.state.profile.profile_img}))),s.a.createElement("button",{className:"user-settings-content-btn",onClick:this.updateProfileImg},"Update Image")),s.a.createElement("div",{className:"user-settings-content"},s.a.createElement("h5",null,"Email"),s.a.createElement("h6",null," This is the email associated with your account"),s.a.createElement("div",{className:"user-setting-info"},this.state.user.email),s.a.createElement(rt,{text:"Update Email",original:this.state.user.email,onChange:this.onChange})),s.a.createElement("div",{className:"user-settings-content"},s.a.createElement("h5",null,"Username"),s.a.createElement("h6",null,"This is how you will appear to everyone else"),s.a.createElement("div",{className:"user-setting-info"},this.state.user.username),s.a.createElement(rt,{text:"Update Username",original:this.state.user.username,onChange:this.onChange})),s.a.createElement("div",{className:"user-settings-content"},s.a.createElement("h5",null,"Change Password"),s.a.createElement(it,{username:this.state.user.username})))}}]),n}(a.Component),ut=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={user:e.props.user},e}return Object(p.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:"user-settings-container"},s.a.createElement("div",{className:"settings-header"},"Advanced Settings"),s.a.createElement("div",{className:"user-settings-content"},s.a.createElement("h5",null,"User ID"),s.a.createElement("h6",null," This is the ID associated with your account"),s.a.createElement("p",null," ",this.state.user._id)),s.a.createElement("div",{className:"user-settings-content"},s.a.createElement("h5",null,"User URL"),s.a.createElement("h6",null," This is the URL associated with your account "),s.a.createElement("p",null," ",this.state.user.url)))}}]),n}(a.Component),pt=n(101),mt=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={playlist_privacy:e.props.default_public_playlist?0:1,verify_request:e.props.verify_requests?0:1},e.updatePlaylist=function(){var t="";0===e.state.playlist_privacy?(e.setState({playlist_privacy:1}),t={query:'\n                    mutation {\n                        changePlaylistPrivacyDef(_id: "'.concat(e.props._id,'", def:',!1,"){\n                            _id\n                            default_public_playlist\n                        }\n                    }\n                ")},e.props.onPrivacyChange("playlist",!1)):(e.setState({playlist_privacy:0}),t={query:'\n                    mutation {\n                        changePlaylistPrivacyDef(_id: "'.concat(e.props._id,'", def:',!0,"){\n                            _id\n                        }\n                    }\n                ")},e.props.onPrivacyChange("playlist",!0)),e.fetch(t)},e.updateVerify=function(){var t="";1===e.state.verify_request?(e.setState({verify_request:0}),t={query:'\n                    mutation {\n                        changeVerifyFollowDef(_id: "'.concat(e.props._id,'", def:',!0,"){\n                            _id\n                        }\n                    }\n                ")},e.props.onPrivacyChange("verify",!0)):(e.setState({verify_request:1}),t={query:'\n                    mutation {\n                        changeVerifyFollowDef(_id: "'.concat(e.props._id,'", def:',!1,"){\n                            _id\n                        }\n                    }\n                ")},e.props.onPrivacyChange("verify",!1)),e.fetch(t)},e}return Object(p.a)(n,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}))},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"user-settings-content"},s.a.createElement("h5",null,"Default Mixtape Settings"),s.a.createElement("h6",null," ",s.a.createElement(pt.a,{value:this.state.playlist_privacy,onChange:this.updatePlaylist})," Keep my mixtapes private")),s.a.createElement("div",{className:"user-settings-content"},s.a.createElement("h5",null,"Verify Follow Requests"),s.a.createElement("h6",null," ",s.a.createElement(pt.a,{value:this.state.verify_request,onChange:this.updateVerify})," Automatically allow others to follow me")))}}]),n}(a.Component),ht=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:"user-settings-container"},s.a.createElement("div",{className:"settings-header"},"Privacy Settings"),s.a.createElement(mt,{default_public_playlist:this.props.user.default_public_playlist,verify_requests:this.props.user.verify_requests,_id:this.props.user._id,onPrivacyChange:this.props.onPrivacyChange}))}}]),n}(a.Component),dt=(n(181),function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={showAccount:!0,showPrivacy:!1,showAdvanced:!1,user:null,loading:!0},e.componentDidMount=function(){if(e.props.username||e.props.history.push("/login"),e.setState({loading:!0}),e.props.username===e.props.match.params.username){var t={query:'\n                    query{\n                        getUserByUsername(username : "'.concat(e.props.username,'") {\n                            user {\n                                _id\n                            username \n                            profile_img\n                            default_public_saved_playlist\n                            default_public_playlist\n                            verify_requests\n                            email\n                            url\n                            }\n                        }\n                    }\n                ')};fetch("https://easytunes.herokuapp.com/graphql",{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(t){e.setState({user:t.data.getUserByUsername.user,loading:!1})})).catch((function(e){console.log(e)}))}},e.onUsernameChange=function(t){console.log(t);var n=e.state.user,a=n.url.split("/")[0];n.url=a+"/"+t,e.props.onUsernameChange(t)},e.onUserChange=function(t){e.setState({user:t})},e.onPrivacyChange=function(t,n){var a=e.state.user;"playlist"===t?a.default_public_playlist=n:a.verify_requests=n,e.setState({user:a})},e.changeView=function(t){var n=[],a=t.target.id;"settings-account-btn"===a?(e.setState({showAccount:!0,showPrivacy:!1,showAdvanced:!1}),n.push("settings-privacy-btn"),n.push("settings-advanced-btn")):"settings-privacy-btn"===a?(e.setState({showAccount:!1,showPrivacy:!0,showAdvanced:!1}),n.push("settings-account-btn"),n.push("settings-advanced-btn")):(e.setState({showAccount:!1,showPrivacy:!1,showAdvanced:!0}),n.push("settings-privacy-btn"),n.push("settings-account-btn")),document.getElementById(a).style.background="lightgray",document.getElementById(n[0]).style.background="transparent",document.getElementById(n[1]).style.background="transparent"},e}return Object(p.a)(n,[{key:"render",value:function(){if(this.state.loading)return s.a.createElement(s.a.Fragment,null," ");var e=this.props.classes;return s.a.createElement("main",{className:e.content},s.a.createElement("div",{className:e.toolbar}),s.a.createElement(N.a,{classname:e.wrapper},s.a.createElement(w.a,{container:!0},s.a.createElement(w.a,{item:!0,xs:2,className:e.col},s.a.createElement("div",{className:"sidebar-header text-left"},s.a.createElement("h3",{style:{color:"black"}},"Settings")),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("button",{className:e.settingsOptionsButton,id:"settings-account-btn",style:{background:"lightgray"},onClick:this.changeView},"Account")),s.a.createElement("li",null,s.a.createElement("button",{className:e.settingsOptionsButton,id:"settings-privacy-btn",onClick:this.changeView},"Privacy")),s.a.createElement("li",null,s.a.createElement("button",{className:e.settingsOptionsButton,id:"settings-advanced-btn",onClick:this.changeView},"Advanced Settings")))),s.a.createElement(w.a,{item:!0,xs:!0,className:e.settingsContent},this.state.showAccount?s.a.createElement(ct,{user:this.state.user,onUsernameChange:this.onUsernameChange,history:this.props.history}):null,this.state.showPrivacy?s.a.createElement(ht,{user:this.state.user,onPrivacyChange:this.onPrivacyChange}):null,this.state.showAdvanced?s.a.createElement(ut,{user:this.state.user}):null))))}}]),n}(a.Component)),gt=Object(k.a)((function(e){return{toolbar:Object(ot.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1),marginLeft:"0px",marginTop:"10px"},e.mixins.toolbar),col:{border:"1px solid",background:"#f0f0f0",color:"#fff",paddingTop:"50px"},sidebarHeader:{paddingTop:"10px",marginBottom:"20px"},content:{flexGrow:1,padding:e.spacing(0)},wrapper:{marginTop:e.spacing(1),borderBottom:"2px solid lightgray"},settingsOptionsButton:{width:"100%",minHeight:"50px",border:"none",outline:"none",textAlign:"left",paddingLeft:"20px",background:"transparent"},settingsConent:{padding:0}}}))(dt),ft=n(29),yt=n(26),Et=n(145),bt=n(244),vt=n(140),wt=n(123),_t=n.n(wt),Ct=n(99),St=n.n(Ct),kt=n(124),Nt=n.n(kt),Ot=n(231),Pt=n(250),jt=n(96),Ut=n.n(jt),xt=n(4),Ft=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={value:"All",anchorEl:null,mobileMoreAnchorEl:null},a.handleChange=function(e){console.log(e.target),a.setState({value:e.target.value})},a.handleProfileMenuOpen=function(e){a.setState({anchorEl:e.target})},a.handleMobileMenuClose=function(){a.setState({mobileMoreAnchorEl:null})},a.handleMenuClose=function(){a.setState({anchorEl:null}),a.handleMobileMenuClose()},a.handleMobileMenuOpen=function(e){console.log(e.target),a.setState({mobileMoreAnchorEl:e.target})},a.toPlaylists=function(){console.log("To playlists"),a.props.history.push("/"+a.props.username),a.handleMenuClose()},a.toFollowers=function(){console.log("To followers "),a.props.history.push("/"+a.props.username+"/followers"),a.handleMenuClose()},a.toSettings=function(){console.log("To Settings"),a.props.history.push("/"+a.props.username+"/settings"),a.handleMenuClose()},a.toLogOut=function(){console.log("Log Out"),localStorage.removeItem("username"),a.props.onUsernameChange(""),a.props.history.push("/"),a.handleMenuClose()},a.renderMenu=function(){return s.a.createElement(vt.a,{anchorEl:a.state.anchorEl,anchorOrigin:{vertical:"top",horizontal:"right"},id:a.menuId,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(a.state.anchorEl),onClose:a.handleMenuClose},s.a.createElement(bt.a,{onClick:a.toPlaylists},"Mixtapes"),s.a.createElement(bt.a,{onClick:a.toFollowers},"Followers"),s.a.createElement(bt.a,{onClick:a.toSettings},"Settings"),s.a.createElement(bt.a,{onClick:a.toLogOut},"Logout"))},a.renderMobileMenu=function(){a.props.classes;return s.a.createElement(vt.a,{anchorEl:a.state.mobileMoreAnchorEl,anchorOrigin:{vertical:"top",horizontal:"right"},id:a.mobileMenuId,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(a.state.mobileMoreAnchorEl),onClose:a.handleMobileMenuClose},s.a.createElement(bt.a,{onClick:a.handleProfileMenuOpen},s.a.createElement(V.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},s.a.createElement(St.a,null)),s.a.createElement("p",null,"Profile")))},a.toHome=function(){a.props.history.push("/home")},a.handleKeyPress=function(e){if("Enter"===e.key){var t=a.state.value,n=a.searchEl.current.children[0].value;if(console.log(t),""!==n){var s="/searchq="+encodeURIComponent(n)+"/type="+t.toLowerCase();a.props.history.push(s)}}},a.menuId="primary-search-account-menu",a.mobileMenuId="primary-search-account-menu-mobile",a.searchEl=s.a.createRef(),a}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("div",{className:e.grow},s.a.createElement(F.a,{position:"static",style:{background:"#5472d3"}},s.a.createElement(q.a,null,s.a.createElement(V.a,{color:"inherit","aria-label":"open drawer",onClick:this.props.handleDrawerOpen,edge:"start",className:Object(xt.a)(e.menuButton,Object(ft.a)({},e.hide,this.props.open),e.icon)},s.a.createElement(Ut.a,null)),s.a.createElement(V.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:this.toHome,className:e.icon},s.a.createElement(M.a,null),s.a.createElement(S.a,{className:e.title,variant:"h6",noWrap:!0},"EasyTunes")),s.a.createElement("div",{className:e.search},s.a.createElement("div",{className:e.searchIcon},s.a.createElement(_t.a,null)),s.a.createElement(Et.a,{placeholder:"Search",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"},ref:this.searchEl,onKeyPress:this.handleKeyPress}),s.a.createElement(Ot.a,{classes:{div:this.selectMenu}},s.a.createElement(Pt.a,{onChange:this.handleChange},s.a.createElement(bt.a,{value:"All"},"All"),s.a.createElement(bt.a,{value:"Artists"},"Artists"),s.a.createElement(bt.a,{value:"Songs"},"Songs"),s.a.createElement(bt.a,{value:"Mixtapes"},"Mixtapes"),s.a.createElement(bt.a,{value:"Users"},"Users")))),s.a.createElement("div",{className:e.grow}),s.a.createElement("div",{className:e.sectionDesktop},s.a.createElement(V.a,{edge:"end","aria-label":"account of current user","aria-controls":this.menuId,"aria-haspopup":"true",onClick:this.handleProfileMenuOpen,color:"inherit",className:e.icon},s.a.createElement(St.a,null))),s.a.createElement("div",{className:e.sectionMobile},s.a.createElement(V.a,{"aria-label":"show more","aria-controls":this.mobileMenuId,"aria-haspopup":"true",onClick:this.handleMobileMenuOpen,color:"inherit",className:e.icon},s.a.createElement(Nt.a,null))),this.renderMobileMenu(),this.renderMenu())))}}]),n}(a.Component),qt=Object(k.a)((function(e){return{paper:{border:"1px solid #d3d4d5"},grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(ft.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(ft.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(yt.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(yt.b)(e.palette.common.white,.25)},paddingTop:"10px",marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"500px",height:"50px"}),searchIcon:{padding:e.spacing(0,2,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),width:"410px",height:"30px"},inputInput:Object(ft.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),paddingRight:"50px",transition:e.transitions.create("width"),width:"100%",position:"center"},e.breakpoints.up("md"),{width:"100%"}),sectionMobile:Object(ft.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),selectMenu:{height:"40px"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},hide:{display:"none"},icon:{"&:focus":{outline:"none"}}}}))(Ft),It=n(141),Mt=(n(182),n(139)),Vt=(n(184),function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).handleCallback=function(t){var n=t.type,a=Object(It.a)(t,["type"]);console.log(n),console.log(a),"track_update"===n&&e.props.onSongChange(a.track.id),"player_update"===n&&(console.log("Player Update"),console.log(e.props.needsUpdate),e.props.needsUpdate&&e.props.canUpdate()),e.props.onPlayChange(a.isPlaying)},e.shuffle=function(){e.props.onShuffleChange()},e}return Object(p.a)(n,[{key:"render",value:function(){console.log(this.props);var e=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:e.grow},s.a.createElement(F.a,{position:"static"},this.props.access_token&&s.a.createElement(Mt.a,{token:this.props.access_token,callback:this.handleCallback,uris:this.props.playlist,magnifySliderOnHover:!0,showSaveIcon:!1,play:this.props.play,offset:this.props.offset,styles:{activeColor:"#fff",bgColor:"#696969",color:"#fff",errorColor:"fff",loaderColor:"#fff",sliderColor:"#1cb954",trackArtistColor:"#d9d9d9",trackNameColor:"#fff"}}))))}}]),n}(a.Component)),Bt=Object(k.a)((function(e){return{grow:{flexGrow:1}}}))(Vt),Tt=n(254),At=n(232),Rt=n(245),Dt=n(133),Jt=n.n(Dt),zt=n(134),Lt=n.n(zt),Ht=n(189),Wt=n(246),Gt=n(247),Yt=n(135),Qt=n.n(Yt),Kt=n(136),Xt=n.n(Kt),$t=n(137),Zt=n.n($t),en=n(138),tn=n.n(en),nn=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={open:!1},e.toMyPlaylists=function(){e.props.history.push("/"+e.props.username)},e.toSavedPlaylists=function(){e.props.history.push("/"+e.props.username)},e.toFollowers=function(){e.props.history.push("/"+e.props.username+"/followers")},e.toFollowing=function(){e.props.history.push("/"+e.props.username+"/following")},e.toRequests=function(){e.props.history.push("/"+e.props.username+"/requests")},e.toSetting=function(){e.props.history.push("/"+e.props.username+"/settings")},e.handleDrawerClose=function(){e.setState({open:!1})},e.handleDrawerOpen=function(){e.setState({open:!0})},e.toPlaylists=function(){console.log("To playlists"),e.props.history.push("/"+e.props.username)},e.toFollowers=function(){console.log("To followers "),e.props.history.push("/"+e.props.username+"/followers")},e.toSettings=function(){console.log("To Settings"),e.props.history.push("/"+e.props.username+"/settings")},e.toLogOut=function(){console.log("Log Out"),localStorage.removeItem("username"),e.props.onUsernameChange(""),e.props.history.push("/")},e}return Object(p.a)(n,[{key:"render",value:function(){var e,t;console.log(this.props.needsUpdate);var n=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(E.a,null),s.a.createElement(F.a,{position:"fixed",className:Object(xt.a)(n.appBar,Object(ft.a)({},n.appBarShift,this.state.open))},s.a.createElement(qt,{username:this.props.username,onUsernameChange:this.props.onUsernameChange,handleDrawerOpen:this.handleDrawerOpen,open:this.state.open,history:this.props.history})),s.a.createElement(Tt.a,{variant:"permanent",className:Object(xt.a)(n.drawer,(e={},Object(ft.a)(e,n.drawerOpen,this.state.open),Object(ft.a)(e,n.drawerClose,!this.state.open),e)),classes:{paper:Object(xt.a)((t={},Object(ft.a)(t,n.drawerOpen,this.state.open),Object(ft.a)(t,n.drawerClose,!this.state.open),t))}},s.a.createElement("div",{className:n.toolbar},s.a.createElement(V.a,{onClick:this.handleDrawerClose,className:n.icon},this.state.open?s.a.createElement(Jt.a,{className:n.listItemIcon}):s.a.createElement(Lt.a,{className:n.listItemIcon}))),s.a.createElement(Rt.a,null),s.a.createElement(At.a,null,s.a.createElement(Ht.a,{button:!0,key:"Playlists",onClick:this.toPlaylists},s.a.createElement(Wt.a,null," ",s.a.createElement(Qt.a,{className:n.listItemIcon})),s.a.createElement(Gt.a,{className:n.listItemText,primary:"Mixtapes"})),s.a.createElement(Ht.a,{button:!0,key:"Followers",onClick:this.toFollowers},s.a.createElement(Wt.a,null,s.a.createElement(Xt.a,{className:n.listItemIcon})),s.a.createElement(Gt.a,{className:n.listItemText,primary:"Followers"}))),s.a.createElement(Rt.a,null),s.a.createElement(At.a,null,s.a.createElement(Ht.a,{button:!0,key:"Settings",onClick:this.toSettings},s.a.createElement(Wt.a,null," ",s.a.createElement(Zt.a,{className:n.listItemIcon})),s.a.createElement(Gt.a,{className:n.listItemText,primary:"Settings"})),s.a.createElement(Ht.a,{button:!0,key:"Log Out",onClick:this.toLogOut},s.a.createElement(Wt.a,null," ",s.a.createElement(tn.a,{className:n.listItemIcon})),s.a.createElement(Gt.a,{className:n.listItemText,primary:"Log Out"})))),s.a.createElement(F.a,{position:"fixed",className:Object(xt.a)(n.bottomAppBar,Object(ft.a)({},n.appBarShift,this.state.open))},s.a.createElement(Bt,{username:this.props.username,play:this.props.play,onPlayChange:this.props.onPlayChange,onPlaylistChange:this.props.onPlaylistChange,onSongChange:this.props.onSongChange,onShuffleChange:this.props.onShuffleChange,playlist:this.props.playlist,current_song:this.props.current_song,access_token:this.props.access_token,offset:this.props.offset,shuffle:this.props.shuffle,shufflePlaylist:this.props.shufflePlaylist,needsUpdate:this.props.needsUpdate,updated:this.props.updated,canUpdate:this.props.canUpdate})))}}]),n}(a.Component),an=Object(k.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,background:"#5472d3",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(ft.a)({background:"#5472d3",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(ot.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)},bottomAppBar:{top:"auto",bottom:0,zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},listItemText:{color:"white"},listItemIcon:{color:"white"}}}))(nn),sn=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).componentDidMount=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.getAccesstoken();case 1:case"end":return e.stop()}}),e)}))),a.getAccesstoken=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(null==localStorage.getItem("access-token")||"null"==localStorage.getItem("access-token")),null!=localStorage.getItem("access-token")&&"null"!=localStorage.getItem("access-token")){e.next=8;break}return console.log("HERE"),e.next=5,fetch("https://easytunes.herokuapp.com/access-token",{method:"POST",headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed");return e.json()})).then((function(e){console.log(null==e),null==e&&fetch("https://easytunes.herokuapp.com/authorization",{method:"POST",headers:{"content-type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Authorization Failed");return e.json()})).then((function(e){console.log(e),window.location.replace(e)})).catch((function(e){console.log(e)})),localStorage.setItem("access-token",e),a.setState({access_token:e},(function(){console.log(this.state.access_token)}))})).catch((function(e){console.log(e)}));case 5:return e.abrupt("return",e.sent);case 8:a.setState({access_token:localStorage.getItem("access-token")});case 9:case"end":return e.stop()}}),e)}))),a.onPlayChange=function(e){a.setState({play:e},(function(){console.log(this.state)}))},a.updated=function(){a.setState({needsUpdate:!1})},a.searchSongChange=function(e){},a.onSongChange=function(e){var t=null,n=0;a.state.current_playlist.songs.forEach((function(a,s){a.song_id===e&&(t=a,n=s)})),console.log("SONG CHANGE APP.JS"),a.state.current_playlist?a.state.play?a.setState({current_song:t,play:!0,offset:n,needsUpdate:!1},(function(){console.log(this.state)})):a.setState({play:!0,needsUpdate:!0,stored:{playlist:a.state.current_playlist,uris:a.state.uris,song:t,offset:n}}):a.setState({current_song:t,play:!0,offset:n,needsUpdate:!1},(function(){console.log(this.state)}))},a.shufflePlaylist=function(e,t){for(var n,a,s=e.length,o=null;s>0;)a=Math.floor(Math.random()*s),n=e[s-=1],e[s]=e[a],e[a]=n;return console.log(e[0]),t.songs.forEach((function(t){console.log(t.song_uri),t.song_uri===e[0]&&(o=t)})),console.log([e,o]),[e,o]},a.onPlaylistChange=function(e,t){var n=[],s=[n],o=0;e?(n=e.songs.map((function(e,n){return e.song_uri===t.song_uri&&(o=n),e.song_uri})),s[0]=n,s.push(e.songs[o]),a.state.shuffle&&(s=a.shufflePlaylist(n,e))):(s[0]=[t.uri],s.push(t)),console.log("PLAYLIST CHANGE APP.JS"),console.log(null===a.state.current_playlist),a.state.current_playlist?a.state.play?a.setState({current_playlist:e,play:!0,uris:s[0],current_song:s[1],offset:o,needsUpdate:!1},(function(){console.log(this.state)})):a.setState({play:!0,needsUpdate:!0,stored:{playlist:e,uris:s[0],song:s[1],offset:o}}):a.setState({current_playlist:e,play:!0,uris:s[0],current_song:s[1],offset:o,needsUpdate:!1},(function(){console.log(this.state)}))},a.onShuffleChange=function(){var e=a.state.uris;a.state.shuffle&&(e=a.state.current_playlist.songs.map((function(e){return e.song_uri}))),a.setState({shuffle:!a.state.shuffle,uris:e})},a.onUsernameChange=function(e){a.setState({username:e})},a.onSearchResults=function(e){a.setState({results:e})},a.atHome=function(){a.setState({atHome:!0})},a.notAtHome=function(){a.setState({atHome:!1})},a.canUpdate=function(){var e=a.state.stored;console.log("HERE"),a.setState({current_playlist:e.playlist,uris:e.uris,current_song:e.song,offset:e.offset,needsUpdate:!1})},a.state={username:localStorage.getItem("username"),results:null,play:!1,current_playlist:null,current_song:null,access_token:null,uris:[],offset:0,shuffle:!1,needsUpdate:!0},a}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props.classes;return s.a.createElement(d.a,null,s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:this.state.username?t.root:null},this.state.username?s.a.createElement(g.a,{render:function(t){return s.a.createElement(an,Object.assign({},t,{username:e.state.username,onUsernameChange:e.onUsernameChange,play:e.state.play,onPlayChange:e.onPlayChange,onPlaylistChange:e.onPlaylistChange,onSongChange:e.onSongChange,onShuffleChange:e.onShuffleChange,playlist:e.state.uris,current_song:e.state.current_song,access_token:e.state.access_token,offset:e.state.offset,shuffle:e.state.shuffle,shufflePlaylist:e.shufflePlaylist,needsUpdate:e.state.needsUpdate,updated:e.updated,canUpdate:e.canUpdate}))}}):null,s.a.createElement(g.c,null,s.a.createElement(g.a,{exact:!0,path:"/",render:function(t){return s.a.createElement(Fe,Object.assign({},t,{username:e.state.username}))}}),s.a.createElement(g.a,{exact:!0,path:"/login",render:function(t){return s.a.createElement(A,Object.assign({},t,{username:e.state.username,login:!0,onUsernameChange:e.onUsernameChange}))}}),s.a.createElement(g.a,{exact:!0,path:"/register",render:function(t){return s.a.createElement(A,Object.assign({},t,{username:e.state.username,login:!1,onUsernameChange:e.onUsernameChange}))}}),s.a.createElement(g.a,{exact:!0,path:"/forgotpassword",component:D}),s.a.createElement(g.a,{exact:!0,path:"/home",render:function(t){return s.a.createElement(Ve,Object.assign({},t,{username:e.state.username,access_token:e.state.access_token,current_playlist:e.state.current_playlist,current_song:e.state.current_song}))}}),s.a.createElement(g.a,{exact:!0,path:"/searchq=:query/type=:type",render:function(t){return s.a.createElement(Qe,Object.assign({},t,{username:e.state.username,results:e.state.results,play:e.state.play,onPlayChange:e.onPlayChange,onPlaylistChange:e.onPlaylistChange,onSongChange:e.onSongChange,onShuffleChange:e.onShuffleChange,playlist:e.state.uris,current_song:e.state.current_song,access_token:e.state.access_token,offset:e.state.offset,shuffle:e.state.shuffle,shufflePlaylist:e.shufflePlaylist,needsUpdate:e.state.needsUpdate,updated:e.updated,canUpdate:e.canUpdate}))}}),s.a.createElement(g.a,{exact:!0,path:"/:username/followers",render:function(t){return s.a.createElement(st,Object.assign({},t,{username:e.state.username,state:"followers"}))}}),s.a.createElement(g.a,{exact:!0,path:"/:username/following",render:function(t){return s.a.createElement(st,Object.assign({},t,{username:e.state.username,state:"following"}))}}),s.a.createElement(g.a,{exact:!0,path:"/:username/requests",render:function(t){return s.a.createElement(st,Object.assign({},t,{username:e.state.username,state:"requests"}))}}),s.a.createElement(g.a,{exact:!0,path:"/:username/mixtape=:playlistid",render:function(t){return s.a.createElement(je,Object.assign({},t,{username:e.state.username,play:e.state.play,onPlayChange:e.onPlayChange,onPlaylistChange:e.onPlaylistChange,onSongChange:e.onSongChange,current_playlist:e.state.current_playlist,current_song:e.state.current_song,shuffle:e.shuffle}))}}),s.a.createElement(g.a,{exact:!0,path:"/:username/settings",render:function(t){return s.a.createElement(gt,Object.assign({},t,{username:e.state.username,onUsernameChange:e.onUsernameChange}))}}),s.a.createElement(g.a,{exact:!0,path:"/:username",render:function(t){return s.a.createElement(ce,Object.assign({},t,{username:e.state.username,play:e.state.play,onPlayChange:e.onPlayChange,onPlaylistChange:e.onPlaylistChange,current_playlist:e.state.current_playlist,shuffle:e.shuffle}))}}),s.a.createElement(g.a,{exact:!0,path:"/:username/saved-mixtapes",render:function(t){return s.a.createElement(ce,Object.assign({},t,{username:e.state.username,play:e.state.play,onPlayChange:e.onPlayChange,onPlaylistChange:e.onPlaylistChange,current_playlist:e.state.current_playlist,shuffle:e.shuffle}))}})))))}}]),n}(a.Component),on=Object(k.a)((function(e){return{root:{display:"flex"}}}))(sn);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(on,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},95:function(e,t,n){}},[[157,1,2]]]);
//# sourceMappingURL=main.3c4cd821.chunk.js.map